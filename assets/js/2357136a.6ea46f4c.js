(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[273],{7853:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var r=a(3066),n=a(67294),l=a(34863),c=a(42635);let o,u;!function(e){e.Memory="memory"}(o||(o={})),function(e){e.TotalMemory="totalMemory",e.Garbage="garbage"}(u||(u={}));const m=50,s=5,i=1,h="#888888",d="#007ACC";const g=50,f=5,p=1;const b=e=>e.replace(".lua","").split("/").pop(),y=e=>Math.round(e/10)/100+" Mb",E=e=>e.categories[u.Garbage],w=e=>(E(e.right)-E(e.left))/E(e.left);function v(){let e=(0,n.useRef)(null),t=(0,n.useRef)(null);const a=function(e){const t=JSON.parse(c.inflateSync(Buffer.from(e,"base64")).toString()),a=t.old,r=t.new;return function(e,t,a){const r=new Map;for(const n of e)r.set(a(n),{left:n});for(const n of t){const e=a(n),t=r.get(e);t?t.right=n:r.set(e,{right:n})}return[...r.values()]}(a,r,(e=>e.benchmarkName))}(window.location.search.split("?d=")[1]).sort(((e,t)=>w(e)-w(t))),r=a.map(((e,t)=>{const a=w(e),r=0===a?"currentColor":a>0?"red":"green";return n.createElement("tr",{key:t,style:{color:r}},n.createElement("td",null,e.left.benchmarkName),n.createElement("td",null,y(E(e.left))),n.createElement("td",null,y(E(e.right))),n.createElement("td",null,a))})),o=a.map((e=>{const t=e.left.categories[u.Garbage],a=e.right.categories[u.Garbage];return{name:b(e.left.benchmarkName||e.right.benchmarkName),value:100*(a-t)/t}})),v=a.map((e=>({name:b(e.left.benchmarkName||e.right.benchmarkName),oldValue:e.left.categories[u.Garbage]||0,newValue:e.right.categories[u.Garbage]||0})));return(0,n.useEffect)((()=>{!function(e,t,a,r){const n=l.VV$(t.map((e=>e.value))),c=l.Fp7(t.map((e=>e.value))),o=l.BYU().domain([1.2*n,1.2*c]).range([0,r-10]),u=l.y4O(o),m=l.tiA().domain(t.map((e=>e.name))).range([g,a-p]),s=m.bandwidth(),i=l.LLu(m);e.append("g").attr("transform",`translate(0, ${o(0)+5})`).call(i),e.append("g").attr("transform",`translate(${g}, ${f})`).call(u);const h=e=>Math.abs(r/2-o(e)),d=e.selectAll("rect").data(t).enter();d.append("rect").attr("width",25).attr("x",(e=>m(e.name)+.5*s-12.5)).attr("height",(e=>h(e.value)-1)).attr("y",(e=>e.value>0?r/2+10:r/2+10-h(e.value))).style("fill",(e=>e.value>0?"red":"green")),d.append("text").text((e=>`${e.value>0?"+":""}${Math.round(100*e.value)/100}%`)).attr("x",(e=>m(e.name)+.5*s)).attr("y",(e=>e.value>0?r/2+h(e.value)+30:r/2-h(e.value))).style("fill","currentColor").style("text-anchor","middle")}(l.Ys(e.current),o,1e3,300),function(e,t,a,r){const n=r-50,c=l.tiA().domain(t.map((e=>e.name))).range([m,a-i]),o=c.bandwidth(),u=l.LLu(c);e.append("g").attr("transform",`translate(0, ${n})`).call(u);const g=l.Fp7(t.map((e=>Math.max(e.oldValue,e.newValue)))),f=Math.pow(10,Math.ceil(Math.log10(g))),p=l.p2C().domain([1,f]).range([n-s,0]),b=l.y4O(p);e.append("g").attr("transform",`translate(${m}, ${s})`).call(b);const y=e.selectAll("rect").data(t).enter();y.append("rect").attr("width",25).attr("x",(e=>c(e.name)+.5*o-25-1)).attr("height",(e=>n-p(e.oldValue))).attr("y",(e=>p(e.oldValue))).style("fill",h),y.append("rect").attr("width",25).attr("x",(e=>c(e.name)+.5*o+1)).attr("height",(e=>n-p(e.newValue))).attr("y",(e=>p(e.newValue))).style("fill",d);const E=[["Master",h],["Commit",d]];(function(e,t){const a=e.append("g");for(const[r,[n,l]]of t.entries())a.append("rect").attr("width",15).attr("height",15).attr("x",100*r).style("fill",l).style("stroke","currentColor"),a.append("text").attr("x",100*r+20).attr("y",13).text(n).attr("fill","currentColor");return a})(e,E).attr("transform",`translate(${a-100*E.length-i}, ${r-20})`)}(l.Ys(t.current),v,1e3,300)})),n.createElement(n.Fragment,null,n.createElement("h2",null,"Benchmark results"),n.createElement("table",null,n.createElement("thead",null,n.createElement("tr",{style:{fontWeight:"bold"}},n.createElement("td",null,"Benchmark"),n.createElement("td",null,"Garbage Master"),n.createElement("td",null,"Garbage Commit"),n.createElement("td",null,"% Change"))),n.createElement("tbody",null,r)),n.createElement("h2",null,"Garbage created change"),n.createElement("svg",{ref:e,width:1e3,height:300}),n.createElement("h2",null,"Garbage created"),n.createElement("svg",{ref:t,width:1e3,height:300}))}function k(){const e="undefined"==typeof window;return n.createElement(r.Z,{title:"Benchmark"},!e&&n.createElement(v,null))}},52361:()=>{},94616:()=>{}}]);