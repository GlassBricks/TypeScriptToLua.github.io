/*! For license information please see fengari.worker.js.LICENSE.txt */
!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=26)}([function(t,e){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=34)}([function(t,e,n){"use strict";const r=n(5);t.exports.FENGARI_AUTHORS=r.FENGARI_AUTHORS,t.exports.FENGARI_COPYRIGHT=r.FENGARI_COPYRIGHT,t.exports.FENGARI_RELEASE=r.FENGARI_RELEASE,t.exports.FENGARI_VERSION=r.FENGARI_VERSION,t.exports.FENGARI_VERSION_MAJOR=r.FENGARI_VERSION_MAJOR,t.exports.FENGARI_VERSION_MINOR=r.FENGARI_VERSION_MINOR,t.exports.FENGARI_VERSION_NUM=r.FENGARI_VERSION_NUM,t.exports.FENGARI_VERSION_RELEASE=r.FENGARI_VERSION_RELEASE,t.exports.luastring_eq=r.luastring_eq,t.exports.luastring_indexOf=r.luastring_indexOf,t.exports.luastring_of=r.luastring_of,t.exports.to_jsstring=r.to_jsstring,t.exports.to_luastring=r.to_luastring,t.exports.to_uristring=r.to_uristring;const a=n(3),u=n(2),l=n(7),s=n(17);t.exports.luaconf=a,t.exports.lua=u,t.exports.lauxlib=l,t.exports.lualib=s},function(t,e,n){"use strict";let r,a,u;if(r="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(t){let e=0,n=t.length,r=new Uint8Array(n);for(;n>e;)r[e]=t[e++];return r},"function"==typeof(new Uint8Array).indexOf)a=function(t,e,n){return t.indexOf(e,n)};else{let t=[].indexOf;if(0!==t.call(new Uint8Array(1),0))throw Error("missing .indexOf");a=function(e,n,r){return t.call(e,n,r)}}u="function"==typeof Uint8Array.of?Uint8Array.of.bind(Uint8Array):function(){return r(arguments)};const l=function(t){return t instanceof Uint8Array},s="cannot convert invalid utf8 to javascript string",o=";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#".split("").reduce((function(t,e){return t[e.charCodeAt(0)]=!0,t}),{}),i={},c=function(t,e){if("string"!=typeof t)throw new TypeError("to_luastring expects a javascript string");if(e){let e=i[t];if(l(e))return e}let n=t.length,a=Array(n),u=0;for(let r=0;r<n;++r){let e=t.charCodeAt(r);if(e<=127)a[u++]=e;else if(e<=2047)a[u++]=192|e>>6,a[u++]=128|63&e;else{if(e>=55296&&e<=56319&&r+1<n){let n=t.charCodeAt(r+1);n>=56320&&n<=57343&&(r++,e=1024*(e-55296)+n+9216)}e<=65535?(a[u++]=224|e>>12,a[u++]=128|e>>6&63,a[u++]=128|63&e):(a[u++]=240|e>>18,a[u++]=128|e>>12&63,a[u++]=128|e>>6&63,a[u++]=128|63&e)}}return a=r(a),e&&(i[t]=a),a};t.exports.luastring_from=r,t.exports.luastring_indexOf=a,t.exports.luastring_of=u,t.exports.is_luastring=l,t.exports.luastring_eq=function(t,e){if(t!==e){let n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1}return!0},t.exports.to_jsstring=function(t,e,n,r){if(!l(t))throw new TypeError("to_jsstring expects a Uint8Array");n=void 0===n?t.length:Math.min(t.length,n);let a="";for(let u=void 0!==e?e:0;u<n;){let e=t[u++];if(e<128)a+=String.fromCharCode(e);else if(e<194||e>244){if(!r)throw RangeError(s);a+="\ufffd"}else if(e<=223){if(u>=n){if(!r)throw RangeError(s);a+="\ufffd";continue}let l=t[u++];if(128!=(192&l)){if(!r)throw RangeError(s);a+="\ufffd";continue}a+=String.fromCharCode(((31&e)<<6)+(63&l))}else if(e<=239){if(u+1>=n){if(!r)throw RangeError(s);a+="\ufffd";continue}let l=t[u++];if(128!=(192&l)){if(!r)throw RangeError(s);a+="\ufffd";continue}let o=t[u++];if(128!=(192&o)){if(!r)throw RangeError(s);a+="\ufffd";continue}let i=((15&e)<<12)+((63&l)<<6)+(63&o);if(i<=65535)a+=String.fromCharCode(i);else{let t=55296+((i-=65536)>>10),e=i%1024+56320;a+=String.fromCharCode(t,e)}}else{if(u+2>=n){if(!r)throw RangeError(s);a+="\ufffd";continue}let l=t[u++];if(128!=(192&l)){if(!r)throw RangeError(s);a+="\ufffd";continue}let o=t[u++];if(128!=(192&o)){if(!r)throw RangeError(s);a+="\ufffd";continue}let i=t[u++];if(128!=(192&i)){if(!r)throw RangeError(s);a+="\ufffd";continue}let c=((7&e)<<18)+((63&l)<<12)+((63&o)<<6)+(63&i),f=55296+((c-=65536)>>10),_=c%1024+56320;a+=String.fromCharCode(f,_)}}return a},t.exports.to_uristring=function(t){if(!l(t))throw new TypeError("to_uristring expects a Uint8Array");let e="";for(let n=0;n<t.length;n++){let r=t[n];o[r]?e+=String.fromCharCode(r):e+="%"+(r<16?"0":"")+r.toString(16)}return e},t.exports.to_luastring=c,t.exports.from_userstring=function(t){if(!l(t)){if("string"!=typeof t)throw new TypeError("expects an array of bytes or javascript string");t=c(t)}return t};const f=c("\x1bLua");t.exports.LUA_SIGNATURE=f,t.exports.LUA_VERSION_MAJOR="5",t.exports.LUA_VERSION_MINOR="3",t.exports.LUA_VERSION_NUM=503,t.exports.LUA_VERSION_RELEASE="4",t.exports.LUA_VERSION="Lua 5.3",t.exports.LUA_RELEASE="Lua 5.3.4",t.exports.LUA_COPYRIGHT="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",t.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes";const _={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};_.LUA_TSHRSTR=0|_.LUA_TSTRING,_.LUA_TLNGSTR=16|_.LUA_TSTRING,_.LUA_TNUMFLT=0|_.LUA_TNUMBER,_.LUA_TNUMINT=16|_.LUA_TNUMBER,_.LUA_TLCL=0|_.LUA_TFUNCTION,_.LUA_TLCF=16|_.LUA_TFUNCTION,_.LUA_TCCL=32|_.LUA_TFUNCTION;const{LUAI_MAXSTACK:p}=n(3),h=-p-1e3;t.exports.LUA_HOOKCALL=0,t.exports.LUA_HOOKCOUNT=3,t.exports.LUA_HOOKLINE=2,t.exports.LUA_HOOKRET=1,t.exports.LUA_HOOKTAILCALL=4,t.exports.LUA_MASKCALL=1,t.exports.LUA_MASKCOUNT=8,t.exports.LUA_MASKLINE=4,t.exports.LUA_MASKRET=2,t.exports.LUA_MINSTACK=20,t.exports.LUA_MULTRET=-1,t.exports.LUA_OPADD=0,t.exports.LUA_OPBAND=7,t.exports.LUA_OPBNOT=13,t.exports.LUA_OPBOR=8,t.exports.LUA_OPBXOR=9,t.exports.LUA_OPDIV=5,t.exports.LUA_OPEQ=0,t.exports.LUA_OPIDIV=6,t.exports.LUA_OPLE=2,t.exports.LUA_OPLT=1,t.exports.LUA_OPMOD=3,t.exports.LUA_OPMUL=2,t.exports.LUA_OPPOW=4,t.exports.LUA_OPSHL=10,t.exports.LUA_OPSHR=11,t.exports.LUA_OPSUB=1,t.exports.LUA_OPUNM=12,t.exports.LUA_REGISTRYINDEX=h,t.exports.LUA_RIDX_GLOBALS=2,t.exports.LUA_RIDX_LAST=2,t.exports.LUA_RIDX_MAINTHREAD=1,t.exports.constant_types=_,t.exports.lua_Debug=class{constructor(){this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null}},t.exports.lua_upvalueindex=function(t){return h-t},t.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6}},function(t,e,n){"use strict";const r=n(1),a=n(18),u=n(11),l=n(8),s=n(12);t.exports.LUA_AUTHORS=r.LUA_AUTHORS,t.exports.LUA_COPYRIGHT=r.LUA_COPYRIGHT,t.exports.LUA_ERRERR=r.thread_status.LUA_ERRERR,t.exports.LUA_ERRGCMM=r.thread_status.LUA_ERRGCMM,t.exports.LUA_ERRMEM=r.thread_status.LUA_ERRMEM,t.exports.LUA_ERRRUN=r.thread_status.LUA_ERRRUN,t.exports.LUA_ERRSYNTAX=r.thread_status.LUA_ERRSYNTAX,t.exports.LUA_HOOKCALL=r.LUA_HOOKCALL,t.exports.LUA_HOOKCOUNT=r.LUA_HOOKCOUNT,t.exports.LUA_HOOKLINE=r.LUA_HOOKLINE,t.exports.LUA_HOOKRET=r.LUA_HOOKRET,t.exports.LUA_HOOKTAILCALL=r.LUA_HOOKTAILCALL,t.exports.LUA_MASKCALL=r.LUA_MASKCALL,t.exports.LUA_MASKCOUNT=r.LUA_MASKCOUNT,t.exports.LUA_MASKLINE=r.LUA_MASKLINE,t.exports.LUA_MASKRET=r.LUA_MASKRET,t.exports.LUA_MINSTACK=r.LUA_MINSTACK,t.exports.LUA_MULTRET=r.LUA_MULTRET,t.exports.LUA_NUMTAGS=r.constant_types.LUA_NUMTAGS,t.exports.LUA_OK=r.thread_status.LUA_OK,t.exports.LUA_OPADD=r.LUA_OPADD,t.exports.LUA_OPBAND=r.LUA_OPBAND,t.exports.LUA_OPBNOT=r.LUA_OPBNOT,t.exports.LUA_OPBOR=r.LUA_OPBOR,t.exports.LUA_OPBXOR=r.LUA_OPBXOR,t.exports.LUA_OPDIV=r.LUA_OPDIV,t.exports.LUA_OPEQ=r.LUA_OPEQ,t.exports.LUA_OPIDIV=r.LUA_OPIDIV,t.exports.LUA_OPLE=r.LUA_OPLE,t.exports.LUA_OPLT=r.LUA_OPLT,t.exports.LUA_OPMOD=r.LUA_OPMOD,t.exports.LUA_OPMUL=r.LUA_OPMUL,t.exports.LUA_OPPOW=r.LUA_OPPOW,t.exports.LUA_OPSHL=r.LUA_OPSHL,t.exports.LUA_OPSHR=r.LUA_OPSHR,t.exports.LUA_OPSUB=r.LUA_OPSUB,t.exports.LUA_OPUNM=r.LUA_OPUNM,t.exports.LUA_REGISTRYINDEX=r.LUA_REGISTRYINDEX,t.exports.LUA_RELEASE=r.LUA_RELEASE,t.exports.LUA_RIDX_GLOBALS=r.LUA_RIDX_GLOBALS,t.exports.LUA_RIDX_LAST=r.LUA_RIDX_LAST,t.exports.LUA_RIDX_MAINTHREAD=r.LUA_RIDX_MAINTHREAD,t.exports.LUA_SIGNATURE=r.LUA_SIGNATURE,t.exports.LUA_TNONE=r.constant_types.LUA_TNONE,t.exports.LUA_TNIL=r.constant_types.LUA_TNIL,t.exports.LUA_TBOOLEAN=r.constant_types.LUA_TBOOLEAN,t.exports.LUA_TLIGHTUSERDATA=r.constant_types.LUA_TLIGHTUSERDATA,t.exports.LUA_TNUMBER=r.constant_types.LUA_TNUMBER,t.exports.LUA_TSTRING=r.constant_types.LUA_TSTRING,t.exports.LUA_TTABLE=r.constant_types.LUA_TTABLE,t.exports.LUA_TFUNCTION=r.constant_types.LUA_TFUNCTION,t.exports.LUA_TUSERDATA=r.constant_types.LUA_TUSERDATA,t.exports.LUA_TTHREAD=r.constant_types.LUA_TTHREAD,t.exports.LUA_VERSION=r.LUA_VERSION,t.exports.LUA_VERSION_MAJOR=r.LUA_VERSION_MAJOR,t.exports.LUA_VERSION_MINOR=r.LUA_VERSION_MINOR,t.exports.LUA_VERSION_NUM=r.LUA_VERSION_NUM,t.exports.LUA_VERSION_RELEASE=r.LUA_VERSION_RELEASE,t.exports.LUA_YIELD=r.thread_status.LUA_YIELD,t.exports.lua_Debug=r.lua_Debug,t.exports.lua_upvalueindex=r.lua_upvalueindex,t.exports.lua_absindex=a.lua_absindex,t.exports.lua_arith=a.lua_arith,t.exports.lua_atpanic=a.lua_atpanic,t.exports.lua_atnativeerror=a.lua_atnativeerror,t.exports.lua_call=a.lua_call,t.exports.lua_callk=a.lua_callk,t.exports.lua_checkstack=a.lua_checkstack,t.exports.lua_close=s.lua_close,t.exports.lua_compare=a.lua_compare,t.exports.lua_concat=a.lua_concat,t.exports.lua_copy=a.lua_copy,t.exports.lua_createtable=a.lua_createtable,t.exports.lua_dump=a.lua_dump,t.exports.lua_error=a.lua_error,t.exports.lua_gc=a.lua_gc,t.exports.lua_getallocf=a.lua_getallocf,t.exports.lua_getextraspace=a.lua_getextraspace,t.exports.lua_getfield=a.lua_getfield,t.exports.lua_getglobal=a.lua_getglobal,t.exports.lua_gethook=u.lua_gethook,t.exports.lua_gethookcount=u.lua_gethookcount,t.exports.lua_gethookmask=u.lua_gethookmask,t.exports.lua_geti=a.lua_geti,t.exports.lua_getinfo=u.lua_getinfo,t.exports.lua_getlocal=u.lua_getlocal,t.exports.lua_getmetatable=a.lua_getmetatable,t.exports.lua_getstack=u.lua_getstack,t.exports.lua_gettable=a.lua_gettable,t.exports.lua_gettop=a.lua_gettop,t.exports.lua_getupvalue=a.lua_getupvalue,t.exports.lua_getuservalue=a.lua_getuservalue,t.exports.lua_insert=a.lua_insert,t.exports.lua_isboolean=a.lua_isboolean,t.exports.lua_iscfunction=a.lua_iscfunction,t.exports.lua_isfunction=a.lua_isfunction,t.exports.lua_isinteger=a.lua_isinteger,t.exports.lua_islightuserdata=a.lua_islightuserdata,t.exports.lua_isnil=a.lua_isnil,t.exports.lua_isnone=a.lua_isnone,t.exports.lua_isnoneornil=a.lua_isnoneornil,t.exports.lua_isnumber=a.lua_isnumber,t.exports.lua_isproxy=a.lua_isproxy,t.exports.lua_isstring=a.lua_isstring,t.exports.lua_istable=a.lua_istable,t.exports.lua_isthread=a.lua_isthread,t.exports.lua_isuserdata=a.lua_isuserdata,t.exports.lua_isyieldable=l.lua_isyieldable,t.exports.lua_len=a.lua_len,t.exports.lua_load=a.lua_load,t.exports.lua_newstate=s.lua_newstate,t.exports.lua_newtable=a.lua_newtable,t.exports.lua_newthread=s.lua_newthread,t.exports.lua_newuserdata=a.lua_newuserdata,t.exports.lua_next=a.lua_next,t.exports.lua_pcall=a.lua_pcall,t.exports.lua_pcallk=a.lua_pcallk,t.exports.lua_pop=a.lua_pop,t.exports.lua_pushboolean=a.lua_pushboolean,t.exports.lua_pushcclosure=a.lua_pushcclosure,t.exports.lua_pushcfunction=a.lua_pushcfunction,t.exports.lua_pushfstring=a.lua_pushfstring,t.exports.lua_pushglobaltable=a.lua_pushglobaltable,t.exports.lua_pushinteger=a.lua_pushinteger,t.exports.lua_pushjsclosure=a.lua_pushjsclosure,t.exports.lua_pushjsfunction=a.lua_pushjsfunction,t.exports.lua_pushlightuserdata=a.lua_pushlightuserdata,t.exports.lua_pushliteral=a.lua_pushliteral,t.exports.lua_pushlstring=a.lua_pushlstring,t.exports.lua_pushnil=a.lua_pushnil,t.exports.lua_pushnumber=a.lua_pushnumber,t.exports.lua_pushstring=a.lua_pushstring,t.exports.lua_pushthread=a.lua_pushthread,t.exports.lua_pushvalue=a.lua_pushvalue,t.exports.lua_pushvfstring=a.lua_pushvfstring,t.exports.lua_rawequal=a.lua_rawequal,t.exports.lua_rawget=a.lua_rawget,t.exports.lua_rawgeti=a.lua_rawgeti,t.exports.lua_rawgetp=a.lua_rawgetp,t.exports.lua_rawlen=a.lua_rawlen,t.exports.lua_rawset=a.lua_rawset,t.exports.lua_rawseti=a.lua_rawseti,t.exports.lua_rawsetp=a.lua_rawsetp,t.exports.lua_register=a.lua_register,t.exports.lua_remove=a.lua_remove,t.exports.lua_replace=a.lua_replace,t.exports.lua_resume=l.lua_resume,t.exports.lua_rotate=a.lua_rotate,t.exports.lua_setallof=l.lua_setallof,t.exports.lua_setfield=a.lua_setfield,t.exports.lua_setglobal=a.lua_setglobal,t.exports.lua_sethook=u.lua_sethook,t.exports.lua_seti=a.lua_seti,t.exports.lua_setlocal=u.lua_setlocal,t.exports.lua_setmetatable=a.lua_setmetatable,t.exports.lua_settable=a.lua_settable,t.exports.lua_settop=a.lua_settop,t.exports.lua_setupvalue=a.lua_setupvalue,t.exports.lua_setuservalue=a.lua_setuservalue,t.exports.lua_status=a.lua_status,t.exports.lua_stringtonumber=a.lua_stringtonumber,t.exports.lua_toboolean=a.lua_toboolean,t.exports.lua_todataview=a.lua_todataview,t.exports.lua_tointeger=a.lua_tointeger,t.exports.lua_tointegerx=a.lua_tointegerx,t.exports.lua_tojsstring=a.lua_tojsstring,t.exports.lua_tolstring=a.lua_tolstring,t.exports.lua_tonumber=a.lua_tonumber,t.exports.lua_tonumberx=a.lua_tonumberx,t.exports.lua_topointer=a.lua_topointer,t.exports.lua_toproxy=a.lua_toproxy,t.exports.lua_tostring=a.lua_tostring,t.exports.lua_tothread=a.lua_tothread,t.exports.lua_touserdata=a.lua_touserdata,t.exports.lua_type=a.lua_type,t.exports.lua_typename=a.lua_typename,t.exports.lua_upvalueid=a.lua_upvalueid,t.exports.lua_upvaluejoin=a.lua_upvaluejoin,t.exports.lua_version=a.lua_version,t.exports.lua_xmove=a.lua_xmove,t.exports.lua_yield=l.lua_yield,t.exports.lua_yieldk=l.lua_yieldk,t.exports.lua_tocfunction=a.lua_tocfunction},function(t,e,n){"use strict";const r={},{LUA_VERSION_MAJOR:a,LUA_VERSION_MINOR:u,to_luastring:l}=n(1);t.exports.LUA_PATH_SEP=";",t.exports.LUA_PATH_MARK="?",t.exports.LUA_EXEC_DIR="!";const s=a+"."+u;t.exports.LUA_VDIR=s;{const e="/";t.exports.LUA_DIRSEP=e;const n="./lua/"+s+"/";t.exports.LUA_LDIR=n;const r=n;t.exports.LUA_JSDIR=r;const a=l(n+"?.lua;"+n+"?/init.lua;./?.lua;./?/init.lua");t.exports.LUA_PATH_DEFAULT=a;const u=l(r+"?.js;"+r+"loadall.js;./?.js");t.exports.LUA_JSPATH_DEFAULT=u}const o=r.LUA_COMPAT_FLOATSTRING||!1,i=r.LUAI_MAXSTACK||1e6,c=r.LUA_IDSIZE||59,f=r.LUAL_BUFFERSIZE||8192,_=function(t,e){for(var n=Math.min(3,Math.ceil(Math.abs(e)/1023)),r=t,a=0;a<n;a++)r*=Math.pow(2,Math.floor((e+a)/n));return r};t.exports.LUAI_MAXSTACK=i,t.exports.LUA_COMPAT_FLOATSTRING=o,t.exports.LUA_IDSIZE=c,t.exports.LUA_INTEGER_FMT="%d",t.exports.LUA_INTEGER_FRMLEN="",t.exports.LUA_MAXINTEGER=2147483647,t.exports.LUA_MININTEGER=-2147483648,t.exports.LUA_NUMBER_FMT="%.14g",t.exports.LUA_NUMBER_FRMLEN="",t.exports.LUAL_BUFFERSIZE=f,t.exports.frexp=function(t){if(0===t)return[t,0];var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,t);var n=e.getUint32(0)>>>20&2047;0===n&&(e.setFloat64(0,t*Math.pow(2,64)),n=(e.getUint32(0)>>>20&2047)-64);var r=n-1022;return[_(t,-r),r]},t.exports.ldexp=_,t.exports.lua_getlocaledecpoint=function(){return 46},t.exports.lua_integer2str=function(t){return String(t)},t.exports.lua_number2str=function(t){return String(Number(t.toPrecision(14)))},t.exports.lua_numbertointeger=function(t){return t>=-2147483648&&t<2147483648&&t},t.exports.luai_apicheck=function(t,e){if(!e)throw Error(e)}},function(t,e,n){"use strict";const{luai_apicheck:r}=n(3),a=function(t){if(!t)throw Error("assertion failed")};t.exports.lua_assert=a,t.exports.luai_apicheck=r||function(t,e){return a(e)},t.exports.api_check=function(t,e,n){return r(t,e&&n)},t.exports.LUAI_MAXCCALLS=200,t.exports.LUA_MINBUFFER=32,t.exports.luai_nummod=function(t,e,n){let r=e%n;return r*n<0&&(r+=n),r},t.exports.MAX_INT=2147483647,t.exports.MIN_INT=-2147483648},function(t,e,n){const r=n(1),a="Fengari 0.1.4  Copyright (C) 2017-2018 B. Giannangeli, Daurnimator\nBased on: "+r.LUA_COPYRIGHT;t.exports.FENGARI_AUTHORS="B. Giannangeli, Daurnimator",t.exports.FENGARI_COPYRIGHT=a,t.exports.FENGARI_RELEASE="Fengari 0.1.4",t.exports.FENGARI_VERSION="Fengari 0.1",t.exports.FENGARI_VERSION_MAJOR="0",t.exports.FENGARI_VERSION_MINOR="1",t.exports.FENGARI_VERSION_NUM=1,t.exports.FENGARI_VERSION_RELEASE="4",t.exports.is_luastring=r.is_luastring,t.exports.luastring_eq=r.luastring_eq,t.exports.luastring_from=r.luastring_from,t.exports.luastring_indexOf=r.luastring_indexOf,t.exports.luastring_of=r.luastring_of,t.exports.to_jsstring=r.to_jsstring,t.exports.to_luastring=r.to_luastring,t.exports.to_uristring=r.to_uristring,t.exports.from_userstring=r.from_userstring},function(t,e,n){"use strict";const{LUA_OPADD:r,LUA_OPBAND:a,LUA_OPBNOT:u,LUA_OPBOR:l,LUA_OPBXOR:s,LUA_OPDIV:o,LUA_OPIDIV:i,LUA_OPMOD:c,LUA_OPMUL:f,LUA_OPPOW:_,LUA_OPSHL:p,LUA_OPSHR:h,LUA_OPSUB:d,LUA_OPUNM:L,constant_types:{LUA_NUMTAGS:g,LUA_TBOOLEAN:A,LUA_TCCL:x,LUA_TFUNCTION:T,LUA_TLCF:b,LUA_TLCL:O,LUA_TLIGHTUSERDATA:k,LUA_TLNGSTR:v,LUA_TNIL:E,LUA_TNUMBER:m,LUA_TNUMFLT:U,LUA_TNUMINT:N,LUA_TSHRSTR:R,LUA_TSTRING:y,LUA_TTABLE:S,LUA_TTHREAD:w,LUA_TUSERDATA:I},from_userstring:M,luastring_indexOf:P,luastring_of:C,to_jsstring:D,to_luastring:V}=n(1),{lisdigit:G,lisprint:B,lisspace:K,lisxdigit:j}=n(22),F=n(11),H=n(8),X=n(12),{luaS_bless:z,luaS_new:J}=n(10),Y=n(9),{LUA_COMPAT_FLOATSTRING:Z,ldexp:q,lua_integer2str:W,lua_number2str:$}=n(3),Q=n(15),{MAX_INT:tt,luai_nummod:et,lua_assert:nt}=n(4),rt=n(14),at=g,ut=g+1;class lt{constructor(t,e){this.type=t,this.value=e}ttype(){return 63&this.type}ttnov(){return 15&this.type}checktag(t){return this.type===t}checktype(t){return this.ttnov()===t}ttisnumber(){return this.checktype(m)}ttisfloat(){return this.checktag(U)}ttisinteger(){return this.checktag(N)}ttisnil(){return this.checktag(E)}ttisboolean(){return this.checktag(A)}ttislightuserdata(){return this.checktag(k)}ttisstring(){return this.checktype(y)}ttisshrstring(){return this.checktag(R)}ttislngstring(){return this.checktag(v)}ttistable(){return this.checktag(S)}ttisfunction(){return this.checktype(T)}ttisclosure(){return(31&this.type)===T}ttisCclosure(){return this.checktag(x)}ttisLclosure(){return this.checktag(O)}ttislcf(){return this.checktag(b)}ttisfulluserdata(){return this.checktag(I)}ttisthread(){return this.checktag(w)}ttisdeadkey(){return this.checktag(ut)}l_isfalse(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}setfltvalue(t){this.type=U,this.value=t}chgfltvalue(t){nt(this.type==U),this.value=t}setivalue(t){this.type=N,this.value=t}chgivalue(t){nt(this.type==N),this.value=t}setnilvalue(){this.type=E,this.value=null}setfvalue(t){this.type=b,this.value=t}setpvalue(t){this.type=k,this.value=t}setbvalue(t){this.type=A,this.value=t}setsvalue(t){this.type=v,this.value=t}setuvalue(t){this.type=I,this.value=t}setthvalue(t){this.type=w,this.value=t}setclLvalue(t){this.type=O,this.value=t}setclCvalue(t){this.type=x,this.value=t}sethvalue(t){this.type=S,this.value=t}setdeadvalue(){this.type=ut,this.value=null}setfrom(t){this.type=t.type,this.value=t.value}tsvalue(){return nt(this.ttisstring()),this.value}svalue(){return this.tsvalue().getstr()}vslen(){return this.tsvalue().tsslen()}jsstring(t,e){return D(this.svalue(),t,e,!0)}}const st=function(t,e,n){t.stack[e].setsvalue(n)},ot=new lt(E,null);Object.freeze(ot),t.exports.luaO_nilobject=ot;class it{constructor(t,e){this.id=t.l_G.id_counter++,this.p=null,this.nupvalues=e,this.upvals=new Array(e)}}class ct{constructor(t,e,n){for(this.id=t.l_G.id_counter++,this.f=e,this.nupvalues=n,this.upvalue=new Array(n);n--;)this.upvalue[n]=new lt(E,null)}}class ft{constructor(t,e){this.id=t.l_G.id_counter++,this.metatable=null,this.uservalue=new lt(E,null),this.len=e,this.data=Object.create(null)}}const _t=V("..."),pt=V('[string "'),ht=V('"]'),dt=function(t){return G(t)?t-48:(223&t)-55},Lt=function(t,e){let n=1;if(nt(e<=1114111),e<128)t[7]=e;else{let r=63;do{t[8-n++]=128|63&e,e>>=6,r>>=1}while(e>r);t[8-n]=~r<<1|e}return n},gt=[46,120,88,110,78],At={46:".",120:"x",88:"x",110:"n",78:"n"},xt=Math.floor(tt/10),Tt=tt%10,bt=function(t,e){let n;if(e.ttisinteger())n=V(W(e.value));else{let t=$(e.value);!Z&&/^[-0123456789]+$/.test(t)&&(t+=".0"),n=V(t)}e.setsvalue(z(t,n))},Ot=function(t,e){H.luaD_inctop(t),st(t,t.top-1,J(t,e))},kt=function(t,e,n){let r,a=0,u=0,l=0;for(;-1!=(r=P(e,37,u));){switch(Ot(t,e.subarray(u,r)),e[r+1]){case 115:{let e=n[l++];if(null===e)e=V("(null)",!0);else{e=M(e);let t=P(e,0);-1!==t&&(e=e.subarray(0,t))}Ot(t,e);break}case 99:{let e=n[l++];B(e)?Ot(t,C(e)):vt(t,V("<\\%d>",!0),e);break}case 100:case 73:H.luaD_inctop(t),t.stack[t.top-1].setivalue(n[l++]),bt(t,t.stack[t.top-1]);break;case 102:H.luaD_inctop(t),t.stack[t.top-1].setfltvalue(n[l++]),bt(t,t.stack[t.top-1]);break;case 112:{let e=n[l++];if(e instanceof X.lua_State||e instanceof Y.Table||e instanceof ft||e instanceof it||e instanceof ct)Ot(t,V("0x"+e.id.toString(16)));else switch(typeof e){case"undefined":Ot(t,V("undefined"));break;case"number":Ot(t,V("Number("+e+")"));break;case"string":Ot(t,V("String("+JSON.stringify(e)+")"));break;case"boolean":Ot(t,V(e?"Boolean(true)":"Boolean(false)"));break;case"object":if(null===e){Ot(t,V("null"));break}case"function":{let n=t.l_G.ids.get(e);n||(n=t.l_G.id_counter++,t.l_G.ids.set(e,n)),Ot(t,V("0x"+n.toString(16)));break}default:Ot(t,V("<id NYI>"))}break}case 85:{let e=new Uint8Array(8),r=Lt(e,n[l++]);Ot(t,e.subarray(8-r));break}case 37:Ot(t,V("%",!0));break;default:F.luaG_runerror(t,V("invalid option '%%%c' to 'lua_pushfstring'"),e[r+1])}a+=2,u=r+2}return H.luaD_checkstack(t,1),Ot(t,e.subarray(u)),a>0&&Q.luaV_concat(t,a+1),t.stack[t.top-1].svalue()},vt=function(t,e,...n){return kt(t,e,n)},Et=function(t,e,n,o){switch(e){case r:return n+o|0;case d:return n-o|0;case f:return Q.luaV_imul(n,o);case c:return Q.luaV_mod(t,n,o);case i:return Q.luaV_div(t,n,o);case a:return n&o;case l:return n|o;case s:return n^o;case p:return Q.luaV_shiftl(n,o);case h:return Q.luaV_shiftl(n,-o);case L:return 0-n|0;case u:return-1^n;default:nt(0)}},mt=function(t,e,n,a){switch(e){case r:return n+a;case d:return n-a;case f:return n*a;case o:return n/a;case _:return Math.pow(n,a);case i:return Math.floor(n/a);case L:return-n;case c:return et(t,n,a);default:nt(0)}};t.exports.CClosure=ct,t.exports.LClosure=it,t.exports.LUA_TDEADKEY=ut,t.exports.LUA_TPROTO=at,t.exports.LocVar=class{constructor(){this.varname=null,this.startpc=NaN,this.endpc=NaN}},t.exports.TValue=lt,t.exports.Udata=ft,t.exports.UTF8BUFFSZ=8,t.exports.luaO_arith=function(t,e,n,i,c){let f="number"==typeof c?t.stack[c]:c;switch(e){case a:case l:case s:case p:case h:case u:{let r,a;if(!1!==(r=Q.tointeger(n))&&!1!==(a=Q.tointeger(i)))return void f.setivalue(Et(t,e,r,a));break}case o:case _:{let r,a;if(!1!==(r=Q.tonumber(n))&&!1!==(a=Q.tonumber(i)))return void f.setfltvalue(mt(t,e,r,a));break}default:{let r,a;if(n.ttisinteger()&&i.ttisinteger())return void f.setivalue(Et(t,e,n.value,i.value));if(!1!==(r=Q.tonumber(n))&&!1!==(a=Q.tonumber(i)))return void f.setfltvalue(mt(t,e,r,a));break}}nt(null!==t),rt.luaT_trybinTM(t,n,i,c,e-r+rt.TMS.TM_ADD)},t.exports.luaO_chunkid=function(t,e){let n,r=t.length;if(61===t[0])r<e?(n=new Uint8Array(r-1)).set(t.subarray(1)):(n=new Uint8Array(e)).set(t.subarray(1,e+1));else if(64===t[0])r<=e?(n=new Uint8Array(r-1)).set(t.subarray(1)):((n=new Uint8Array(e)).set(_t),e-=_t.length,n.set(t.subarray(r-e),_t.length));else{n=new Uint8Array(e);let a=P(t,10);n.set(pt);let u=pt.length;r<(e-=pt.length+_t.length+ht.length)&&-1===a?(n.set(t,u),u+=t.length):(-1!==a&&(r=a),r>e&&(r=e),n.set(t.subarray(0,r),u),u+=r,n.set(_t,u),u+=_t.length),n.set(ht,u),u+=ht.length,n=n.subarray(0,u)}return n},t.exports.luaO_hexavalue=dt,t.exports.luaO_int2fb=function(t){let e=0;if(t<8)return t;for(;t>=128;)t=t+15>>4,e+=4;for(;t>=16;)t=t+1>>1,e++;return e+1<<3|t-8},t.exports.luaO_pushfstring=vt,t.exports.luaO_pushvfstring=kt,t.exports.luaO_str2num=function(t,e){let n=function(t){let e,n=0,r=0,a=!0;for(;K(t[n]);)n++;if(((e=45===t[n])||43===t[n])&&n++,48!==t[n]||120!==t[n+1]&&88!==t[n+1])for(;n<t.length&&G(t[n]);n++){let u=t[n]-48;if(r>=xt&&(r>xt||u>Tt+e))return null;r=10*r+u|0,a=!1}else for(n+=2;n<t.length&&j(t[n]);n++)r=16*r+dt(t[n])|0,a=!1;for(;n<t.length&&K(t[n]);)n++;return a||n!==t.length&&0!==t[n]?null:{n:0|(e?-r:r),i:n}}(t);return null!==n?(e.setivalue(n.n),n.i+1):null!==(n=function(t){let e=t.length,n=0;for(let a=0;a<e;a++){let e=t[a];if(-1!==gt.indexOf(e)){n=e;break}}let r=At[n];return"n"===r?null:function(t,e){let n="x"===e?function(t){let e,n=0,r=0,a=0,u=0,l=0,s=!1;for(;K(t[n]);)n++;if(((e=45===t[n])||43===t[n])&&n++,48!==t[n]||120!==t[n+1]&&88!==t[n+1])return null;for(n+=2;;n++)if(46===t[n]){if(s)break;s=!0}else{if(!j(t[n]))break;0===a&&48===t[n]?u++:++a<=30?r=16*r+dt(t[n]):l++,s&&l--}if(u+a===0)return null;if(l*=4,112===t[n]||80===t[n]){let e,r=0;if(((e=45===t[++n])||43===t[n])&&n++,!G(t[n]))return null;for(;G(t[n]);)r=10*r+t[n++]-48;e&&(r=-r),l+=r}return e&&(r=-r),{n:q(r,l),i:n}}(t):function(t){try{t=D(t)}catch(t){return null}let e=/^[\t\v\f \n\r]*[+-]?(?:[0-9]+\.?[0-9]*|\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(t);if(!e)return null;let n=parseFloat(e[0]);return isNaN(n)?null:{n:n,i:e[0].length}}(t);if(null===n)return null;for(;K(t[n.i]);)n.i++;return n.i===t.length||0===t[n.i]?n:null}(t,r)}(t))?(e.setfltvalue(n.n),n.i+1):0},t.exports.luaO_tostring=bt,t.exports.luaO_utf8esc=Lt,t.exports.numarith=mt,t.exports.pushobj2s=function(t,e){t.stack[t.top++]=new lt(e.type,e.value)},t.exports.pushsvalue2s=function(t,e){t.stack[t.top++]=new lt(v,e)},t.exports.setobjs2s=function(t,e,n){t.stack[e].setfrom(t.stack[n])},t.exports.setobj2s=function(t,e,n){t.stack[e].setfrom(n)},t.exports.setsvalue2s=st},function(t,e,n){"use strict";const{LUAL_BUFFERSIZE:r}=n(3),{LUA_ERRERR:a,LUA_MULTRET:u,LUA_REGISTRYINDEX:l,LUA_SIGNATURE:s,LUA_TBOOLEAN:o,LUA_TLIGHTUSERDATA:i,LUA_TNIL:c,LUA_TNONE:f,LUA_TNUMBER:_,LUA_TSTRING:p,LUA_TTABLE:h,LUA_VERSION_NUM:d,lua_Debug:L,lua_absindex:g,lua_atpanic:A,lua_call:x,lua_checkstack:T,lua_concat:b,lua_copy:O,lua_createtable:k,lua_error:v,lua_getfield:E,lua_getinfo:m,lua_getmetatable:U,lua_getstack:N,lua_gettop:R,lua_insert:y,lua_isinteger:S,lua_isnil:w,lua_isnumber:I,lua_isstring:M,lua_istable:P,lua_len:C,lua_load:D,lua_newstate:V,lua_newtable:G,lua_next:B,lua_pcall:K,lua_pop:j,lua_pushboolean:F,lua_pushcclosure:H,lua_pushcfunction:X,lua_pushfstring:z,lua_pushinteger:J,lua_pushliteral:Y,lua_pushlstring:Z,lua_pushnil:q,lua_pushstring:W,lua_pushvalue:$,lua_pushvfstring:Q,lua_rawequal:tt,lua_rawget:et,lua_rawgeti:nt,lua_rawlen:rt,lua_rawseti:at,lua_remove:ut,lua_setfield:lt,lua_setglobal:st,lua_setmetatable:ot,lua_settop:it,lua_toboolean:ct,lua_tointeger:ft,lua_tointegerx:_t,lua_tojsstring:pt,lua_tolstring:ht,lua_tonumber:dt,lua_tonumberx:Lt,lua_topointer:gt,lua_tostring:At,lua_touserdata:xt,lua_type:Tt,lua_typename:bt,lua_version:Ot}=n(2),{from_userstring:kt,luastring_eq:vt,to_luastring:Et,to_uristring:mt}=n(5),Ut=a+1,Nt=Et("_LOADED"),Rt=Et("_PRELOAD"),yt=Et("FILE*"),St=Et("__name"),wt=Et("__tostring"),It=new Uint8Array(0);class Mt{constructor(){this.L=null,this.b=It,this.n=0}}const Pt=function(t,e,n){if(0===n||!P(t,-1))return 0;for(q(t);B(t,-2);){if(Tt(t,-2)===p){if(tt(t,e,-1))return j(t,1),1;if(Pt(t,e,n-1))return ut(t,-2),Y(t,"."),y(t,-2),b(t,3),1}j(t,1)}return 0},Ct=function(t,e){let n=R(t);if(m(t,Et("f"),e),E(t,l,Nt),Pt(t,n+1,2)){let e=At(t,-1);return 95===e[0]&&71===e[1]&&46===e[2]&&(W(t,e.subarray(3)),ut(t,-2)),O(t,-1,n+1),j(t,2),1}return it(t,n),0},Dt=function(t,e){Ct(t,e)?(z(t,Et("function '%s'"),At(t,-1)),ut(t,-2)):0!==e.namewhat.length?z(t,Et("%s '%s'"),e.namewhat,e.name):e.what&&109===e.what[0]?Y(t,"main chunk"):e.what&&76===e.what[0]?z(t,Et("function <%s:%d>"),e.short_src,e.linedefined):Y(t,"?")},Vt=function(t){let e="PANIC: unprotected error in call to Lua API ("+pt(t,-1)+")";throw new Error(e)},Gt=function(t,e,n){let r=new L;return N(t,0,r)?(m(t,Et("n"),r),vt(r.namewhat,Et("method"))&&0==--e?jt(t,Et("calling '%s' on bad self (%s)"),r.name,n):(null===r.name&&(r.name=Ct(t,r)?At(t,-1):Et("?")),jt(t,Et("bad argument #%d to '%s' (%s)"),e,r.name,n))):jt(t,Et("bad argument #%d (%s)"),e,n)},Bt=function(t,e,n){let r;r=fe(t,e,St)===p?At(t,-1):Tt(t,e)===i?Et("light userdata",!0):Jt(t,e);let a=z(t,Et("%s expected, got %s"),n,r);return Gt(t,e,a)},Kt=function(t,e){let n=new L;N(t,e,n)&&(m(t,Et("Sl",!0),n),n.currentline>0)?z(t,Et("%s:%d: "),n.short_src,n.currentline):W(t,Et(""))},jt=function(t,e,...n){return Kt(t,1),Q(t,e,n),b(t,2),v(t)},Ft=function(t,e,n,r){if(e)return F(t,1),1;{let e,a;return q(t),r?(e=r.message,a=-r.errno):(e="Success",a=0),n?z(t,Et("%s: %s"),n,Et(e)):W(t,Et(e)),J(t,a),3}},Ht=function(t,e){return E(t,l,e)},Xt=function(t,e,n){let r=xt(t,e);return null!==r&&U(t,e)?(Ht(t,n),tt(t,-1,-2)||(r=null),j(t,2),r):null},zt=function(t,e,n){Bt(t,e,bt(t,n))},Jt=function(t,e){return bt(t,Tt(t,e))},Yt=function(t,e){let n=ht(t,e);return null!=n||zt(t,e,p),n},Zt=Yt,qt=function(t,e,n){return Tt(t,e)<=0?null===n?null:kt(n):Yt(t,e)},Wt=qt,$t=function(t,e){let n=Lt(t,e);return!1===n&&zt(t,e,_),n},Qt=function(t,e){let n=_t(t,e);return!1===n&&function(t,e){I(t,e)?Gt(t,e,Et("number has no integer representation",!0)):zt(t,e,_)}(t,e),n},te=function(t,e){let n=t.n+e;if(t.b.length<n){let e=Math.max(2*t.b.length,n),r=new Uint8Array(e);r.set(t.b),t.b=r}return t.b.subarray(t.n,n)},ee=function(t,e){e.L=t,e.b=It},ne=function(t,e,n){n>0&&(e=kt(e),te(t,n).set(e.subarray(0,n)),ue(t,n))},re=function(t,e){e=kt(e),ne(t,e,e.length)},ae=function(t){Z(t.L,t.b,t.n),t.n=0,t.b=It},ue=function(t,e){t.n+=e},le=function(t,e,n,r){return Tt(t,n)<=0?r:e(t,n)},se=function(t,e){let n=e.string;return e.string=null,n},oe=function(t,e,n,r,a){return D(t,se,{string:e},r,a)},ie=function(t,e,n,r){return oe(t,e,0,r,null)},ce=function(t,e){return ie(t,e,e.length,e)},fe=function(t,e,n){if(U(t,e)){W(t,n);let e=et(t,-2);return e===c?j(t,2):ut(t,-2),e}return c},_e=function(t,e,n){return e=g(t,e),fe(t,e,n)!==c&&($(t,e),x(t,1,1),!0)},pe=Et("%I"),he=Et("%f"),de=function(t,e,n){var r=n>>>0,a=e.length,u=t.length+1-a;t:for(;r<u;r++){for(let n=0;n<a;n++)if(t[r+n]!==e[n])continue t;return r}return-1},Le=function(t,e,n){return E(t,e,n)===h||(j(t,1),e=g(t,e),G(t),$(t,-1),lt(t,e,n),!1)},ge=function(t,e,n){Ae(t,n,Et("too many upvalues",!0));for(let r in e){for(let e=0;e<n;e++)$(t,-n);H(t,e[r],n),lt(t,-(n+2),Et(r))}j(t,n)},Ae=function(t,e,n){T(t,e)||(n?jt(t,Et("stack overflow (%s)"),n):jt(t,Et("stack overflow",!0)))},xe=function(t,e,n,r){let a=r.message,u=At(t,n).subarray(1);return z(t,Et("cannot %s %s: %s"),Et(e),u,Et(a)),ut(t,n),Ut};let Te;const be=[239,187,191];let Oe;{class t{constructor(){this.n=NaN,this.f=null,this.buff=new Uint8Array(1024),this.pos=0,this.err=void 0}}const e=function(t,e){let n=e;if(null!==n.f&&n.n>0){let t=n.n;return n.n=0,n.f=n.f.subarray(n.pos),n.buff.subarray(0,t)}let r=n.f;return n.f=null,r};Te=function(t){return t.pos<t.f.length?t.f[t.pos++]:null},Oe=function(n,r,a){let u=new t,l=R(n)+1;if(null===r)throw new Error("Can't read stdin in the browser");{z(n,Et("@%s"),r);let t=mt(r),e=new XMLHttpRequest;if(e.open("GET",t,!1),"undefined"==typeof window&&(e.responseType="arraybuffer"),e.send(),!(e.status>=200&&e.status<=299))return u.err=e.status,xe(n,"open",l,{message:`${e.status}: ${e.statusText}`});"string"==typeof e.response?u.f=Et(e.response):u.f=new Uint8Array(e.response)}let o=function(t){let e=function(t){let e;t.n=0;let n=0;do{if(null===(e=Te(t))||e!==be[n])return e;n++,t.buff[t.n++]=e}while(n<be.length);return t.n=0,Te(t)}(t);if(35===e){do{e=Te(t)}while(e&&10!==e);return{skipped:!0,c:Te(t)}}return{skipped:!1,c:e}}(u);o.c===s[0]&&r||o.skipped&&(u.buff[u.n++]=10),null!==o.c&&(u.buff[u.n++]=o.c);let i=D(n,e,u,At(n,-1),a),c=u.err;return c?(it(n,l),xe(n,"read",l,c)):(ut(n,l),i)}}const ke=function(t,e){return Oe(t,e,null)},ve=function(t,e,n){let r=Ot(t);72!=n&&jt(t,Et("core and library have incompatible numeric types")),r!=Ot(null)?jt(t,Et("multiple Lua VMs detected")):r!==e&&jt(t,Et("version mismatch: app. needs %f, Lua core provides %f"),e,r)};t.exports.LUA_ERRFILE=Ut,t.exports.LUA_FILEHANDLE=yt,t.exports.LUA_LOADED_TABLE=Nt,t.exports.LUA_NOREF=-2,t.exports.LUA_PRELOAD_TABLE=Rt,t.exports.LUA_REFNIL=-1,t.exports.luaL_Buffer=Mt,t.exports.luaL_addchar=function(t,e){te(t,1),t.b[t.n++]=e},t.exports.luaL_addlstring=ne,t.exports.luaL_addsize=ue,t.exports.luaL_addstring=re,t.exports.luaL_addvalue=function(t){let e=t.L,n=At(e,-1);ne(t,n,n.length),j(e,1)},t.exports.luaL_argcheck=function(t,e,n,r){e||Gt(t,n,r)},t.exports.luaL_argerror=Gt,t.exports.luaL_buffinit=ee,t.exports.luaL_buffinitsize=function(t,e,n){return ee(t,e),te(e,n)},t.exports.luaL_callmeta=_e,t.exports.luaL_checkany=function(t,e){Tt(t,e)===f&&Gt(t,e,Et("value expected",!0))},t.exports.luaL_checkinteger=Qt,t.exports.luaL_checklstring=Yt,t.exports.luaL_checknumber=$t,t.exports.luaL_checkoption=function(t,e,n,r){let a=null!==n?Wt(t,e,n):Zt(t,e);for(let u=0;r[u];u++)if(vt(r[u],a))return u;return Gt(t,e,z(t,Et("invalid option '%s'"),a))},t.exports.luaL_checkstack=Ae,t.exports.luaL_checkstring=Zt,t.exports.luaL_checktype=function(t,e,n){Tt(t,e)!==n&&zt(t,e,n)},t.exports.luaL_checkudata=function(t,e,n){let r=Xt(t,e,n);return null===r&&Bt(t,e,n),r},t.exports.luaL_checkversion=function(t){ve(t,d,72)},t.exports.luaL_checkversion_=ve,t.exports.luaL_dofile=function(t,e){return ke(t,e)||K(t,0,u,0)},t.exports.luaL_dostring=function(t,e){return ce(t,e)||K(t,0,u,0)},t.exports.luaL_error=jt,t.exports.luaL_execresult=function(t,e){let n,r;if(null===e)return F(t,1),Y(t,"exit"),J(t,0),3;if(e.status)n="exit",r=e.status;else{if(!e.signal)return Ft(t,0,null,e);n="signal",r=e.signal}return q(t),Y(t,n),J(t,r),3},t.exports.luaL_fileresult=Ft,t.exports.luaL_getmetafield=fe,t.exports.luaL_getmetatable=Ht,t.exports.luaL_getsubtable=Le,t.exports.luaL_gsub=function(t,e,n,r){let a,u=new Mt;for(ee(t,u);(a=de(e,n))>=0;)ne(u,e,a),re(u,r),e=e.subarray(a+n.length);return re(u,e),ae(u),At(t,-1)},t.exports.luaL_len=function(t,e){C(t,e);let n=_t(t,-1);return!1===n&&jt(t,Et("object length is not an integer",!0)),j(t,1),n},t.exports.luaL_loadbuffer=ie,t.exports.luaL_loadbufferx=oe,t.exports.luaL_loadfile=ke,t.exports.luaL_loadfilex=Oe,t.exports.luaL_loadstring=ce,t.exports.luaL_newlib=function(t,e){k(t),ge(t,e,0)},t.exports.luaL_newlibtable=function(t){k(t)},t.exports.luaL_newmetatable=function(t,e){return Ht(t,e)!==c?0:(j(t,1),k(t,0,2),W(t,e),lt(t,-2,St),$(t,-1),lt(t,l,e),1)},t.exports.luaL_newstate=function(){let t=V();return t&&A(t,Vt),t},t.exports.luaL_opt=le,t.exports.luaL_optinteger=function(t,e,n){return le(t,Qt,e,n)},t.exports.luaL_optlstring=qt,t.exports.luaL_optnumber=function(t,e,n){return le(t,$t,e,n)},t.exports.luaL_optstring=Wt,t.exports.luaL_prepbuffer=function(t){return te(t,r)},t.exports.luaL_prepbuffsize=te,t.exports.luaL_pushresult=ae,t.exports.luaL_pushresultsize=function(t,e){ue(t,e),ae(t)},t.exports.luaL_ref=function(t,e){let n;return w(t,-1)?(j(t,1),-1):(e=g(t,e),nt(t,e,0),n=ft(t,-1),j(t,1),0!==n?(nt(t,e,n),at(t,e,0)):n=rt(t,e)+1,at(t,e,n),n)},t.exports.luaL_requiref=function(t,e,n,r){Le(t,l,Nt),E(t,-1,e),ct(t,-1)||(j(t,1),X(t,n),W(t,e),x(t,1,1),$(t,-1),lt(t,-3,e)),ut(t,-2),r&&($(t,-1),st(t,e))},t.exports.luaL_setfuncs=ge,t.exports.luaL_setmetatable=function(t,e){Ht(t,e),ot(t,-2)},t.exports.luaL_testudata=Xt,t.exports.luaL_tolstring=function(t,e){if(_e(t,e,wt))M(t,-1)||jt(t,Et("'__tostring' must return a string"));else switch(Tt(t,e)){case _:S(t,e)?z(t,pe,ft(t,e)):z(t,he,dt(t,e));break;case p:$(t,e);break;case o:Y(t,ct(t,e)?"true":"false");break;case c:Y(t,"nil");break;default:{let n=fe(t,e,St),r=n===p?At(t,-1):Jt(t,e);z(t,Et("%s: %p"),r,gt(t,e)),n!==c&&ut(t,-2);break}}return ht(t,-1)},t.exports.luaL_traceback=function(t,e,n,r){let a=new L,u=R(t),l=function(t){let e=new L,n=1,r=1;for(;N(t,r,e);)n=r,r*=2;for(;n<r;){let a=Math.floor((n+r)/2);N(t,a,e)?n=a+1:r=a}return r-1}(e),s=l-r>21?10:-1;for(n&&z(t,Et("%s\n"),n),Ae(t,10,null),Y(t,"stack traceback:");N(e,r++,a);)0==s--?(Y(t,"\n\t..."),r=l-11+1):(m(e,Et("Slnt",!0),a),z(t,Et("\n\t%s:"),a.short_src),a.currentline>0&&Y(t,`${a.currentline}:`),Y(t," in "),Dt(t,a),a.istailcall&&Y(t,"\n\t(...tail calls..)"),b(t,R(t)-u));b(t,R(t)-u)},t.exports.luaL_typename=Jt,t.exports.luaL_unref=function(t,e,n){n>=0&&(e=g(t,e),nt(t,e,0),at(t,e,n),J(t,n),at(t,e,0))},t.exports.luaL_where=Kt,t.exports.lua_writestringerror=function(){for(let t=0;t<arguments.length;t++){let e=arguments[t];do{let t=/([^\n]*)\n?([\d\D]*)/.exec(e);console.error(t[1]),e=t[2]}while(""!==e)}}},function(t,e,n){"use strict";const{LUA_HOOKCALL:r,LUA_HOOKRET:a,LUA_HOOKTAILCALL:u,LUA_MASKCALL:l,LUA_MASKLINE:s,LUA_MASKRET:o,LUA_MINSTACK:i,LUA_MULTRET:c,LUA_SIGNATURE:f,constant_types:{LUA_TCCL:_,LUA_TLCF:p,LUA_TLCL:h,LUA_TNIL:d},thread_status:{LUA_ERRMEM:L,LUA_ERRERR:g,LUA_ERRRUN:A,LUA_ERRSYNTAX:x,LUA_OK:T,LUA_YIELD:b},lua_Debug:O,luastring_indexOf:k,to_luastring:v}=n(1),E=n(18),m=n(11),U=n(13),{api_check:N,lua_assert:R,LUAI_MAXCCALLS:y}=n(4),S=n(6),w=n(16),I=n(23),M=n(12),{luaS_newliteral:P}=n(10),C=n(14),{LUAI_MAXSTACK:D}=n(3),V=n(36),G=n(15),{MBuffer:B}=n(19),K=function(t,e){if(t.top<e)for(;t.top<e;)t.stack[t.top++]=new S.TValue(d,null);else for(;t.top>e;)delete t.stack[--t.top]},j=function(t,e,n){let r=t.top;for(;t.top<n+1;)t.stack[t.top++]=new S.TValue(d,null);switch(e){case L:S.setsvalue2s(t,n,P(t,"not enough memory"));break;case g:S.setsvalue2s(t,n,P(t,"error in error handling"));break;default:S.setobjs2s(t,n,r-1)}for(;t.top>n+1;)delete t.stack[--t.top]},F=D+200,H=function(t,e){R(e<=D||e==F),R(t.stack_last==t.stack.length-M.EXTRA_STACK),t.stack.length=e,t.stack_last=e-M.EXTRA_STACK},X=function(t,e){let n=t.stack.length;if(n>D)nt(t,g);else{let r=t.top+e+M.EXTRA_STACK,a=2*n;a>D&&(a=D),a<r&&(a=r),a>D?(H(t,F),m.luaG_runerror(t,v("stack overflow",!0))):H(t,a)}},z=function(t,e){t.stack_last-t.top<=e&&X(t,e)},J=function(t){let e=function(t){let e=t.top;for(let n=t.ci;null!==n;n=n.previous)e<n.top&&(e=n.top);return R(e<=t.stack_last),e+1}(t),n=e+Math.floor(e/8)+2*M.EXTRA_STACK;n>D&&(n=D),t.stack.length>D&&M.luaE_freeCI(t),e<=D-M.EXTRA_STACK&&n<t.stack.length&&H(t,n)},Y=function(t,e,n){let a=t.stack[e];switch(a.type){case _:case p:{let u=a.type===_?a.value.f:a.value;z(t,i);let s=M.luaE_extendCI(t);s.funcOff=e,s.nresults=n,s.func=a,s.top=t.top+i,R(s.top<=t.stack_last),s.callstatus=0,t.hookmask&l&&W(t,r,-1);let o=u(t);if("number"!=typeof o||o<0||(0|o)!==o)throw Error("invalid return value from JS function (expected integer)");return E.api_checknelems(t,o),Z(t,s,t.top-o,o),!0}case h:{let r,u=a.value.p,s=t.top-e-1,o=u.maxstacksize;if(z(t,o),u.is_vararg)r=Q(t,u,s);else{for(;s<u.numparams;s++)t.stack[t.top++]=new S.TValue(d,null);r=e+1}let i=M.luaE_extendCI(t);return i.funcOff=e,i.nresults=n,i.func=a,i.l_base=r,i.top=r+o,K(t,i.top),i.l_code=u.code,i.l_savedpc=0,i.callstatus=M.CIST_LUA,t.hookmask&l&&$(t,i),!1}default:return z(t,1),tt(t,e,a),Y(t,e,n)}},Z=function(t,e,n,r){let u=e.nresults;t.hookmask&(o|s)&&(t.hookmask&o&&W(t,a,-1),t.oldpc=e.previous.l_savedpc);let l=e.funcOff;return t.ci=e.previous,t.ci.next=null,q(t,n,l,r,u)},q=function(t,e,n,r,a){switch(a){case 0:break;case 1:0===r?t.stack[n].setnilvalue():S.setobjs2s(t,n,e);break;case c:for(let a=0;a<r;a++)S.setobjs2s(t,n+a,e+a);for(let e=t.top;e>=n+r;e--)delete t.stack[e];return t.top=n+r,!1;default:{let u;if(a<=r)for(u=0;u<a;u++)S.setobjs2s(t,n+u,e+u);else{for(u=0;u<r;u++)S.setobjs2s(t,n+u,e+u);for(;u<a;u++)n+u>=t.top?t.stack[n+u]=new S.TValue(d,null):t.stack[n+u].setnilvalue()}break}}let u=n+a;for(let l=t.top;l>=u;l--)delete t.stack[l];return t.top=u,!0},W=function(t,e,n){let r=t.hook;if(r&&t.allowhook){let a=t.ci,u=t.top,l=a.top,s=new O;s.event=e,s.currentline=n,s.i_ci=a,z(t,i),a.top=t.top+i,R(a.top<=t.stack_last),t.allowhook=0,a.callstatus|=M.CIST_HOOKED,r(t,s),R(!t.allowhook),t.allowhook=1,a.top=l,K(t,u),a.callstatus&=~M.CIST_HOOKED}},$=function(t,e){let n=r;e.l_savedpc++,e.previous.callstatus&M.CIST_LUA&&e.previous.l_code[e.previous.l_savedpc-1].opcode==w.OpCodesI.OP_TAILCALL&&(e.callstatus|=M.CIST_TAIL,n=u),W(t,n,-1),e.l_savedpc--},Q=function(t,e,n){let r,a=e.numparams,u=t.top-n,l=t.top;for(r=0;r<a&&r<n;r++)S.pushobj2s(t,t.stack[u+r]),t.stack[u+r].setnilvalue();for(;r<a;r++)t.stack[t.top++]=new S.TValue(d,null);return l},tt=function(t,e,n){let r=C.luaT_gettmbyobj(t,n,C.TMS.TM_CALL);r.ttisfunction(r)||m.luaG_typeerror(t,n,v("call",!0)),S.pushobj2s(t,t.stack[t.top-1]);for(let a=t.top-2;a>e;a--)S.setobjs2s(t,a,a-1);S.setobj2s(t,e,r)},et=function(t,e,n){++t.nCcalls>=y&&function(t){t.nCcalls===y?m.luaG_runerror(t,v("JS stack overflow",!0)):t.nCcalls>=y+(y>>3)&&nt(t,g)}(t),Y(t,e,n)||G.luaV_execute(t),t.nCcalls--},nt=function(t,e){if(t.errorJmp)throw t.errorJmp.status=e,t.errorJmp;{let n=t.l_G;if(t.status=e,!n.mainthread.errorJmp){let r=n.panic;throw r&&(j(t,e,t.top),t.ci.top<t.top&&(t.ci.top=t.top),r(t)),new Error(`Aborted ${e}`)}n.mainthread.stack[n.mainthread.top++]=t.stack[t.top-1],nt(n.mainthread,e)}},rt=function(t,e,n){let r=t.nCcalls,a={status:T,previous:t.errorJmp};t.errorJmp=a;try{e(t,n)}catch(e){if(a.status===T){let n=t.l_G.atnativeerror;if(n)try{if(a.status=T,E.lua_pushcfunction(t,n),E.lua_pushlightuserdata(t,e),ft(t,t.top-2,1),0!==t.errfunc){let e=t.errfunc;S.pushobj2s(t,t.stack[t.top-1]),S.setobjs2s(t,t.top-2,e),ft(t,t.top-2,1)}a.status=A}catch(t){a.status===T&&(a.status=-1)}else a.status=-1}}return t.errorJmp=a.previous,t.nCcalls=r,a.status},at=function(t,e){let n=t.ci;R(null!==n.c_k&&0===t.nny),R(n.callstatus&M.CIST_YPCALL||e===b),n.callstatus&M.CIST_YPCALL&&(n.callstatus&=~M.CIST_YPCALL,t.errfunc=n.c_old_errfunc),n.nresults===c&&t.ci.top<t.top&&(t.ci.top=t.top);let r=(0,n.c_k)(t,e,n.c_ctx);E.api_checknelems(t,r),Z(t,n,t.top-r,r)},ut=function(t,e){for(null!==e&&at(t,e);t.ci!==t.base_ci;)t.ci.callstatus&M.CIST_LUA?(G.luaV_finishOp(t),G.luaV_execute(t)):at(t,b)},lt=function(t,e){let n=function(t){for(let e=t.ci;null!==e;e=e.previous)if(e.callstatus&M.CIST_YPCALL)return e;return null}(t);if(null===n)return 0;let r=n.extra;return U.luaF_close(t,r),j(t,e,r),t.ci=n,t.allowhook=n.callstatus&M.CIST_OAH,t.nny=0,J(t),t.errfunc=n.c_old_errfunc,1},st=function(t,e,n){let r=P(t,e);if(0===n)S.pushsvalue2s(t,r),N(t,t.top<=t.ci.top,"stack overflow");else{for(let e=1;e<n;e++)delete t.stack[--t.top];S.setsvalue2s(t,t.top-1,r)}return A},ot=function(t,e){let n=t.top-e,r=t.ci;t.status===T?Y(t,n-1,c)||G.luaV_execute(t):(R(t.status===b),t.status=T,r.funcOff=r.extra,r.func=t.stack[r.funcOff],r.callstatus&M.CIST_LUA?G.luaV_execute(t):(null!==r.c_k&&(e=r.c_k(t,b,r.c_ctx),E.api_checknelems(t,e),n=t.top-e),Z(t,r,n,e)),ut(t,null))},it=function(t,e,n,r){let a=t.ci;return E.api_checknelems(t,e),t.nny>0&&(t!==t.l_G.mainthread?m.luaG_runerror(t,v("attempt to yield across a JS-call boundary",!0)):m.luaG_runerror(t,v("attempt to yield from outside a coroutine",!0))),t.status=b,a.extra=a.funcOff,a.callstatus&M.CIST_LUA?N(t,null===r,"hooks cannot continue after yielding"):(a.c_k=r,null!==r&&(a.c_ctx=n),a.funcOff=t.top-e-1,a.func=t.stack[a.funcOff],nt(t,b)),R(a.callstatus&M.CIST_HOOKED),0},ct=function(t,e,n,r,a){let u=t.ci,l=t.allowhook,s=t.nny,o=t.errfunc;t.errfunc=a;let i=rt(t,e,n);return i!==T&&(U.luaF_close(t,r),j(t,i,r),t.ci=u,t.allowhook=l,t.nny=s,J(t)),t.errfunc=o,i},ft=function(t,e,n){t.nny++,et(t,e,n),t.nny--},_t=function(t,e,n){e&&-1===k(e,n[0])&&(S.luaO_pushfstring(t,v("attempt to load a %s chunk (mode is '%s')"),n,e),nt(t,x))},pt=function(t,e){let n,r=e.z.zgetc();r===f[0]?(_t(t,e.mode,v("binary",!0)),n=V.luaU_undump(t,e.z,e.name)):(_t(t,e.mode,v("text",!0)),n=I.luaY_parser(t,e.z,e.buff,e.dyd,e.name,r)),R(n.nupvalues===n.p.upvalues.length),U.luaF_initupvals(t,n)};t.exports.adjust_top=K,t.exports.luaD_call=et,t.exports.luaD_callnoyield=ft,t.exports.luaD_checkstack=z,t.exports.luaD_growstack=X,t.exports.luaD_hook=W,t.exports.luaD_inctop=function(t){z(t,1),t.stack[t.top++]=new S.TValue(d,null)},t.exports.luaD_pcall=ct,t.exports.luaD_poscall=Z,t.exports.luaD_precall=Y,t.exports.luaD_protectedparser=function(t,e,n,r){let a=new class{constructor(t,e,n){this.z=t,this.buff=new B,this.dyd=new I.Dyndata,this.mode=n,this.name=e}}(e,n,r);t.nny++;let u=ct(t,pt,a,t.top,t.errfunc);return t.nny--,u},t.exports.luaD_rawrunprotected=rt,t.exports.luaD_reallocstack=H,t.exports.luaD_throw=nt,t.exports.lua_isyieldable=function(t){return 0===t.nny},t.exports.lua_resume=function(t,e,n){let r=t.nny;if(t.status===T){if(t.ci!==t.base_ci)return st(t,"cannot resume non-suspended coroutine",n)}else if(t.status!==b)return st(t,"cannot resume dead coroutine",n);if(t.nCcalls=e?e.nCcalls+1:1,t.nCcalls>=y)return st(t,"JS stack overflow",n);t.nny=0,E.api_checknelems(t,t.status===T?n+1:n);let a=rt(t,ot,n);if(-1===a)a=A;else{for(;a>b&&lt(t,a);)a=rt(t,ut,a);a>b?(t.status=a,j(t,a,t.top),t.ci.top=t.top):R(a===t.status)}return t.nny=r,t.nCcalls--,R(t.nCcalls===(e?e.nCcalls:0)),a},t.exports.lua_yield=function(t,e){it(t,e,0,null)},t.exports.lua_yieldk=it},function(t,e,n){"use strict";const{constant_types:{LUA_TBOOLEAN:r,LUA_TCCL:a,LUA_TLCF:u,LUA_TLCL:l,LUA_TLIGHTUSERDATA:s,LUA_TLNGSTR:o,LUA_TNIL:i,LUA_TNUMFLT:c,LUA_TNUMINT:f,LUA_TSHRSTR:_,LUA_TTABLE:p,LUA_TTHREAD:h,LUA_TUSERDATA:d},to_luastring:L}=n(1),{lua_assert:g}=n(4),A=n(11),x=n(6),{luaS_hashlongstr:T,TString:b}=n(10),O=n(12);let k=new WeakMap;const v=function(t){let e=k.get(t);return e||(e={},k.set(t,e)),e},E=function(t,e){switch(e.type){case i:return A.luaG_runerror(t,L("table index is nil",!0));case c:if(isNaN(e.value))return A.luaG_runerror(t,L("table index is NaN",!0));case f:case r:case p:case l:case u:case a:case d:case h:return e.value;case _:case o:return T(e.tsvalue());case s:{let n=e.value;switch(typeof n){case"string":return"*"+n;case"number":return"#"+n;case"boolean":return n?"?true":"?false";case"function":return v(n);case"object":if(n instanceof O.lua_State&&n.l_G===t.l_G||n instanceof m||n instanceof x.Udata||n instanceof x.LClosure||n instanceof x.CClosure)return v(n);default:return n}}default:throw new Error("unknown key type: "+e.type)}};class m{constructor(t){this.id=t.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1}}const U=function(t,e,n,r){t.dead_strong.clear(),t.dead_weak=void 0;let a=null,u={key:n,value:r,p:a=t.l,n:void 0};t.f||(t.f=u),a&&(a.n=u),t.strong.set(e,u),t.l=u},N=function(t,e){let n=t.strong.get(e);if(n){n.key.setdeadvalue(),n.value=void 0;let r=n.n,a=n.p;n.p=void 0,a&&(a.n=r),r&&(r.p=a),t.f===n&&(t.f=r),t.l===n&&(t.l=a),t.strong.delete(e),function(t){return"object"==typeof t?null!==t:"function"==typeof t}(e)?(t.dead_weak||(t.dead_weak=new WeakMap),t.dead_weak.set(e,n)):t.dead_strong.set(e,n)}},R=function(t,e){let n=t.strong.get(e);return n?n.value:x.luaO_nilobject},y=function(t,e){return g("number"==typeof e&&(0|e)===e),R(t,e)};t.exports.invalidateTMcache=function(t){t.flags=0},t.exports.luaH_get=function(t,e,n){return g(n instanceof x.TValue),n.ttisnil()||n.ttisfloat()&&isNaN(n.value)?x.luaO_nilobject:R(e,E(t,n))},t.exports.luaH_getint=y,t.exports.luaH_getn=function(t){let e=0,n=t.strong.size+1;for(;n-e>1;){let r=Math.floor((e+n)/2);y(t,r).ttisnil()?n=r:e=r}return e},t.exports.luaH_getstr=function(t,e){return g(e instanceof b),R(t,T(e))},t.exports.luaH_setfrom=function(t,e,n,r){g(n instanceof x.TValue);let a=E(t,n);if(r.ttisnil())return void N(e,a);let u=e.strong.get(a);if(u)u.value.setfrom(r);else{let t,u=n.value;t=n.ttisfloat()&&(0|u)===u?new x.TValue(f,u):new x.TValue(n.type,u);let l=new x.TValue(r.type,r.value);U(e,a,t,l)}},t.exports.luaH_setint=function(t,e,n){g("number"==typeof e&&(0|e)===e&&n instanceof x.TValue);let r=e;if(n.ttisnil())return void N(t,r);let a=t.strong.get(r);if(a)a.value.setfrom(n);else{let a=new x.TValue(f,e),u=new x.TValue(n.type,n.value);U(t,r,a,u)}},t.exports.luaH_new=function(t){return new m(t)},t.exports.luaH_next=function(t,e,n){let r,a=t.stack[n];if(a.type===i){if(!(r=e.f))return!1}else{let n=E(t,a);if(r=e.strong.get(n)){if(!(r=r.n))return!1}else{if(!(r=e.dead_weak&&e.dead_weak.get(n)||e.dead_strong.get(n)))return A.luaG_runerror(t,L("invalid key to 'next'"));do{if(!(r=r.n))return!1}while(r.key.ttisdeadkey())}}return x.setobj2s(t,n,r.key),x.setobj2s(t,n+1,r.value),!0},t.exports.Table=m},function(t,e,n){"use strict";const{is_luastring:r,luastring_eq:a,luastring_from:u,to_luastring:l}=n(1),{lua_assert:s}=n(4);class o{constructor(t,e){this.hash=null,this.realstring=e}getstr(){return this.realstring}tsslen(){return this.realstring.length}}const i=function(t){s(r(t));let e=t.length,n="|";for(let r=0;r<e;r++)n+=t[r].toString(16);return n},c=function(t,e){return s(e instanceof Uint8Array),new o(t,e)};t.exports.luaS_eqlngstr=function(t,e){return s(t instanceof o),s(e instanceof o),t==e||a(t.realstring,e.realstring)},t.exports.luaS_hash=i,t.exports.luaS_hashlongstr=function(t){return s(t instanceof o),null===t.hash&&(t.hash=i(t.getstr())),t.hash},t.exports.luaS_bless=c,t.exports.luaS_new=function(t,e){return c(t,u(e))},t.exports.luaS_newliteral=function(t,e){return c(t,l(e))},t.exports.TString=o},function(t,e,n){"use strict";const{LUA_HOOKCOUNT:r,LUA_HOOKLINE:a,LUA_MASKCOUNT:u,LUA_MASKLINE:l,constant_types:{LUA_TBOOLEAN:s,LUA_TNIL:o,LUA_TTABLE:i},thread_status:{LUA_ERRRUN:c,LUA_YIELD:f},from_userstring:_,luastring_eq:p,luastring_indexOf:h,to_luastring:d}=n(1),{api_check:L,lua_assert:g}=n(4),{LUA_IDSIZE:A}=n(3),x=n(18),T=n(8),b=n(13),O=n(20),k=n(6),v=n(16),E=n(12),m=n(9),U=n(14),N=n(15),R=function(t){return g(t.callstatus&E.CIST_LUA),t.l_savedpc-1},y=function(t){return 0!==t.func.value.p.lineinfo.length?t.func.value.p.lineinfo[R(t)]:-1},S=function(t){if(t.status===f){let e=t.ci,n=e.funcOff;e.func=t.stack[e.extra],e.funcOff=e.extra,e.extra=n}},w=function(t,e){g(e<t.upvalues.length);let n=t.upvalues[e].name;return null===n?d("?",!0):n.getstr()},I=function(t,e,n){let r,a=null;if(e.callstatus&E.CIST_LUA){if(n<0)return function(t,e){let n=t.func.value.p.numparams;return e>=t.l_base-t.funcOff-n?null:{pos:t.funcOff+n+e,name:d("(*vararg)",!0)}}(e,-n);r=e.l_base,a=b.luaF_getlocalname(e.func.value.p,n,R(e))}else r=e.funcOff+1;if(null===a){if(!((e===t.ci?t.top:e.next.funcOff)-r>=n&&n>0))return null;a=d("(*temporary)",!0)}return{pos:r+(n-1),name:a}},M=function(t,e){if(null===e||e instanceof k.CClosure)t.source=d("=[JS]",!0),t.linedefined=-1,t.lastlinedefined=-1,t.what=d("J",!0);else{let n=e.p;t.source=n.source?n.source.getstr():d("=?",!0),t.linedefined=n.linedefined,t.lastlinedefined=n.lastlinedefined,t.what=0===t.linedefined?d("main",!0):d("Lua",!0)}t.short_src=k.luaO_chunkid(t.source,A)},P=function(t,e){let n={name:null,funcname:null};return null===e?null:e.callstatus&E.CIST_FIN?(n.name=d("__gc",!0),n.funcname=d("metamethod",!0),n):!(e.callstatus&E.CIST_TAIL)&&e.previous.callstatus&E.CIST_LUA?G(t,e.previous):null},C=function(t,e,n){let r={name:null,funcname:null};if(v.ISK(n)){let e=t.k[v.INDEXK(n)];if(e.ttisstring())return r.name=e.svalue(),r}else{let r=V(t,e,n);if(r&&99===r.funcname[0])return r}return r.name=d("?",!0),r},D=function(t,e){return t<e?-1:t},V=function(t,e,n){let r={name:b.luaF_getlocalname(t,n+1,e),funcname:null};if(r.name)return r.funcname=d("local",!0),r;let a=function(t,e,n){let r=-1,a=0,u=v.OpCodesI;for(let l=0;l<e;l++){let s=t.code[l],o=s.A;switch(s.opcode){case u.OP_LOADNIL:{let t=s.B;o<=n&&n<=o+t&&(r=D(l,a));break}case u.OP_TFORCALL:n>=o+2&&(r=D(l,a));break;case u.OP_CALL:case u.OP_TAILCALL:n>=o&&(r=D(l,a));break;case u.OP_JMP:{let t=l+1+s.sBx;l<t&&t<=e&&t>a&&(a=t);break}default:v.testAMode(s.opcode)&&n===o&&(r=D(l,a))}}return r}(t,e,n),u=v.OpCodesI;if(-1!==a){let e=t.code[a];switch(e.opcode){case u.OP_MOVE:{let n=e.B;if(n<e.A)return V(t,a,n);break}case u.OP_GETTABUP:case u.OP_GETTABLE:{let n=e.C,l=e.B,s=e.opcode===u.OP_GETTABLE?b.luaF_getlocalname(t,l+1,a):w(t,l);return r.name=C(t,a,n).name,r.funcname=s&&p(s,O.LUA_ENV)?d("global",!0):d("field",!0),r}case u.OP_GETUPVAL:return r.name=w(t,e.B),r.funcname=d("upvalue",!0),r;case u.OP_LOADK:case u.OP_LOADKX:{let n=e.opcode===u.OP_LOADK?e.Bx:t.code[a+1].Ax;if(t.k[n].ttisstring())return r.name=t.k[n].svalue(),r.funcname=d("constant",!0),r;break}case u.OP_SELF:{let n=e.C;return r.name=C(t,a,n).name,r.funcname=d("method",!0),r}}}return null},G=function(t,e){let n={name:null,funcname:null},r=0,a=e.func.value.p,u=R(e),l=a.code[u],s=v.OpCodesI;if(e.callstatus&E.CIST_HOOKED)return n.name=d("?",!0),n.funcname=d("hook",!0),n;switch(l.opcode){case s.OP_CALL:case s.OP_TAILCALL:return V(a,u,l.A);case s.OP_TFORCALL:return n.name=d("for iterator",!0),n.funcname=d("for iterator",!0),n;case s.OP_SELF:case s.OP_GETTABUP:case s.OP_GETTABLE:r=U.TMS.TM_INDEX;break;case s.OP_SETTABUP:case s.OP_SETTABLE:r=U.TMS.TM_NEWINDEX;break;case s.OP_ADD:r=U.TMS.TM_ADD;break;case s.OP_SUB:r=U.TMS.TM_SUB;break;case s.OP_MUL:r=U.TMS.TM_MUL;break;case s.OP_MOD:r=U.TMS.TM_MOD;break;case s.OP_POW:r=U.TMS.TM_POW;break;case s.OP_DIV:r=U.TMS.TM_DIV;break;case s.OP_IDIV:r=U.TMS.TM_IDIV;break;case s.OP_BAND:r=U.TMS.TM_BAND;break;case s.OP_BOR:r=U.TMS.TM_BOR;break;case s.OP_BXOR:r=U.TMS.TM_BXOR;break;case s.OP_SHL:r=U.TMS.TM_SHL;break;case s.OP_SHR:r=U.TMS.TM_SHR;break;case s.OP_UNM:r=U.TMS.TM_UNM;break;case s.OP_BNOT:r=U.TMS.TM_BNOT;break;case s.OP_LEN:r=U.TMS.TM_LEN;break;case s.OP_CONCAT:r=U.TMS.TM_CONCAT;break;case s.OP_EQ:r=U.TMS.TM_EQ;break;case s.OP_LT:r=U.TMS.TM_LT;break;case s.OP_LE:r=U.TMS.TM_LE;break;default:return null}return n.name=t.l_G.tmname[r].getstr(),n.funcname=d("metamethod",!0),n},B=function(t,e){let n=t.ci,r=null;if(n.callstatus&E.CIST_LUA){r=function(t,e,n){let r=e.func.value;for(let a=0;a<r.nupvalues;a++)if(r.upvals[a]===n)return{name:w(r.p,a),funcname:d("upvalue",!0)};return null}(0,n,e);let a=function(t,e,n){for(let r=e.l_base;r<e.top;r++)if(t.stack[r]===n)return r;return!1}(t,n,e);!r&&a&&(r=V(n.func.value.p,R(n),a-n.l_base))}return r?k.luaO_pushfstring(t,d(" (%s '%s')",!0),r.funcname,r.name):d("",!0)},K=function(t,e,n){let r=U.luaT_objtypename(t,e);F(t,d("attempt to %s a %s value%s",!0),n,r,B(t,e))},j=function(t,e,n,r){let a;return a=n?k.luaO_chunkid(n.getstr(),A):d("?",!0),k.luaO_pushfstring(t,d("%s:%d: %s",!0),a,r,e)},F=function(t,e,...n){let r=t.ci,a=k.luaO_pushvfstring(t,e,n);r.callstatus&E.CIST_LUA&&j(t,a,r.func.value.p.source,y(r)),H(t)},H=function(t){if(0!==t.errfunc){let e=t.errfunc;k.pushobj2s(t,t.stack[t.top-1]),k.setobjs2s(t,t.top-2,e),T.luaD_callnoyield(t,t.top-2,1)}T.luaD_throw(t,c)};t.exports.luaG_addinfo=j,t.exports.luaG_concaterror=function(t,e,n){(e.ttisstring()||N.cvt2str(e))&&(e=n),K(t,e,d("concatenate",!0))},t.exports.luaG_errormsg=H,t.exports.luaG_opinterror=function(t,e,n,r){!1===N.tonumber(e)&&(n=e),K(t,n,r)},t.exports.luaG_ordererror=function(t,e,n){let r=U.luaT_objtypename(t,e),a=U.luaT_objtypename(t,n);p(r,a)?F(t,d("attempt to compare two %s values",!0),r):F(t,d("attempt to compare %s with %s",!0),r,a)},t.exports.luaG_runerror=F,t.exports.luaG_tointerror=function(t,e,n){!1===N.tointeger(e)&&(n=e),F(t,d("number%s has no integer representation",!0),B(t,n))},t.exports.luaG_traceexec=function(t){let e=t.ci,n=t.hookmask,s=0==--t.hookcount&&n&u;if(s)t.hookcount=t.basehookcount;else if(!(n&l))return;if(e.callstatus&E.CIST_HOOKYIELD)e.callstatus&=~E.CIST_HOOKYIELD;else{if(s&&T.luaD_hook(t,r,-1),n&l){let n=e.func.value.p,r=e.l_savedpc-1,u=0!==n.lineinfo.length?n.lineinfo[r]:-1;(0===r||e.l_savedpc<=t.oldpc||u!==(0!==n.lineinfo.length?n.lineinfo[t.oldpc-1]:-1))&&T.luaD_hook(t,a,u)}t.oldpc=e.l_savedpc,t.status===f&&(s&&(t.hookcount=1),e.l_savedpc--,e.callstatus|=E.CIST_HOOKYIELD,e.funcOff=t.top-1,e.func=t.stack[e.funcOff],T.luaD_throw(t,f))}},t.exports.luaG_typeerror=K,t.exports.lua_gethook=function(t){return t.hook},t.exports.lua_gethookcount=function(t){return t.basehookcount},t.exports.lua_gethookmask=function(t){return t.hookmask},t.exports.lua_getinfo=function(t,e,n){let r,a,u,l;return e=_(e),S(t),62===e[0]?(u=null,l=t.stack[t.top-1],L(t,l.ttisfunction(),"function expected"),e=e.subarray(1),t.top--):(l=(u=n.i_ci).func,g(u.func.ttisfunction())),r=function(t,e,n,r,a){let u=1;for(;e.length>0;e=e.subarray(1))switch(e[0]){case 83:M(n,r);break;case 108:n.currentline=a&&a.callstatus&E.CIST_LUA?y(a):-1;break;case 117:n.nups=null===r?0:r.nupvalues,null===r||r instanceof k.CClosure?(n.isvararg=!0,n.nparams=0):(n.isvararg=r.p.is_vararg,n.nparams=r.p.numparams);break;case 116:n.istailcall=a?a.callstatus&E.CIST_TAIL:0;break;case 110:{let e=P(t,a);null===e?(n.namewhat=d("",!0),n.name=null):(n.namewhat=e.funcname,n.name=e.name);break}case 76:case 102:break;default:u=0}return u}(t,e,n,a=l.ttisclosure()?l.value:null,u),h(e,102)>=0&&(k.pushobj2s(t,l),L(t,t.top<=t.ci.top,"stack overflow")),S(t),h(e,76)>=0&&function(t,e){if(null===e||e instanceof k.CClosure)t.stack[t.top]=new k.TValue(o,null),x.api_incr_top(t);else{let n=e.p.lineinfo,r=m.luaH_new(t);t.stack[t.top]=new k.TValue(i,r),x.api_incr_top(t);let a=new k.TValue(s,!0);for(let t=0;t<n.length;t++)m.luaH_setint(r,n[t],a)}}(t,a),r},t.exports.lua_getlocal=function(t,e,n){let r;if(S(t),null===e)r=t.stack[t.top-1].ttisLclosure()?b.luaF_getlocalname(t.stack[t.top-1].value.p,n,0):null;else{let a=I(t,e.i_ci,n);a?(r=a.name,k.pushobj2s(t,t.stack[a.pos]),L(t,t.top<=t.ci.top,"stack overflow")):r=null}return S(t),r},t.exports.lua_getstack=function(t,e,n){let r,a;if(e<0)return 0;for(r=t.ci;e>0&&r!==t.base_ci;r=r.previous)e--;return 0===e&&r!==t.base_ci?(a=1,n.i_ci=r):a=0,a},t.exports.lua_sethook=function(t,e,n,r){null!==e&&0!==n||(n=0,e=null),t.ci.callstatus&E.CIST_LUA&&(t.oldpc=t.ci.l_savedpc),t.hook=e,t.basehookcount=r,t.hookcount=t.basehookcount,t.hookmask=n},t.exports.lua_setlocal=function(t,e,n){let r;S(t);let a=I(t,e.i_ci,n);return a?(r=a.name,k.setobjs2s(t,a.pos,t.top-1),delete t.stack[--t.top]):r=null,S(t),r}},function(t,e,n){"use strict";const{LUA_MINSTACK:r,LUA_RIDX_GLOBALS:a,LUA_RIDX_MAINTHREAD:u,constant_types:{LUA_NUMTAGS:l,LUA_TNIL:s,LUA_TTABLE:o,LUA_TTHREAD:i},thread_status:{LUA_OK:c}}=n(1),f=n(6),_=n(8),p=n(18),h=n(9),d=n(14),L=2*r;class g{constructor(){this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN}}class A{constructor(t){this.id=t.id_counter++,this.base_ci=new g,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=t,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.nny=1,this.status=c,this.errfunc=0}}const x=function(t){t.ci.next=null},T=function(t,e){t.stack=new Array(L),t.top=0,t.stack_last=L-5;let n=t.base_ci;n.next=n.previous=null,n.callstatus=0,n.funcOff=t.top,n.func=t.stack[t.top],t.stack[t.top++]=new f.TValue(s,null),n.top=t.top+r,t.ci=n},b=function(t){t.ci=t.base_ci,x(t),t.stack=null},O=function(t){let e=t.l_G;T(t),function(t,e){let n=h.luaH_new(t);e.l_registry.sethvalue(n),h.luaH_setint(n,u,new f.TValue(i,t)),h.luaH_setint(n,a,new f.TValue(o,h.luaH_new(t)))}(t,e),d.luaT_init(t),e.version=p.lua_version(null)};t.exports.lua_State=A,t.exports.CallInfo=g,t.exports.CIST_OAH=1,t.exports.CIST_LUA=2,t.exports.CIST_HOOKED=4,t.exports.CIST_FRESH=8,t.exports.CIST_YPCALL=16,t.exports.CIST_TAIL=32,t.exports.CIST_HOOKYIELD=64,t.exports.CIST_LEQ=128,t.exports.CIST_FIN=256,t.exports.EXTRA_STACK=5,t.exports.lua_close=function(t){!function(t){b(t)}(t=t.l_G.mainthread)},t.exports.lua_newstate=function(){let t=new class{constructor(){this.id_counter=1,this.ids=new WeakMap,this.mainthread=null,this.l_registry=new f.TValue(s,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=new Array(d.TMS.TM_N),this.mt=new Array(l)}},e=new A(t);return t.mainthread=e,_.luaD_rawrunprotected(e,O,null)!==c&&(e=null),e},t.exports.lua_newthread=function(t){let e=t.l_G,n=new A(e);return t.stack[t.top]=new f.TValue(i,n),p.api_incr_top(t),n.hookmask=t.hookmask,n.basehookcount=t.basehookcount,n.hook=t.hook,n.hookcount=n.basehookcount,T(n),n},t.exports.luaE_extendCI=function(t){let e=new g;return t.ci.next=e,e.previous=t.ci,e.next=null,t.ci=e,e},t.exports.luaE_freeCI=x,t.exports.luaE_freethread=function(t,e){b(e)}},function(t,e,n){"use strict";const{constant_types:{LUA_TNIL:r}}=n(1),a=n(6);t.exports.MAXUPVAL=255,t.exports.Proto=class{constructor(t){this.id=t.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null}},t.exports.luaF_findupval=function(t,e){return t.stack[e]},t.exports.luaF_close=function(t,e){for(let n=e;n<t.top;n++){let e=t.stack[n];t.stack[n]=new a.TValue(e.type,e.value)}},t.exports.luaF_getlocalname=function(t,e,n){for(let r=0;r<t.locvars.length&&t.locvars[r].startpc<=n;r++)if(n<t.locvars[r].endpc&&0==--e)return t.locvars[r].varname.getstr();return null},t.exports.luaF_initupvals=function(t,e){for(let n=0;n<e.nupvalues;n++)e.upvals[n]=new a.TValue(r,null)},t.exports.luaF_newLclosure=function(t,e){return new a.LClosure(t,e)}},function(t,e,n){"use strict";const{constant_types:{LUA_TTABLE:r,LUA_TUSERDATA:a},to_luastring:u}=n(1),{lua_assert:l}=n(4),s=n(6),o=n(8),i=n(12),{luaS_bless:c,luaS_new:f}=n(10),_=n(9),p=n(11),h=n(15),d=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map(t=>u(t)),L=function(t){return d[t+1]},g={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},A=u("__name",!0),x=function(t,e,n,r,a,u){let l=t.top;if(s.pushobj2s(t,e),s.pushobj2s(t,n),s.pushobj2s(t,r),u||s.pushobj2s(t,a),t.ci.callstatus&i.CIST_LUA?o.luaD_call(t,l,u):o.luaD_callnoyield(t,l,u),u){let e=t.stack[t.top-1];delete t.stack[--t.top],a.setfrom(e)}},T=function(t,e,n,r,a){let u=O(t,e,a);return u.ttisnil()&&(u=O(t,n,a)),!u.ttisnil()&&(x(t,u,e,n,r,1),!0)},b=function(t,e,n){const r=_.luaH_getstr(t,n);return l(e<=g.TM_EQ),r.ttisnil()?(t.flags|=1<<e,null):r},O=function(t,e,n){let u;switch(e.ttnov()){case r:case a:u=e.value.metatable;break;default:u=t.l_G.mt[e.ttnov()]}return u?_.luaH_getstr(u,t.l_G.tmname[n]):s.luaO_nilobject};t.exports.fasttm=function(t,e,n){return null===e||e.flags&1<<n?null:b(e,n,t.l_G.tmname[n])},t.exports.TMS=g,t.exports.luaT_callTM=x,t.exports.luaT_callbinTM=T,t.exports.luaT_trybinTM=function(t,e,n,r,a){if(!T(t,e,n,r,a))switch(a){case g.TM_CONCAT:return p.luaG_concaterror(t,e,n);case g.TM_BAND:case g.TM_BOR:case g.TM_BXOR:case g.TM_SHL:case g.TM_SHR:case g.TM_BNOT:{let r=h.tonumber(e),a=h.tonumber(n);return!1!==r&&!1!==a?p.luaG_tointerror(t,e,n):p.luaG_opinterror(t,e,n,u("perform bitwise operation on",!0))}default:return p.luaG_opinterror(t,e,n,u("perform arithmetic on",!0))}},t.exports.luaT_callorderTM=function(t,e,n,r){let a=new s.TValue;return T(t,e,n,a,r)?!a.l_isfalse():null},t.exports.luaT_gettm=b,t.exports.luaT_gettmbyobj=O,t.exports.luaT_init=function(t){t.l_G.tmname[g.TM_INDEX]=new f(t,u("__index",!0)),t.l_G.tmname[g.TM_NEWINDEX]=new f(t,u("__newindex",!0)),t.l_G.tmname[g.TM_GC]=new f(t,u("__gc",!0)),t.l_G.tmname[g.TM_MODE]=new f(t,u("__mode",!0)),t.l_G.tmname[g.TM_LEN]=new f(t,u("__len",!0)),t.l_G.tmname[g.TM_EQ]=new f(t,u("__eq",!0)),t.l_G.tmname[g.TM_ADD]=new f(t,u("__add",!0)),t.l_G.tmname[g.TM_SUB]=new f(t,u("__sub",!0)),t.l_G.tmname[g.TM_MUL]=new f(t,u("__mul",!0)),t.l_G.tmname[g.TM_MOD]=new f(t,u("__mod",!0)),t.l_G.tmname[g.TM_POW]=new f(t,u("__pow",!0)),t.l_G.tmname[g.TM_DIV]=new f(t,u("__div",!0)),t.l_G.tmname[g.TM_IDIV]=new f(t,u("__idiv",!0)),t.l_G.tmname[g.TM_BAND]=new f(t,u("__band",!0)),t.l_G.tmname[g.TM_BOR]=new f(t,u("__bor",!0)),t.l_G.tmname[g.TM_BXOR]=new f(t,u("__bxor",!0)),t.l_G.tmname[g.TM_SHL]=new f(t,u("__shl",!0)),t.l_G.tmname[g.TM_SHR]=new f(t,u("__shr",!0)),t.l_G.tmname[g.TM_UNM]=new f(t,u("__unm",!0)),t.l_G.tmname[g.TM_BNOT]=new f(t,u("__bnot",!0)),t.l_G.tmname[g.TM_LT]=new f(t,u("__lt",!0)),t.l_G.tmname[g.TM_LE]=new f(t,u("__le",!0)),t.l_G.tmname[g.TM_CONCAT]=new f(t,u("__concat",!0)),t.l_G.tmname[g.TM_CALL]=new f(t,u("__call",!0))},t.exports.luaT_objtypename=function(t,e){let n;if(e.ttistable()&&null!==(n=e.value.metatable)||e.ttisfulluserdata()&&null!==(n=e.value.metatable)){let e=_.luaH_getstr(n,c(t,A));if(e.ttisstring())return e.svalue()}return L(e.ttnov())},t.exports.ttypename=L},function(t,e,n){"use strict";const{LUA_MASKLINE:r,LUA_MASKCOUNT:a,LUA_MULTRET:u,constant_types:{LUA_TBOOLEAN:l,LUA_TLCF:s,LUA_TLIGHTUSERDATA:o,LUA_TLNGSTR:i,LUA_TNIL:c,LUA_TNUMBER:f,LUA_TNUMFLT:_,LUA_TNUMINT:p,LUA_TSHRSTR:h,LUA_TTABLE:d,LUA_TUSERDATA:L},to_luastring:g}=n(1),{INDEXK:A,ISK:x,LFIELDS_PER_FLUSH:T,OpCodesI:{OP_ADD:b,OP_BAND:O,OP_BNOT:k,OP_BOR:v,OP_BXOR:E,OP_CALL:m,OP_CLOSURE:U,OP_CONCAT:N,OP_DIV:R,OP_EQ:y,OP_EXTRAARG:S,OP_FORLOOP:w,OP_FORPREP:I,OP_GETTABLE:M,OP_GETTABUP:P,OP_GETUPVAL:C,OP_IDIV:D,OP_JMP:V,OP_LE:G,OP_LEN:B,OP_LOADBOOL:K,OP_LOADK:j,OP_LOADKX:F,OP_LOADNIL:H,OP_LT:X,OP_MOD:z,OP_MOVE:J,OP_MUL:Y,OP_NEWTABLE:Z,OP_NOT:q,OP_POW:W,OP_RETURN:$,OP_SELF:Q,OP_SETLIST:tt,OP_SETTABLE:et,OP_SETTABUP:nt,OP_SETUPVAL:rt,OP_SHL:at,OP_SHR:ut,OP_SUB:lt,OP_TAILCALL:st,OP_TEST:ot,OP_TESTSET:it,OP_TFORCALL:ct,OP_TFORLOOP:ft,OP_UNM:_t,OP_VARARG:pt}}=n(16),{LUA_MAXINTEGER:ht,LUA_MININTEGER:dt,lua_numbertointeger:Lt}=n(3),{lua_assert:gt,luai_nummod:At}=n(4),xt=n(6),Tt=n(13),bt=n(12),{luaS_bless:Ot,luaS_eqlngstr:kt,luaS_hashlongstr:vt}=n(10),Et=n(8),mt=n(14),Ut=n(9),Nt=n(11),Rt=function(t,e,n){return e+n.A},yt=function(t,e,n){return e+n.B},St=function(t,e,n,r){return x(r.B)?n[A(r.B)]:t.stack[e+r.B]},wt=function(t,e,n,r){return x(r.C)?n[A(r.C)]:t.stack[e+r.C]},It=function(t,e,n,r){let a=n.A;0!==a&&Tt.luaF_close(t,e.l_base+a-1),e.l_savedpc+=n.sBx+r},Mt=function(t,e){It(t,e,e.l_code[e.l_savedpc],1)},Pt=function(t,e,n){if(e.ttisnumber()&&n.ttisnumber())return jt(e,n)?1:0;if(e.ttisstring()&&n.ttisstring())return Ht(e.tsvalue(),n.tsvalue())<0?1:0;{let r=mt.luaT_callorderTM(t,e,n,mt.TMS.TM_LT);return null===r&&Nt.luaG_ordererror(t,e,n),r?1:0}},Ct=function(t,e,n){let r;return e.ttisnumber()&&n.ttisnumber()?Ft(e,n)?1:0:e.ttisstring()&&n.ttisstring()?Ht(e.tsvalue(),n.tsvalue())<=0?1:0:null!==(r=mt.luaT_callorderTM(t,e,n,mt.TMS.TM_LE))?r?1:0:(t.ci.callstatus|=bt.CIST_LEQ,r=mt.luaT_callorderTM(t,n,e,mt.TMS.TM_LT),t.ci.callstatus^=bt.CIST_LEQ,null===r&&Nt.luaG_ordererror(t,e,n),r?0:1)},Dt=function(t,e,n){if(e.ttype()!==n.ttype())return e.ttnov()!==n.ttnov()||e.ttnov()!==f?0:e.value===n.value?1:0;let r;switch(e.ttype()){case c:return 1;case l:return e.value==n.value?1:0;case o:case p:case _:case s:return e.value===n.value?1:0;case h:case i:return kt(e.tsvalue(),n.tsvalue())?1:0;case L:case d:if(e.value===n.value)return 1;if(null===t)return 0;null===(r=mt.fasttm(t,e.value.metatable,mt.TMS.TM_EQ))&&(r=mt.fasttm(t,n.value.metatable,mt.TMS.TM_EQ));break;default:return e.value===n.value?1:0}if(null===r)return 0;let a=new xt.TValue;return mt.luaT_callTM(t,r,e,n,a,1),a.l_isfalse()?0:1},Vt=function(t,e){let n=!1,r=Gt(t,e<0?2:1);if(!1===r){let a=Kt(t);if(!1===a)return!1;0<a?(r=ht,e<0&&(n=!0)):(r=dt,e>=0&&(n=!0))}return{stopnow:n,ilimit:r}},Gt=function(t,e){if(t.ttisfloat()){let n=t.value,r=Math.floor(n);if(n!==r){if(0===e)return!1;e>1&&(r+=1)}return Lt(r)}if(t.ttisinteger())return t.value;if(Qt(t)){let n=new xt.TValue;if(xt.luaO_str2num(t.svalue(),n)===t.vslen()+1)return Gt(n,e)}return!1},Bt=function(t){return t.ttisinteger()?t.value:Gt(t,0)},Kt=function(t){if(t.ttnov()===f)return t.value;if(Qt(t)){let e=new xt.TValue;if(xt.luaO_str2num(t.svalue(),e)===t.vslen()+1)return e.value}return!1},jt=function(t,e){return t.value<e.value},Ft=function(t,e){return t.value<=e.value},Ht=function(t,e){let n=vt(t),r=vt(e);return n===r?0:n<r?-1:1},Xt=function(t,e,n){let r;switch(n.ttype()){case d:{let a=n.value;if(null!==(r=mt.fasttm(t,a.metatable,mt.TMS.TM_LEN)))break;return void e.setivalue(Ut.luaH_getn(a))}case h:case i:return void e.setivalue(n.vslen());default:(r=mt.luaT_gettmbyobj(t,n,mt.TMS.TM_LEN)).ttisnil()&&Nt.luaG_typeerror(t,n,g("get length of",!0))}mt.luaT_callTM(t,r,n,n,e,1)},zt=Math.imul||function(t,e){let n=65535&t,r=65535&e;return n*r+((t>>>16&65535)*r+n*(e>>>16&65535)<<16>>>0)|0},Jt=function(t,e,n){return 0===n&&Nt.luaG_runerror(t,g("attempt to divide by zero")),0|Math.floor(e/n)},Yt=function(t,e,n){return 0===n&&Nt.luaG_runerror(t,g("attempt to perform 'n%%0'")),e-Math.floor(e/n)*n|0},Zt=function(t,e){return e<0?e<=-32?0:t>>>-e:e>=32?0:t<<e},qt=function(t,e,n,r){let a=t.cache;if(null!==a){let u=t.upvalues,l=u.length;for(let t=0;t<l;t++){let l=u[t].instack?n[r+u[t].idx]:e[u[t].idx];if(a.upvals[t]!==l)return null}}return a},Wt=function(t,e,n,r,a){let u=e.upvalues.length,l=e.upvalues,s=new xt.LClosure(t,u);s.p=e,t.stack[a].setclLvalue(s);for(let o=0;o<u;o++)l[o].instack?s.upvals[o]=Tt.luaF_findupval(t,r+l[o].idx):s.upvals[o]=n[l[o].idx];e.cache=s},$t=function(t){return t.ttisnumber()},Qt=function(t){return t.ttisstring()},te=function(t,e){let n=t.stack[e];return!!n.ttisstring()||!!$t(n)&&(xt.luaO_tostring(t,n),!0)},ee=function(t){return t.ttisstring()&&0===t.vslen()},ne=function(t,e,n,r){let a=0;do{let u=t.stack[e-n],l=u.vslen(),s=u.svalue();r.set(s,a),a+=l}while(--n>0)},re=function(t,e){gt(e>=2);do{let n=t.top,r=2;if((t.stack[n-2].ttisstring()||$t(t.stack[n-2]))&&te(t,n-1))if(ee(t.stack[n-1]))te(t,n-2);else if(ee(t.stack[n-2]))xt.setobjs2s(t,n-2,n-1);else{let a=t.stack[n-1].vslen();for(r=1;r<e&&te(t,n-r-1);r++)a+=t.stack[n-r-1].vslen();let u=new Uint8Array(a);ne(t,n,r,u);let l=Ot(t,u);xt.setsvalue2s(t,n-r,l)}else mt.luaT_trybinTM(t,t.stack[n-2],t.stack[n-1],t.stack[n-2],mt.TMS.TM_CONCAT);for(e-=r-1;t.top>n-(r-1);)delete t.stack[--t.top]}while(e>1)},ae=function(t,e,n,r){for(let a=0;a<2e3;a++){let a;if(e.ttistable()){let u=Ut.luaH_get(t,e.value,n);if(!u.ttisnil())return void xt.setobj2s(t,r,u);if(null===(a=mt.fasttm(t,e.value.metatable,mt.TMS.TM_INDEX)))return void t.stack[r].setnilvalue()}else(a=mt.luaT_gettmbyobj(t,e,mt.TMS.TM_INDEX)).ttisnil()&&Nt.luaG_typeerror(t,e,g("index",!0));if(a.ttisfunction())return void mt.luaT_callTM(t,a,e,n,t.stack[r],1);e=a}Nt.luaG_runerror(t,g("'__index' chain too long; possible loop",!0))},ue=function(t,e,n,r){for(let a=0;a<2e3;a++){let a;if(e.ttistable()){let u=e.value;if(!Ut.luaH_get(t,u,n).ttisnil()||null===(a=mt.fasttm(t,u.metatable,mt.TMS.TM_NEWINDEX)))return Ut.luaH_setfrom(t,u,n,r),void Ut.invalidateTMcache(u)}else(a=mt.luaT_gettmbyobj(t,e,mt.TMS.TM_NEWINDEX)).ttisnil()&&Nt.luaG_typeerror(t,e,g("index",!0));if(a.ttisfunction())return void mt.luaT_callTM(t,a,e,n,r,0);e=a}Nt.luaG_runerror(t,g("'__newindex' chain too long; possible loop",!0))};t.exports.cvt2str=$t,t.exports.cvt2num=Qt,t.exports.luaV_gettable=ae,t.exports.luaV_concat=re,t.exports.luaV_div=Jt,t.exports.luaV_equalobj=Dt,t.exports.luaV_execute=function(t){let e=t.ci;e.callstatus|=bt.CIST_FRESH;t:for(;;){gt(e===t.ci);let n=e.func.value,l=n.p.k,s=e.l_base,o=e.l_code[e.l_savedpc++];t.hookmask&(r|a)&&Nt.luaG_traceexec(t);let i=Rt(0,s,o);switch(o.opcode){case J:xt.setobjs2s(t,i,yt(0,s,o));break;case j:{let e=l[o.Bx];xt.setobj2s(t,i,e);break}case F:{gt(e.l_code[e.l_savedpc].opcode===S);let n=l[e.l_code[e.l_savedpc++].Ax];xt.setobj2s(t,i,n);break}case K:t.stack[i].setbvalue(0!==o.B),0!==o.C&&e.l_savedpc++;break;case H:for(let e=0;e<=o.B;e++)t.stack[i+e].setnilvalue();break;case C:{let e=o.B;xt.setobj2s(t,i,n.upvals[e]);break}case P:{let e=n.upvals[o.B],r=wt(t,s,l,o);ae(t,e,r,i);break}case M:{let e=t.stack[yt(0,s,o)],n=wt(t,s,l,o);ae(t,e,n,i);break}case nt:{let e=n.upvals[o.A],r=St(t,s,l,o),a=wt(t,s,l,o);ue(t,e,r,a);break}case rt:n.upvals[o.B].setfrom(t.stack[i]);break;case et:{let e=t.stack[i],n=St(t,s,l,o),r=wt(t,s,l,o);ue(t,e,n,r);break}case Z:t.stack[i].sethvalue(Ut.luaH_new(t));break;case Q:{let e=yt(0,s,o),n=wt(t,s,l,o);xt.setobjs2s(t,i+1,e),ae(t,t.stack[e],n,i);break}case b:{let e,n,r=St(t,s,l,o),a=wt(t,s,l,o);r.ttisinteger()&&a.ttisinteger()?t.stack[i].setivalue(r.value+a.value|0):!1!==(e=Kt(r))&&!1!==(n=Kt(a))?t.stack[i].setfltvalue(e+n):mt.luaT_trybinTM(t,r,a,t.stack[i],mt.TMS.TM_ADD);break}case lt:{let e,n,r=St(t,s,l,o),a=wt(t,s,l,o);r.ttisinteger()&&a.ttisinteger()?t.stack[i].setivalue(r.value-a.value|0):!1!==(e=Kt(r))&&!1!==(n=Kt(a))?t.stack[i].setfltvalue(e-n):mt.luaT_trybinTM(t,r,a,t.stack[i],mt.TMS.TM_SUB);break}case Y:{let e,n,r=St(t,s,l,o),a=wt(t,s,l,o);r.ttisinteger()&&a.ttisinteger()?t.stack[i].setivalue(zt(r.value,a.value)):!1!==(e=Kt(r))&&!1!==(n=Kt(a))?t.stack[i].setfltvalue(e*n):mt.luaT_trybinTM(t,r,a,t.stack[i],mt.TMS.TM_MUL);break}case z:{let e,n,r=St(t,s,l,o),a=wt(t,s,l,o);r.ttisinteger()&&a.ttisinteger()?t.stack[i].setivalue(Yt(t,r.value,a.value)):!1!==(e=Kt(r))&&!1!==(n=Kt(a))?t.stack[i].setfltvalue(At(t,e,n)):mt.luaT_trybinTM(t,r,a,t.stack[i],mt.TMS.TM_MOD);break}case W:{let e,n,r=St(t,s,l,o),a=wt(t,s,l,o);!1!==(e=Kt(r))&&!1!==(n=Kt(a))?t.stack[i].setfltvalue(Math.pow(e,n)):mt.luaT_trybinTM(t,r,a,t.stack[i],mt.TMS.TM_POW);break}case R:{let e,n,r=St(t,s,l,o),a=wt(t,s,l,o);!1!==(e=Kt(r))&&!1!==(n=Kt(a))?t.stack[i].setfltvalue(e/n):mt.luaT_trybinTM(t,r,a,t.stack[i],mt.TMS.TM_DIV);break}case D:{let e,n,r=St(t,s,l,o),a=wt(t,s,l,o);r.ttisinteger()&&a.ttisinteger()?t.stack[i].setivalue(Jt(t,r.value,a.value)):!1!==(e=Kt(r))&&!1!==(n=Kt(a))?t.stack[i].setfltvalue(Math.floor(e/n)):mt.luaT_trybinTM(t,r,a,t.stack[i],mt.TMS.TM_IDIV);break}case O:{let e,n,r=St(t,s,l,o),a=wt(t,s,l,o);!1!==(e=Bt(r))&&!1!==(n=Bt(a))?t.stack[i].setivalue(e&n):mt.luaT_trybinTM(t,r,a,t.stack[i],mt.TMS.TM_BAND);break}case v:{let e,n,r=St(t,s,l,o),a=wt(t,s,l,o);!1!==(e=Bt(r))&&!1!==(n=Bt(a))?t.stack[i].setivalue(e|n):mt.luaT_trybinTM(t,r,a,t.stack[i],mt.TMS.TM_BOR);break}case E:{let e,n,r=St(t,s,l,o),a=wt(t,s,l,o);!1!==(e=Bt(r))&&!1!==(n=Bt(a))?t.stack[i].setivalue(e^n):mt.luaT_trybinTM(t,r,a,t.stack[i],mt.TMS.TM_BXOR);break}case at:{let e,n,r=St(t,s,l,o),a=wt(t,s,l,o);!1!==(e=Bt(r))&&!1!==(n=Bt(a))?t.stack[i].setivalue(Zt(e,n)):mt.luaT_trybinTM(t,r,a,t.stack[i],mt.TMS.TM_SHL);break}case ut:{let e,n,r=St(t,s,l,o),a=wt(t,s,l,o);!1!==(e=Bt(r))&&!1!==(n=Bt(a))?t.stack[i].setivalue(Zt(e,-n)):mt.luaT_trybinTM(t,r,a,t.stack[i],mt.TMS.TM_SHR);break}case _t:{let e,n=t.stack[yt(0,s,o)];n.ttisinteger()?t.stack[i].setivalue(0|-n.value):!1!==(e=Kt(n))?t.stack[i].setfltvalue(-e):mt.luaT_trybinTM(t,n,n,t.stack[i],mt.TMS.TM_UNM);break}case k:{let e=t.stack[yt(0,s,o)];e.ttisinteger()?t.stack[i].setivalue(~e.value):mt.luaT_trybinTM(t,e,e,t.stack[i],mt.TMS.TM_BNOT);break}case q:{let e=t.stack[yt(0,s,o)];t.stack[i].setbvalue(e.l_isfalse());break}case B:Xt(t,t.stack[i],t.stack[yt(0,s,o)]);break;case N:{let n=o.B,r=o.C;t.top=s+r+1,re(t,r-n+1);let a=s+n;xt.setobjs2s(t,i,a),Et.adjust_top(t,e.top);break}case V:It(t,e,o,0);break;case y:Dt(t,St(t,s,l,o),wt(t,s,l,o))!==o.A?e.l_savedpc++:Mt(t,e);break;case X:Pt(t,St(t,s,l,o),wt(t,s,l,o))!==o.A?e.l_savedpc++:Mt(t,e);break;case G:Ct(t,St(t,s,l,o),wt(t,s,l,o))!==o.A?e.l_savedpc++:Mt(t,e);break;case ot:(o.C?t.stack[i].l_isfalse():!t.stack[i].l_isfalse())?e.l_savedpc++:Mt(t,e);break;case it:{let n=yt(0,s,o),r=t.stack[n];(o.C?r.l_isfalse():!r.l_isfalse())?e.l_savedpc++:(xt.setobjs2s(t,i,n),Mt(t,e));break}case m:{let n=o.B,r=o.C-1;if(0!==n&&Et.adjust_top(t,i+n),!Et.luaD_precall(t,i,r)){e=t.ci;continue t}r>=0&&Et.adjust_top(t,e.top);break}case st:{let r=o.B;if(0!==r&&Et.adjust_top(t,i+r),!Et.luaD_precall(t,i,u)){let r=t.ci,a=r.previous,u=r.func,l=r.funcOff,s=a.funcOff,o=r.l_base+u.value.p.numparams;n.p.p.length>0&&Tt.luaF_close(t,a.l_base);for(let e=0;l+e<o;e++)xt.setobjs2s(t,s+e,l+e);a.l_base=s+(r.l_base-l),a.top=s+(t.top-l),Et.adjust_top(t,a.top),a.l_code=r.l_code,a.l_savedpc=r.l_savedpc,a.callstatus|=bt.CIST_TAIL,a.next=null,e=t.ci=a,gt(t.top===a.l_base+t.stack[s].value.p.maxstacksize);continue t}break}case $:{n.p.p.length>0&&Tt.luaF_close(t,s);let r=Et.luaD_poscall(t,e,i,0!==o.B?o.B-1:t.top-i);if(e.callstatus&bt.CIST_FRESH)return;e=t.ci,r&&Et.adjust_top(t,e.top),gt(e.callstatus&bt.CIST_LUA),gt(e.l_code[e.l_savedpc-1].opcode===m);continue t}case w:if(t.stack[i].ttisinteger()){let n=t.stack[i+2].value,r=t.stack[i].value+n|0,a=t.stack[i+1].value;(0<n?r<=a:a<=r)&&(e.l_savedpc+=o.sBx,t.stack[i].chgivalue(r),t.stack[i+3].setivalue(r))}else{let n=t.stack[i+2].value,r=t.stack[i].value+n,a=t.stack[i+1].value;(0<n?r<=a:a<=r)&&(e.l_savedpc+=o.sBx,t.stack[i].chgfltvalue(r),t.stack[i+3].setfltvalue(r))}break;case I:{let n,r=t.stack[i],a=t.stack[i+1],u=t.stack[i+2];if(r.ttisinteger()&&u.ttisinteger()&&(n=Vt(a,u.value))){let t=n.stopnow?0:r.value;a.value=n.ilimit,r.value=t-u.value|0}else{let e,n,l;!1===(e=Kt(a))&&Nt.luaG_runerror(t,g("'for' limit must be a number",!0)),t.stack[i+1].setfltvalue(e),!1===(n=Kt(u))&&Nt.luaG_runerror(t,g("'for' step must be a number",!0)),t.stack[i+2].setfltvalue(n),!1===(l=Kt(r))&&Nt.luaG_runerror(t,g("'for' initial value must be a number",!0)),t.stack[i].setfltvalue(l-n)}e.l_savedpc+=o.sBx;break}case ct:{let n=i+3;xt.setobjs2s(t,n+2,i+2),xt.setobjs2s(t,n+1,i+1),xt.setobjs2s(t,n,i),Et.adjust_top(t,n+3),Et.luaD_call(t,n,o.C),Et.adjust_top(t,e.top),o=e.l_code[e.l_savedpc++],i=Rt(0,s,o),gt(o.opcode===ft)}case ft:t.stack[i+1].ttisnil()||(xt.setobjs2s(t,i,i+1),e.l_savedpc+=o.sBx);break;case tt:{let n=o.B,r=o.C;0===n&&(n=t.top-i-1),0===r&&(gt(e.l_code[e.l_savedpc].opcode===S),r=e.l_code[e.l_savedpc++].Ax);let a=t.stack[i].value,u=(r-1)*T+n;for(;n>0;n--)Ut.luaH_setint(a,u--,t.stack[i+n]);Et.adjust_top(t,e.top);break}case U:{let e=n.p.p[o.Bx],r=qt(e,n.upvals,t.stack,s);null===r?Wt(t,e,n.upvals,s,i):t.stack[i].setclLvalue(r);break}case pt:{let r,a=o.B-1,u=s-e.funcOff-n.p.numparams-1;for(u<0&&(u=0),a<0&&(a=u,Et.luaD_checkstack(t,u),Et.adjust_top(t,i+u)),r=0;r<a&&r<u;r++)xt.setobjs2s(t,i+r,s-u+r);for(;r<a;r++)t.stack[i+r].setnilvalue();break}case S:throw Error("invalid opcode")}}},t.exports.luaV_finishOp=function(t){let e=t.ci,n=e.l_base,r=e.l_code[e.l_savedpc-1],a=r.opcode;switch(a){case b:case lt:case Y:case R:case D:case O:case v:case E:case at:case ut:case z:case W:case _t:case k:case B:case P:case M:case Q:xt.setobjs2s(t,n+r.A,t.top-1),delete t.stack[--t.top];break;case G:case X:case y:{let n=!t.stack[t.top-1].l_isfalse();delete t.stack[--t.top],e.callstatus&bt.CIST_LEQ&&(gt(a===G),e.callstatus^=bt.CIST_LEQ,n=!n),gt(e.l_code[e.l_savedpc].opcode===V),n!==!!r.A&&e.l_savedpc++;break}case N:{let a=t.top-1,u=a-1-(n+r.B);xt.setobjs2s(t,a-2,a),u>1&&(t.top=a-1,re(t,u)),xt.setobjs2s(t,e.l_base+r.A,t.top-1),Et.adjust_top(t,e.top);break}case ct:gt(e.l_code[e.l_savedpc].opcode===ft),Et.adjust_top(t,e.top);break;case m:r.C-1>=0&&Et.adjust_top(t,e.top)}},t.exports.luaV_imul=zt,t.exports.luaV_lessequal=Ct,t.exports.luaV_lessthan=Pt,t.exports.luaV_mod=Yt,t.exports.luaV_objlen=Xt,t.exports.luaV_rawequalobj=function(t,e){return Dt(null,t,e)},t.exports.luaV_shiftl=Zt,t.exports.luaV_tointeger=Gt,t.exports.settable=ue,t.exports.tointeger=Bt,t.exports.tonumber=Kt},function(t,e,n){"use strict";const r=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],a=function(t,e){return~(-1<<t)<<e},u=function(t,e){return~a(t,e)},l=function(t,e,n,r){return t.code=t.code&u(r,n)|e<<n&a(r,n),o(t)},s=function(t,e){return l(t,e,14,18)},o=function(t){if("number"==typeof t)return{code:t,opcode:t>>0&a(6,0),A:t>>6&a(8,0),B:t>>23&a(9,0),C:t>>14&a(9,0),Bx:t>>14&a(18,0),Ax:t>>6&a(26,0),sBx:(t>>14&a(18,0))-131071};{let e=t.code;return t.opcode=e>>0&a(6,0),t.A=e>>6&a(8,0),t.B=e>>23&a(9,0),t.C=e>>14&a(9,0),t.Bx=e>>14&a(18,0),t.Ax=e>>6&a(26,0),t.sBx=(e>>14&a(18,0))-131071,t}};t.exports.BITRK=256,t.exports.CREATE_ABC=function(t,e,n,r){return o(t<<0|e<<6|n<<23|r<<14)},t.exports.CREATE_ABx=function(t,e,n){return o(t<<0|e<<6|n<<14)},t.exports.CREATE_Ax=function(t,e){return o(t<<0|e<<6)},t.exports.GET_OPCODE=function(t){return t.opcode},t.exports.GETARG_A=function(t){return t.A},t.exports.GETARG_B=function(t){return t.B},t.exports.GETARG_C=function(t){return t.C},t.exports.GETARG_Bx=function(t){return t.Bx},t.exports.GETARG_Ax=function(t){return t.Ax},t.exports.GETARG_sBx=function(t){return t.sBx},t.exports.INDEXK=function(t){return-257&t},t.exports.ISK=function(t){return 256&t},t.exports.LFIELDS_PER_FLUSH=50,t.exports.MAXARG_A=255,t.exports.MAXARG_Ax=67108863,t.exports.MAXARG_B=511,t.exports.MAXARG_Bx=262143,t.exports.MAXARG_C=511,t.exports.MAXARG_sBx=131071,t.exports.MAXINDEXRK=255,t.exports.NO_REG=255,t.exports.OpArgK=3,t.exports.OpArgN=0,t.exports.OpArgR=2,t.exports.OpArgU=1,t.exports.OpCodes=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],t.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},t.exports.POS_A=6,t.exports.POS_Ax=6,t.exports.POS_B=23,t.exports.POS_Bx=14,t.exports.POS_C=14,t.exports.POS_OP=0,t.exports.RKASK=function(t){return 256|t},t.exports.SETARG_A=function(t,e){return l(t,e,6,8)},t.exports.SETARG_Ax=function(t,e){return l(t,e,6,26)},t.exports.SETARG_B=function(t,e){return l(t,e,23,9)},t.exports.SETARG_Bx=s,t.exports.SETARG_C=function(t,e){return l(t,e,14,9)},t.exports.SETARG_sBx=function(t,e){return s(t,e+131071)},t.exports.SET_OPCODE=function(t,e){return t.code=t.code&u(6,0)|e<<0&a(6,0),o(t)},t.exports.SIZE_A=8,t.exports.SIZE_Ax=26,t.exports.SIZE_B=9,t.exports.SIZE_Bx=18,t.exports.SIZE_C=9,t.exports.SIZE_OP=6,t.exports.fullins=o,t.exports.getBMode=function(t){return r[t]>>4&3},t.exports.getCMode=function(t){return r[t]>>2&3},t.exports.getOpMode=function(t){return 3&r[t]},t.exports.iABC=0,t.exports.iABx=1,t.exports.iAsBx=2,t.exports.iAx=3,t.exports.testAMode=function(t){return 64&r[t]},t.exports.testTMode=function(t){return 128&r[t]}},function(t,e,n){"use strict";const{LUA_VERSION_MAJOR:r,LUA_VERSION_MINOR:a}=n(2),u="_"+r+"_"+a;t.exports.LUA_VERSUFFIX=u,t.exports.lua_assert=function(t){},t.exports.luaopen_base=n(24).luaopen_base,t.exports.LUA_COLIBNAME="coroutine",t.exports.luaopen_coroutine=n(25).luaopen_coroutine,t.exports.LUA_TABLIBNAME="table",t.exports.luaopen_table=n(26).luaopen_table,t.exports.LUA_OSLIBNAME="os",t.exports.luaopen_os=n(27).luaopen_os,t.exports.LUA_STRLIBNAME="string",t.exports.luaopen_string=n(28).luaopen_string,t.exports.LUA_UTF8LIBNAME="utf8",t.exports.luaopen_utf8=n(29).luaopen_utf8,t.exports.LUA_BITLIBNAME="bit32",t.exports.LUA_MATHLIBNAME="math",t.exports.luaopen_math=n(30).luaopen_math,t.exports.LUA_DBLIBNAME="debug",t.exports.luaopen_debug=n(31).luaopen_debug,t.exports.LUA_LOADLIBNAME="package",t.exports.luaopen_package=n(32).luaopen_package,t.exports.LUA_FENGARILIBNAME="fengari",t.exports.luaopen_fengari=n(33).luaopen_fengari;const l=n(39);t.exports.luaL_openlibs=l.luaL_openlibs},function(t,e,n){"use strict";const{LUA_MULTRET:r,LUA_OPBNOT:a,LUA_OPEQ:u,LUA_OPLE:l,LUA_OPLT:s,LUA_OPUNM:o,LUA_REGISTRYINDEX:i,LUA_RIDX_GLOBALS:c,LUA_VERSION_NUM:f,constant_types:{LUA_NUMTAGS:_,LUA_TBOOLEAN:p,LUA_TCCL:h,LUA_TFUNCTION:d,LUA_TLCF:L,LUA_TLCL:g,LUA_TLIGHTUSERDATA:A,LUA_TLNGSTR:x,LUA_TNIL:T,LUA_TNONE:b,LUA_TNUMFLT:O,LUA_TNUMINT:k,LUA_TSHRSTR:v,LUA_TTABLE:E,LUA_TTHREAD:m,LUA_TUSERDATA:U},thread_status:{LUA_OK:N},from_userstring:R,to_luastring:y}=n(1),{api_check:S}=n(4),w=n(11),I=n(8),{luaU_dump:M}=n(37),P=n(13),C=n(6),D=n(12),{luaS_bless:V,luaS_new:G,luaS_newliteral:B}=n(10),K=n(14),{LUAI_MAXSTACK:j}=n(3),F=n(15),H=n(9),{ZIO:X}=n(19),z=C.TValue,J=C.CClosure,Y=function(t){t.top++,S(t,t.top<=t.ci.top,"stack overflow")},Z=function(t,e){S(t,e<t.top-t.ci.funcOff,"not enough elements in the stack")},q=function(t){if(!t)throw TypeError("invalid argument")},W=function(t){q("number"==typeof t&&(0|t)===t)},$=function(t){return t!==C.luaO_nilobject},Q=function(t,e){let n=t.ci;if(e>0){let r=n.funcOff+e;return S(t,e<=n.top-(n.funcOff+1),"unacceptable index"),r>=t.top?C.luaO_nilobject:t.stack[r]}return e>i?(S(t,0!==e&&-e<=t.top,"invalid index"),t.stack[t.top+e]):e===i?t.l_G.l_registry:(S(t,(e=i-e)<=P.MAXUPVAL+1,"upvalue index too large"),n.func.ttislcf()?C.luaO_nilobject:e<=n.func.value.nupvalues?n.func.value.upvalue[e-1]:C.luaO_nilobject)},tt=function(t,e){let n=t.ci;if(e>0){let r=n.funcOff+e;return S(t,e<=n.top-(n.funcOff+1),"unacceptable index"),r>=t.top?null:r}if(e>i)return S(t,0!==e&&-e<=t.top,"invalid index"),t.top+e;throw Error("attempt to use pseudo-index")},et=function(t,e){let n,r=t.ci.funcOff;e>=0?(S(t,e<=t.stack_last-(r+1),"new top too large"),n=r+1+e):(S(t,-(e+1)<=t.top-(r+1),"invalid new top"),n=t.top+e+1),I.adjust_top(t,n)},nt=function(t,e){et(t,-e-1)},rt=function(t,e,n){for(;e<n;e++,n--){let r=t.stack[e],a=new z(r.type,r.value);C.setobjs2s(t,e,n),C.setobj2s(t,n,a)}},at=function(t,e,n){let r=t.top-1,a=tt(t,e),u=t.stack[a];S(t,$(u)&&e>i,"index not in the stack"),S(t,(n>=0?n:-n)<=r-a+1,"invalid 'n'");let l=n>=0?r-n:a-n-1;rt(t,a,l),rt(t,l+1,t.top-1),rt(t,a,t.top-1)},ut=function(t,e,n){let r=Q(t,e);Q(t,n).setfrom(r)},lt=function(t,e,n){if(q("function"==typeof e),W(n),0===n)t.stack[t.top]=new z(L,e);else{Z(t,n),S(t,n<=P.MAXUPVAL,"upvalue index too large");let r=new J(t,e,n);for(let e=0;e<n;e++)r.upvalue[e].setfrom(t.stack[t.top-n+e]);for(let e=1;e<n;e++)delete t.stack[--t.top];n>0&&--t.top,t.stack[t.top].setclCvalue(r)}Y(t)},st=lt,ot=function(t,e){lt(t,e,0)},it=ot,ct=function(t,e,n){let r=G(t,R(n));Z(t,1),C.pushsvalue2s(t,r),S(t,t.top<=t.ci.top,"stack overflow"),F.settable(t,e,t.stack[t.top-1],t.stack[t.top-2]),delete t.stack[--t.top],delete t.stack[--t.top]},ft=function(t,e){ct(t,H.luaH_getint(t.l_G.l_registry.value,c),e)},_t=function(t,e,n){let r=G(t,R(n));return C.pushsvalue2s(t,r),S(t,t.top<=t.ci.top,"stack overflow"),F.luaV_gettable(t,e,t.stack[t.top-1],t.top-1),t.stack[t.top-1].ttnov()},pt=function(t,e,n){let r=Q(t,e);return W(n),S(t,r.ttistable(),"table expected"),C.pushobj2s(t,H.luaH_getint(r.value,n)),S(t,t.top<=t.ci.top,"stack overflow"),t.stack[t.top-1].ttnov()},ht=function(t,e,n){let r=new C.TValue(E,H.luaH_new(t));t.stack[t.top]=r,Y(t)},dt=function(t,e,n){switch(W(n),e.ttype()){case h:{let t=e.value;return 1<=n&&n<=t.nupvalues?{name:y("",!0),val:t.upvalue[n-1]}:null}case g:{let t=e.value,r=t.p;if(!(1<=n&&n<=r.upvalues.length))return null;let a=r.upvalues[n-1].name;return{name:a?a.getstr():y("(*no name)",!0),val:t.upvals[n-1]}}default:return null}},Lt=function(t,e){let n=Q(t,e);if(!n.ttisstring()){if(!F.cvt2str(n))return null;C.luaO_tostring(t,n)}return n.svalue()},gt=Lt,At=function(t,e){return F.tointeger(Q(t,e))},xt=function(t,e){return F.tonumber(Q(t,e))},Tt=new WeakMap,bt=function(t,e){I.luaD_callnoyield(t,e.funcOff,e.nresults)},Ot=function(t,e){let n=Q(t,e);return $(n)?n.ttnov():b},kt=y("?"),vt=function(t,e,n){S(t,n===r||t.ci.top-t.top>=n-e,"results from function overflow current stack size")},Et=function(t,e,n,a,u){S(t,null===u||!(t.ci.callstatus&D.CIST_LUA),"cannot use continuations inside hooks"),Z(t,e+1),S(t,t.status===N,"cannot do calls on non-normal thread"),vt(t,e,n);let l=t.top-(e+1);null!==u&&0===t.nny?(t.ci.c_k=u,t.ci.c_ctx=a,I.luaD_call(t,l,n)):I.luaD_callnoyield(t,l,n),n===r&&t.ci.top<t.top&&(t.ci.top=t.top)},mt=function(t,e,n,a,u,l){let s,o;S(t,null===l||!(t.ci.callstatus&D.CIST_LUA),"cannot use continuations inside hooks"),Z(t,e+1),S(t,t.status===N,"cannot do calls on non-normal thread"),vt(t,e,n),o=0===a?0:tt(t,a);let i=t.top-(e+1);if(null===l||t.nny>0){let e={funcOff:i,nresults:n};s=I.luaD_pcall(t,bt,e,i,o)}else{let e=t.ci;e.c_k=l,e.c_ctx=u,e.extra=i,e.c_old_errfunc=t.errfunc,t.errfunc=o,e.callstatus&=~D.CIST_OAH|t.allowhook,e.callstatus|=D.CIST_YPCALL,I.luaD_call(t,i,n),e.callstatus&=~D.CIST_YPCALL,t.errfunc=e.c_old_errfunc,s=N}return n===r&&t.ci.top<t.top&&(t.ci.top=t.top),s},Ut=function(t,e,n){let r=Q(t,e);S(t,r.ttisLclosure(),"Lua function expected");let a=r.value;return W(n),S(t,1<=n&&n<=a.p.upvalues.length,"invalid upvalue index"),{f:a,i:n-1}};t.exports.api_incr_top=Y,t.exports.api_checknelems=Z,t.exports.lua_absindex=function(t,e){return e>0||e<=i?e:t.top-t.ci.funcOff+e},t.exports.lua_arith=function(t,e){e!==o&&e!==a?Z(t,2):(Z(t,1),C.pushobj2s(t,t.stack[t.top-1]),S(t,t.top<=t.ci.top,"stack overflow")),C.luaO_arith(t,e,t.stack[t.top-2],t.stack[t.top-1],t.stack[t.top-2]),delete t.stack[--t.top]},t.exports.lua_atpanic=function(t,e){let n=t.l_G.panic;return t.l_G.panic=e,n},t.exports.lua_atnativeerror=function(t,e){let n=t.l_G.atnativeerror;return t.l_G.atnativeerror=e,n},t.exports.lua_call=function(t,e,n){Et(t,e,n,0,null)},t.exports.lua_callk=Et,t.exports.lua_checkstack=function(t,e){let n,r=t.ci;return S(t,e>=0,"negative 'n'"),t.stack_last-t.top>e?n=!0:t.top+D.EXTRA_STACK>j-e?n=!1:(I.luaD_growstack(t,e),n=!0),n&&r.top<t.top+e&&(r.top=t.top+e),n},t.exports.lua_compare=function(t,e,n,r){let a=Q(t,e),o=Q(t,n),i=0;if($(a)&&$(o))switch(r){case u:i=F.luaV_equalobj(t,a,o);break;case s:i=F.luaV_lessthan(t,a,o);break;case l:i=F.luaV_lessequal(t,a,o);break;default:S(t,!1,"invalid option")}return i},t.exports.lua_concat=function(t,e){Z(t,e),e>=2?F.luaV_concat(t,e):0===e&&(C.pushsvalue2s(t,V(t,y("",!0))),S(t,t.top<=t.ci.top,"stack overflow"))},t.exports.lua_copy=ut,t.exports.lua_createtable=ht,t.exports.lua_dump=function(t,e,n,r){Z(t,1);let a=t.stack[t.top-1];return a.ttisLclosure()?M(t,a.value.p,e,n,r):1},t.exports.lua_error=function(t){Z(t,1),w.luaG_errormsg(t)},t.exports.lua_gc=function(){},t.exports.lua_getallocf=function(){return console.warn("lua_getallocf is not available"),0},t.exports.lua_getextraspace=function(){return console.warn("lua_getextraspace is not available"),0},t.exports.lua_getfield=function(t,e,n){return _t(t,Q(t,e),n)},t.exports.lua_getglobal=function(t,e){return _t(t,H.luaH_getint(t.l_G.l_registry.value,c),e)},t.exports.lua_geti=function(t,e,n){let r=Q(t,e);return W(n),t.stack[t.top]=new z(k,n),Y(t),F.luaV_gettable(t,r,t.stack[t.top-1],t.top-1),t.stack[t.top-1].ttnov()},t.exports.lua_getmetatable=function(t,e){let n,r=Q(t,e),a=!1;switch(r.ttnov()){case E:case U:n=r.value.metatable;break;default:n=t.l_G.mt[r.ttnov()]}return null!=n&&(t.stack[t.top]=new z(E,n),Y(t),a=!0),a},t.exports.lua_gettable=function(t,e){let n=Q(t,e);return F.luaV_gettable(t,n,t.stack[t.top-1],t.top-1),t.stack[t.top-1].ttnov()},t.exports.lua_gettop=function(t){return t.top-(t.ci.funcOff+1)},t.exports.lua_getupvalue=function(t,e,n){let r=dt(0,Q(t,e),n);if(r){let e=r.name,n=r.val;return C.pushobj2s(t,n),S(t,t.top<=t.ci.top,"stack overflow"),e}return null},t.exports.lua_getuservalue=function(t,e){let n=Q(t,e);S(t,n.ttisfulluserdata(),"full userdata expected");let r=n.value.uservalue;return t.stack[t.top]=new z(r.type,r.value),Y(t),t.stack[t.top-1].ttnov()},t.exports.lua_insert=function(t,e){at(t,e,1)},t.exports.lua_isboolean=function(t,e){return Ot(t,e)===p},t.exports.lua_iscfunction=function(t,e){let n=Q(t,e);return n.ttislcf(n)||n.ttisCclosure()},t.exports.lua_isfunction=function(t,e){return Ot(t,e)===d},t.exports.lua_isinteger=function(t,e){return Q(t,e).ttisinteger()},t.exports.lua_islightuserdata=function(t,e){return Ot(t,e)===A},t.exports.lua_isnil=function(t,e){return Ot(t,e)===T},t.exports.lua_isnone=function(t,e){return Ot(t,e)===b},t.exports.lua_isnoneornil=function(t,e){return Ot(t,e)<=0},t.exports.lua_isnumber=function(t,e){return!1!==F.tonumber(Q(t,e))},t.exports.lua_isproxy=function(t,e){let n=Tt.get(t);return!!n&&(null===e||e.l_G===n)},t.exports.lua_isstring=function(t,e){let n=Q(t,e);return n.ttisstring()||F.cvt2str(n)},t.exports.lua_istable=function(t,e){return Q(t,e).ttistable()},t.exports.lua_isthread=function(t,e){return Ot(t,e)===m},t.exports.lua_isuserdata=function(t,e){let n=Q(t,e);return n.ttisfulluserdata(n)||n.ttislightuserdata()},t.exports.lua_len=function(t,e){let n=Q(t,e),r=new z;F.luaV_objlen(t,r,n),t.stack[t.top]=r,Y(t)},t.exports.lua_load=function(t,e,n,r,a){r=r?R(r):kt,null!==a&&(a=R(a));let u=new X(t,e,n),l=I.luaD_protectedparser(t,u,r,a);if(l===N){let e=t.stack[t.top-1].value;if(e.nupvalues>=1){let n=H.luaH_getint(t.l_G.l_registry.value,c);e.upvals[0].setfrom(n)}}return l},t.exports.lua_newtable=function(t){ht(t)},t.exports.lua_newuserdata=function(t,e){let n=function(t,e){return new C.Udata(t,e)}(t,e);return t.stack[t.top]=new C.TValue(U,n),Y(t),n.data},t.exports.lua_next=function(t,e){let n=Q(t,e);return S(t,n.ttistable(),"table expected"),t.stack[t.top]=new z,H.luaH_next(t,n.value,t.top-1)?(Y(t),1):(delete t.stack[t.top],delete t.stack[--t.top],0)},t.exports.lua_pcall=function(t,e,n,r){return mt(t,e,n,r,0,null)},t.exports.lua_pcallk=mt,t.exports.lua_pop=nt,t.exports.lua_pushboolean=function(t,e){t.stack[t.top]=new z(p,!!e),Y(t)},t.exports.lua_pushcclosure=lt,t.exports.lua_pushcfunction=ot,t.exports.lua_pushfstring=function(t,e,...n){return e=R(e),C.luaO_pushvfstring(t,e,n)},t.exports.lua_pushglobaltable=function(t){pt(t,i,c)},t.exports.lua_pushinteger=function(t,e){W(e),t.stack[t.top]=new z(k,e),Y(t)},t.exports.lua_pushjsclosure=st,t.exports.lua_pushjsfunction=it,t.exports.lua_pushlightuserdata=function(t,e){t.stack[t.top]=new z(A,e),Y(t)},t.exports.lua_pushliteral=function(t,e){if(null==e)t.stack[t.top]=new z(T,null),t.top++;else{q("string"==typeof e);let n=B(t,e);C.pushsvalue2s(t,n),e=n.getstr()}return S(t,t.top<=t.ci.top,"stack overflow"),e},t.exports.lua_pushlstring=function(t,e,n){let r;return W(n),0===n?(e=y("",!0),r=V(t,e)):(e=R(e),S(t,e.length>=n,"invalid length to lua_pushlstring"),r=G(t,e.subarray(0,n))),C.pushsvalue2s(t,r),S(t,t.top<=t.ci.top,"stack overflow"),r.value},t.exports.lua_pushnil=function(t){t.stack[t.top]=new z(T,null),Y(t)},t.exports.lua_pushnumber=function(t,e){q("number"==typeof e),t.stack[t.top]=new z(O,e),Y(t)},t.exports.lua_pushstring=function(t,e){if(null==e)t.stack[t.top]=new z(T,null),t.top++;else{let n=G(t,R(e));C.pushsvalue2s(t,n),e=n.getstr()}return S(t,t.top<=t.ci.top,"stack overflow"),e},t.exports.lua_pushthread=function(t){return t.stack[t.top]=new z(m,t),Y(t),t.l_G.mainthread===t},t.exports.lua_pushvalue=function(t,e){C.pushobj2s(t,Q(t,e)),S(t,t.top<=t.ci.top,"stack overflow")},t.exports.lua_pushvfstring=function(t,e,n){return e=R(e),C.luaO_pushvfstring(t,e,n)},t.exports.lua_rawequal=function(t,e,n){let r=Q(t,e),a=Q(t,n);return $(r)&&$(a)?F.luaV_equalobj(null,r,a):0},t.exports.lua_rawget=function(t,e){let n=Q(t,e);return S(t,n.ttistable(n),"table expected"),C.setobj2s(t,t.top-1,H.luaH_get(t,n.value,t.stack[t.top-1])),t.stack[t.top-1].ttnov()},t.exports.lua_rawgeti=pt,t.exports.lua_rawgetp=function(t,e,n){let r=Q(t,e);S(t,r.ttistable(),"table expected");let a=new z(A,n);return C.pushobj2s(t,H.luaH_get(t,r.value,a)),S(t,t.top<=t.ci.top,"stack overflow"),t.stack[t.top-1].ttnov()},t.exports.lua_rawlen=function(t,e){let n=Q(t,e);switch(n.ttype()){case v:case x:return n.vslen();case U:return n.value.len;case E:return H.luaH_getn(n.value);default:return 0}},t.exports.lua_rawset=function(t,e){Z(t,2);let n=Q(t,e);S(t,n.ttistable(),"table expected");let r=t.stack[t.top-2],a=t.stack[t.top-1];H.luaH_setfrom(t,n.value,r,a),H.invalidateTMcache(n.value),delete t.stack[--t.top],delete t.stack[--t.top]},t.exports.lua_rawseti=function(t,e,n){W(n),Z(t,1);let r=Q(t,e);S(t,r.ttistable(),"table expected"),H.luaH_setint(r.value,n,t.stack[t.top-1]),delete t.stack[--t.top]},t.exports.lua_rawsetp=function(t,e,n){Z(t,1);let r=Q(t,e);S(t,r.ttistable(),"table expected");let a=new z(A,n),u=t.stack[t.top-1];H.luaH_setfrom(t,r.value,a,u),delete t.stack[--t.top]},t.exports.lua_register=function(t,e,n){ot(t,n),ft(t,e)},t.exports.lua_remove=function(t,e){at(t,e,-1),nt(t,1)},t.exports.lua_replace=function(t,e){ut(t,-1,e),nt(t,1)},t.exports.lua_rotate=at,t.exports.lua_setallocf=function(){return console.warn("lua_setallocf is not available"),0},t.exports.lua_setfield=function(t,e,n){ct(t,Q(t,e),n)},t.exports.lua_setglobal=ft,t.exports.lua_seti=function(t,e,n){W(n),Z(t,1);let r=Q(t,e);t.stack[t.top]=new z(k,n),Y(t),F.settable(t,r,t.stack[t.top-1],t.stack[t.top-2]),delete t.stack[--t.top],delete t.stack[--t.top]},t.exports.lua_setmetatable=function(t,e){let n;Z(t,1);let r=Q(t,e);switch(t.stack[t.top-1].ttisnil()?n=null:(S(t,t.stack[t.top-1].ttistable(),"table expected"),n=t.stack[t.top-1].value),r.ttnov()){case U:case E:r.value.metatable=n;break;default:t.l_G.mt[r.ttnov()]=n}return delete t.stack[--t.top],!0},t.exports.lua_settable=function(t,e){Z(t,2);let n=Q(t,e);F.settable(t,n,t.stack[t.top-2],t.stack[t.top-1]),delete t.stack[--t.top],delete t.stack[--t.top]},t.exports.lua_settop=et,t.exports.lua_setupvalue=function(t,e,n){let r=Q(t,e);Z(t,1);let a=dt(0,r,n);if(a){let e=a.name;return a.val.setfrom(t.stack[t.top-1]),delete t.stack[--t.top],e}return null},t.exports.lua_setuservalue=function(t,e){Z(t,1);let n=Q(t,e);S(t,n.ttisfulluserdata(),"full userdata expected"),n.value.uservalue.setfrom(t.stack[t.top-1]),delete t.stack[--t.top]},t.exports.lua_status=function(t){return t.status},t.exports.lua_stringtonumber=function(t,e){let n=new z,r=C.luaO_str2num(e,n);return 0!==r&&(t.stack[t.top]=n,Y(t)),r},t.exports.lua_toboolean=function(t,e){return!Q(t,e).l_isfalse()},t.exports.lua_tocfunction=function(t,e){let n=Q(t,e);return n.ttislcf()||n.ttisCclosure()?n.value:null},t.exports.lua_todataview=function(t,e){let n=Lt(t,e);return new DataView(n.buffer,n.byteOffset,n.byteLength)},t.exports.lua_tointeger=function(t,e){let n=At(t,e);return!1===n?0:n},t.exports.lua_tointegerx=At,t.exports.lua_tojsstring=function(t,e){let n=Q(t,e);if(!n.ttisstring()){if(!F.cvt2str(n))return null;C.luaO_tostring(t,n)}return n.jsstring()},t.exports.lua_tolstring=Lt,t.exports.lua_tonumber=function(t,e){let n=xt(t,e);return!1===n?0:n},t.exports.lua_tonumberx=xt,t.exports.lua_topointer=function(t,e){let n=Q(t,e);switch(n.ttype()){case E:case g:case h:case L:case m:case U:case A:return n.value;default:return null}},t.exports.lua_toproxy=function(t,e){let n=Q(t,e);return function(t,e,n){let r=function(r){S(r,r instanceof D.lua_State&&t===r.l_G,"must be from same global state"),r.stack[r.top]=new z(e,n),Y(r)};return Tt.set(r,t),r}(t.l_G,n.type,n.value)},t.exports.lua_tostring=gt,t.exports.lua_tothread=function(t,e){let n=Q(t,e);return n.ttisthread()?n.value:null},t.exports.lua_touserdata=function(t,e){let n=Q(t,e);switch(n.ttnov()){case U:return n.value.data;case A:return n.value;default:return null}},t.exports.lua_type=Ot,t.exports.lua_typename=function(t,e){return S(t,b<=e&&e<_,"invalid tag"),K.ttypename(e)},t.exports.lua_upvalueid=function(t,e,n){let r=Q(t,e);switch(r.ttype()){case g:{let r=Ut(t,e,n);return r.f.upvals[r.i]}case h:{let e=r.value;return S(t,(0|n)===n&&n>0&&n<=e.nupvalues,"invalid upvalue index"),e.upvalue[n-1]}default:return S(t,!1,"closure expected"),null}},t.exports.lua_upvaluejoin=function(t,e,n,r,a){let u=Ut(t,e,n),l=Ut(t,r,a),s=l.f.upvals[l.i];u.f.upvals[u.i]=s},t.exports.lua_version=function(t){return null===t?f:t.l_G.version},t.exports.lua_xmove=function(t,e,n){if(t!==e){Z(t,n),S(t,t.l_G===e.l_G,"moving among independent states"),S(t,e.ci.top-e.top>=n,"stack overflow"),t.top-=n;for(let r=0;r<n;r++)e.stack[e.top]=new C.TValue,C.setobj2s(e,e.top,t.stack[t.top+r]),delete t.stack[t.top+r],e.top++}}},function(t,e,n){"use strict";const{lua_assert:r}=n(4),a=function(t){let e=t.reader(t.L,t.data);if(null===e)return-1;r(e instanceof Uint8Array,"Should only load binary of array of bytes");let n=e.length;return 0===n?-1:(t.buffer=e,t.off=0,t.n=n-1,t.buffer[t.off++])};t.exports.EOZ=-1,t.exports.luaZ_buffer=function(t){return t.buffer.subarray(0,t.n)},t.exports.luaZ_buffremove=function(t,e){t.n-=e},t.exports.luaZ_fill=a,t.exports.luaZ_read=function(t,e,n,r){for(;r;){if(0===t.n){if(-1===a(t))return r;t.n++,t.off--}let u=r<=t.n?r:t.n;for(let r=0;r<u;r++)e[n++]=t.buffer[t.off++];t.n-=u,0===t.n&&(t.buffer=null),r-=u}return 0},t.exports.luaZ_resetbuffer=function(t){t.n=0},t.exports.luaZ_resizebuffer=function(t,e,n){let r=new Uint8Array(n);e.buffer&&r.set(e.buffer),e.buffer=r},t.exports.MBuffer=class{constructor(){this.buffer=null,this.n=0}},t.exports.ZIO=class{constructor(t,e,n){this.L=t,r("function"==typeof e,"ZIO requires a reader"),this.reader=e,this.data=n,this.n=0,this.buffer=null,this.off=0}zgetc(){return this.n-- >0?this.buffer[this.off++]:a(this)}}},function(t,e,n){"use strict";const{constant_types:{LUA_TBOOLEAN:r,LUA_TLNGSTR:a},thread_status:{LUA_ERRSYNTAX:u},to_luastring:l}=n(1),{LUA_MINBUFFER:s,MAX_INT:o,lua_assert:i}=n(4),c=n(11),f=n(8),{lisdigit:_,lislalnum:p,lislalpha:h,lisspace:d,lisxdigit:L}=n(22),g=n(6),{luaS_bless:A,luaS_hash:x,luaS_hashlongstr:T,luaS_new:b}=n(10),O=n(9),{EOZ:k,luaZ_buffer:v,luaZ_buffremove:E,luaZ_resetbuffer:m,luaZ_resizebuffer:U}=n(19),N=l("_ENV",!0),R=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"].map((t,e)=>l(t));class y{constructor(){this.r=NaN,this.i=NaN,this.ts=null}}class S{constructor(){this.token=NaN,this.seminfo=new y}}const w=function(t,e){let n=t.buff;if(n.n+1>n.buffer.length){n.buffer.length>=o/2&&F(t,l("lexical element too long",!0),0);let e=2*n.buffer.length;U(t.L,n,e)}n.buffer[n.n++]=e<0?255+e+1:e},I=function(t,e){if(e<257)return g.luaO_pushfstring(t.L,l("'%c'",!0),e);{let n=R[e-257];return e<289?g.luaO_pushfstring(t.L,l("'%s'",!0),n):n}},M=function(t){return 10===t.current||13===t.current},P=function(t){t.current=t.z.zgetc()},C=function(t){w(t,t.current),P(t)},D=new g.TValue(r,!0),V=function(t,e){let n=t.L,r=b(n,e),u=t.h.strong.get(T(r));if(u)r=u.key.tsvalue();else{let e=new g.TValue(a,r);O.luaH_setfrom(n,t.h,e,D)}return r},G=function(t){let e=t.current;i(M(t)),P(t),M(t)&&t.current!==e&&P(t),++t.linenumber>=o&&F(t,l("chunk has too many lines",!0),0)},B=function(t,e){return t.current===e&&(P(t),!0)},K=function(t,e){return(t.current===e[0].charCodeAt(0)||t.current===e[1].charCodeAt(0))&&(C(t),!0)},j=function(t,e){let n="Ee",r=t.current;for(i(_(t.current)),C(t),48===r&&K(t,"xX")&&(n="Pp");;)if(K(t,n)&&K(t,"-+"),L(t.current))C(t);else{if(46!==t.current)break;C(t)}let a=new g.TValue;return 0===g.luaO_str2num(v(t.buff),a)&&F(t,l("malformed number",!0),290),a.ttisinteger()?(e.i=a.value,291):(i(a.ttisfloat()),e.r=a.value,290)},F=function(t,e,n){e=c.luaG_addinfo(t.L,e,t.source,t.linenumber),n&&g.luaO_pushfstring(t.L,l("%s near %s"),e,function(t,e){switch(e){case 292:case 293:case 290:case 291:return g.luaO_pushfstring(t.L,l("'%s'",!0),v(t.buff));default:return I(t,e)}}(t,n)),f.luaD_throw(t.L,u)},H=function(t){let e=0,n=t.current;for(i(91===n||93===n),C(t);61===t.current;)C(t),e++;return t.current===n?e:-e-1},X=function(t,e,n){let r=t.linenumber;C(t),M(t)&&G(t);let a=!1;for(;!a;)switch(t.current){case k:F(t,l(`unfinished long ${e?"string":"comment"} (starting at line ${r})`),289);break;case 93:H(t)===n&&(C(t),a=!0);break;case 10:case 13:w(t,10),G(t),e||m(t.buff);break;default:e?C(t):P(t)}e&&(e.ts=V(t,t.buff.buffer.subarray(2+n,t.buff.n-(2+n))))},z=function(t,e,n){e||(t.current!==k&&C(t),F(t,n,293))},J=function(t){return C(t),z(t,L(t.current),l("hexadecimal digit expected",!0)),g.luaO_hexavalue(t.current)},Y=function(t){let e=J(t);return e=(e<<4)+J(t),E(t.buff,2),e},Z=function(t){let e=new Uint8Array(g.UTF8BUFFSZ),n=g.luaO_utf8esc(e,function(t){let e=4;C(t),z(t,123===t.current,l("missing '{'",!0));let n=J(t);for(C(t);L(t.current);)e++,n=(n<<4)+g.luaO_hexavalue(t.current),z(t,n<=1114111,l("UTF-8 value too large",!0)),C(t);return z(t,125===t.current,l("missing '}'",!0)),P(t),E(t.buff,e),n}(t));for(;n>0;n--)w(t,e[g.UTF8BUFFSZ-n])},q=function(t){let e,n=0;for(e=0;e<3&&_(t.current);e++)n=10*n+t.current-48,C(t);return z(t,n<=255,l("decimal escape too large",!0)),E(t.buff,e),n},W=function(t,e,n){for(C(t);t.current!==e;)switch(t.current){case k:F(t,l("unfinished string",!0),289);break;case 10:case 13:F(t,l("unfinished string",!0),293);break;case 92:{let e,n;switch(C(t),t.current){case 97:n=7,e="read_save";break;case 98:n=8,e="read_save";break;case 102:n=12,e="read_save";break;case 110:n=10,e="read_save";break;case 114:n=13,e="read_save";break;case 116:n=9,e="read_save";break;case 118:n=11,e="read_save";break;case 120:n=Y(t),e="read_save";break;case 117:Z(t),e="no_save";break;case 10:case 13:G(t),n=10,e="only_save";break;case 92:case 34:case 39:n=t.current,e="read_save";break;case k:e="no_save";break;case 122:for(E(t.buff,1),P(t);d(t.current);)M(t)?G(t):P(t);e="no_save";break;default:z(t,_(t.current),l("invalid escape sequence",!0)),n=q(t),e="only_save"}"read_save"===e&&P(t),"read_save"!==e&&"only_save"!==e||(E(t.buff,1),w(t,n));break}default:C(t)}C(t),n.ts=V(t,t.buff.buffer.subarray(1,t.buff.n-1))},$=Object.create(null);R.forEach((t,e)=>$[x(t)]=e);const Q=function(t,e){for(m(t.buff);;)switch(i("number"==typeof t.current),t.current){case 10:case 13:G(t);break;case 32:case 12:case 9:case 11:P(t);break;case 45:if(P(t),45!==t.current)return 45;if(P(t),91===t.current){let e=H(t);if(m(t.buff),e>=0){X(t,null,e),m(t.buff);break}}for(;!M(t)&&t.current!==k;)P(t);break;case 91:{let n=H(t);return n>=0?(X(t,e,n),293):(-1!==n&&F(t,l("invalid long string delimiter",!0),293),91)}case 61:return P(t),B(t,61)?282:61;case 60:return P(t),B(t,61)?284:B(t,60)?286:60;case 62:return P(t),B(t,61)?283:B(t,62)?287:62;case 47:return P(t),B(t,47)?279:47;case 126:return P(t),B(t,61)?285:126;case 58:return P(t),B(t,58)?288:58;case 34:case 39:return W(t,t.current,e),293;case 46:return C(t),B(t,46)?B(t,46)?281:280:_(t.current)?j(t,e):46;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return j(t,e);case k:return 289;default:if(h(t.current)){do{C(t)}while(p(t.current));let n=V(t,v(t.buff));e.ts=n;let r=$[T(n)];return void 0!==r&&r<=22?r+257:292}{let e=t.current;return P(t),e}}};t.exports.FIRST_RESERVED=257,t.exports.LUA_ENV=N,t.exports.LexState=class{constructor(){this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new S,this.lookahead=new S,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null}},t.exports.RESERVED={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:289,TK_FLT:290,TK_INT:291,TK_NAME:292,TK_STRING:293},t.exports.isreserved=function(t){let e=$[T(t)];return void 0!==e&&e<=22},t.exports.luaX_lookahead=function(t){return i(289===t.lookahead.token),t.lookahead.token=Q(t,t.lookahead.seminfo),t.lookahead.token},t.exports.luaX_newstring=V,t.exports.luaX_next=function(t){t.lastline=t.linenumber,289!==t.lookahead.token?(t.t.token=t.lookahead.token,t.t.seminfo.i=t.lookahead.seminfo.i,t.t.seminfo.r=t.lookahead.seminfo.r,t.t.seminfo.ts=t.lookahead.seminfo.ts,t.lookahead.token=289):t.t.token=Q(t,t.t.seminfo)},t.exports.luaX_setinput=function(t,e,n,r,a){e.t={token:0,seminfo:new y},e.L=t,e.current=a,e.lookahead={token:289,seminfo:new y},e.z=n,e.fs=null,e.linenumber=1,e.lastline=1,e.source=r,e.envn=A(t,N),U(t,e.buff,s)},t.exports.luaX_syntaxerror=function(t,e){F(t,e,t.t.token)},t.exports.luaX_token2str=I,t.exports.luaX_tokens=R},function(t,e,n){"use strict";const{lua:r,lauxlib:a,lualib:u,to_luastring:l}=n(0),{LUA_MULTRET:s,LUA_OK:o,LUA_REGISTRYINDEX:i,LUA_RIDX_MAINTHREAD:c,LUA_TBOOLEAN:f,LUA_TFUNCTION:_,LUA_TLIGHTUSERDATA:p,LUA_TNIL:h,LUA_TNONE:d,LUA_TNUMBER:L,LUA_TSTRING:g,LUA_TTABLE:A,LUA_TTHREAD:x,LUA_TUSERDATA:T,lua_atnativeerror:b,lua_call:O,lua_getfield:k,lua_gettable:v,lua_gettop:E,lua_isnil:m,lua_isproxy:U,lua_newuserdata:N,lua_pcall:R,lua_pop:y,lua_pushboolean:S,lua_pushcfunction:w,lua_pushinteger:I,lua_pushlightuserdata:M,lua_pushliteral:P,lua_pushnil:C,lua_pushnumber:D,lua_pushstring:V,lua_pushvalue:G,lua_rawgeti:B,lua_rawgetp:K,lua_rawsetp:j,lua_rotate:F,lua_setfield:H,lua_settable:X,lua_settop:z,lua_toboolean:J,lua_tojsstring:Y,lua_tonumber:Z,lua_toproxy:q,lua_tothread:W,lua_touserdata:$,lua_type:Q}=r,{luaL_argerror:tt,luaL_checkany:et,luaL_checkoption:nt,luaL_checkstack:rt,luaL_checkudata:at,luaL_error:ut,luaL_getmetafield:lt,luaL_newlib:st,luaL_newmetatable:ot,luaL_requiref:it,luaL_setfuncs:ct,luaL_setmetatable:ft,luaL_testudata:_t,luaL_tolstring:pt}=a,{luaopen_base:ht}=u,dt="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:(0,eval)("this");let Lt,gt,At;if("undefined"!=typeof Reflect)Lt=Reflect.apply,gt=Reflect.construct,At=Reflect.deleteProperty;else{const t=Function.apply,e=Function.bind;Lt=function(e,n,r){return t.call(e,n,r)},gt=function(t,n){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}let r=[null];return r.push.apply(r,n),new(e.apply(t,r))},At=Function("t","k","delete t[k]")}const xt=String.prototype.concat.bind(""),Tt=function(t){return"object"==typeof t?null!==t:"function"==typeof t},bt=l("js object"),Ot=function(t,e){let n=_t(t,e,bt);return n?n.data:void 0},kt=function(t,e){return at(t,e,bt).data},vt=function(t,e){N(t).data=e,ft(t,bt)},Et=function(t){B(t,i,c);let e=W(t,-1);return y(t,1),e},mt=new WeakMap,Ut=function(t,e){switch(typeof e){case"undefined":C(t);break;case"number":D(t,e);break;case"string":V(t,l(e));break;case"boolean":S(t,e);break;case"symbol":M(t,e);break;case"function":if(U(e,t)){e(t);break}case"object":if(null===e){if(K(t,i,null)!==T)throw Error("js library not loaded into lua_State");break}default:{let n=mt.get(Et(t));if(!n)throw Error("js library not loaded into lua_State");let r=n.get(e);r?r(t):(vt(t,e),r=q(t,-1),n.set(e,r))}}},Nt=function(t){let e=$(t,1);return Ut(t,e),1},Rt=function(t,e){switch(Q(t,e)){case d:case h:return;case f:return J(t,e);case p:return $(t,e);case L:return Z(t,e);case g:return Y(t,e);case T:{let n=Ot(t,e);if(void 0!==n)return n}case A:case _:case x:default:return Gt(t,q(t,e))}},yt=function(t,e){let n=R(t,e,1,0),r=Rt(t,-1);switch(y(t,1),n){case o:return r;default:throw r}},St=function(t,e,n,r,a){if(!Tt(r))throw new TypeError("`args` argument must be an object");let u=+r.length;u>=0||(u=0),rt(t,2+u,null);let l=E(t);e(t),Ut(t,n);for(let s=0;s<u;s++)Ut(t,r[s]);switch(R(t,1+u,a,0)){case o:{let e=E(t)-l,n=new Array(e);for(let r=0;r<e;r++)n[r]=Rt(t,l+r+1);return z(t,l),n}default:{let e=Rt(t,-1);throw z(t,l),e}}},wt=function(t){return v(t,1),1},It=function(t,e,n){return rt(t,3,null),w(t,wt),e(t),Ut(t,n),yt(t,2)},Mt=function(t,e,n){switch(rt(t,3,null),w(t,wt),e(t),Ut(t,n),R(t,2,1,0)){case o:{let e=m(t,-1);return y(t,1),!e}default:{let e=Rt(t,-1);throw y(t,1),e}}},Pt=function(t,e,n,r){switch(rt(t,4,null),w(t,(function(t){return X(t,1),0})),e(t),Ut(t,n),Ut(t,r),R(t,3,0,0)){case o:return;default:{let e=Rt(t,-1);throw y(t,1),e}}},Ct=function(t,e,n){switch(rt(t,4,null),w(t,(function(t){return X(t,1),0})),e(t),Ut(t,n),C(t),R(t,3,0,0)){case o:return;default:{let e=Rt(t,-1);throw y(t,1),e}}},Dt=function(t,e){return rt(t,2,null),w(t,(function(t){return pt(t,1),1})),e(t),yt(t,1)},Vt=function(){let t=this.L;rt(t,3,null);let e=E(t);switch(this.iter(t),this.state(t),this.last(t),R(t,2,s,0)){case o:{let n;if(this.last=q(t,e+1),m(t,-1))n={done:!0,value:void 0};else{let r=E(t)-e,a=new Array(r);for(let n=0;n<r;n++)a[n]=Rt(t,e+n+1);n={done:!1,value:a}}return z(t,e),n}default:{let e=Rt(t,-1);throw y(t,1),e}}},Gt=function(t,e){const n=Et(t);let r=function(){return St(n,e,this,arguments,1)[0]};r.apply=function(t,r){return St(n,e,t,r,1)[0]},r.invoke=function(t,r){return St(n,e,t,r,s)},r.get=function(t){return It(n,e,t)},r.has=function(t){return Mt(n,e,t)},r.set=function(t,r){return Pt(n,e,t,r)},r.delete=function(t){return Ct(n,e,t)},r.toString=function(){return Dt(n,e)},"function"==typeof Symbol&&(r[Symbol.toStringTag]="Fengari object",r[Symbol.iterator]=function(){return function(t,e){switch(rt(t,1,null),w(t,(function(t){return it(t,l("_G"),ht,0),k(t,-1,l("pairs")),e(t),O(t,1,3),3})),R(t,0,3,0)){case o:{let e=q(t,-3),n=q(t,-2),r=q(t,-1);return y(t,3),{L:t,iter:e,state:n,last:r,next:Vt}}default:{let e=Rt(t,-1);throw y(t,1),e}}}(n,e)},Symbol.toPrimitive&&(r[Symbol.toPrimitive]=function(t){if("string"===t)return Dt(n,e)}));let a=mt.get(n);if(!a)throw Error("js library not loaded into lua_State");return a.set(r,e),r},Bt={new:function(t){let e=Rt(t,1),n=E(t)-1,r=new Array(n);for(let a=0;a<n;a++)r[a]=Rt(t,a+2);return Ut(t,gt(e,r)),1},tonumber:function(t){let e=Rt(t,1);return D(t,+e),1},tostring:function(t){let e=Rt(t,1);return P(t,xt(e)),1},instanceof:function(t){let e=Rt(t,1),n=Rt(t,2);return S(t,e instanceof n),1},typeof:function(t){let e=Rt(t,1);return P(t,typeof e),1}};if("function"==typeof Symbol&&Symbol.iterator){const t=function(t,e){let n=kt(t,e),r=n[Symbol.iterator];r||tt(t,e,l("object not iterable"));let a=Lt(r,n,[]);return Tt(a)||tt(t,e,l("Result of the Symbol.iterator method is not an object")),a},e=function(t){let e=Rt(t,1).next();return e.done?0:(Ut(t,e.value),1)};Bt.of=function(n){let r=t(n,1);return w(n,e),Ut(n,r),2}}if("function"==typeof Proxy&&"function"==typeof Symbol){const t=Symbol("lua_State"),e=Symbol("fengari-proxy"),n={apply:function(n,r,a){return St(n[t],n[e],r,a,1)[0]},construct:function(n,r){let a=n[t],u=n[e],s=r.length;rt(a,2+s,null),u(a);let o=E(a);if(lt(a,o,l("construct"))===h)throw y(a,1),new TypeError("not a constructor");F(a,o,1);for(let t=0;t<s;t++)Ut(a,r[t]);return yt(a,1+s)},defineProperty:function(n,r,a){let u=n[t],s=n[e];return rt(u,4,null),s(u),lt(u,-1,l("defineProperty"))===h?(y(u,1),!1):(F(u,-2,1),Ut(u,r),Ut(u,a),yt(u,3))},deleteProperty:function(n,r){return Ct(n[t],n[e],r)},get:function(n,r){return It(n[t],n[e],r)},getOwnPropertyDescriptor:function(n,r){let a=n[t],u=n[e];if(rt(a,3,null),u(a),lt(a,-1,l("getOwnPropertyDescriptor"))!==h)return F(a,-2,1),Ut(a,r),yt(a,2);y(a,1)},getPrototypeOf:function(n){let r=n[t],a=n[e];return rt(r,2,null),a(r),lt(r,-1,l("getPrototypeOf"))===h?(y(r,1),null):(F(r,-2,1),yt(r,1))},has:function(n,r){return Mt(n[t],n[e],r)},ownKeys:function(n){let r=n[t],a=n[e];if(rt(r,2,null),a(r),lt(r,-1,l("ownKeys"))===h)throw y(r,1),Error("ownKeys unknown for fengari object");return F(r,-2,1),yt(r,1)},set:function(n,r,a){return Pt(n[t],n[e],r,a),!0},setPrototypeOf:function(n,r){let a=n[t],u=n[e];return rt(a,3,null),u(a),lt(a,-1,l("setPrototypeOf"))===h?(y(a,1),!1):(F(a,-2,1),Ut(a,r),yt(a,2))}},r=function(){let t=function(){}.bind();return delete t.length,delete t.name,t},a=Function("return ()=>void 0;"),u=function(){let t=a();return delete t.length,delete t.name,t},s=function(a,l,s){const o=Et(a);let i;switch(s){case"function":i=r();break;case"arrow_function":i=u();break;case"object":i={};break;default:throw TypeError("invalid type to createproxy")}return i[e]=l,i[t]=o,new Proxy(i,n)},o=["function","arrow_function","object"],i=o.map(t=>l(t));Bt.createproxy=function(t){et(t,1);let e=o[nt(t,2,i[0],i)],n=s(t,q(t,1),e);return Ut(t,n),1}}let Kt={__index:function(t){let e=kt(t,1),n=Rt(t,2);return Ut(t,e[n]),1},__newindex:function(t){let e=kt(t,1),n=Rt(t,2),r=Rt(t,3);return void 0===r?At(e,n):e[n]=r,0},__tostring:function(t){let e=kt(t,1),n=xt(e);return V(t,l(n)),1},__call:function(t){let e,n=kt(t,1),r=E(t)-1,a=new Array(Math.max(0,r-1));if(r>0&&(e=Rt(t,2),r-- >0))for(let u=0;u<r;u++)a[u]=Rt(t,u+3);return Ut(t,Lt(n,e,a)),1},__pairs:function(t){let e,n,r,a,u=kt(t,1);if("function"!=typeof Symbol||void 0===(e=u[Symbol.for("__pairs")]))n=function(t){if(this.index>=this.keys.length)return;let e=this.keys[this.index++];return[e,this.object[e]]},r={object:u,keys:Object.keys(u),index:0};else{let s=Lt(e,u,[]);void 0===s&&ut(t,l("bad '__pairs' result (object with keys 'iter', 'state', 'first' expected)")),void 0===(n=s.iter)&&ut(t,l("bad '__pairs' result (object.iter is missing)")),r=s.state,a=s.first}return w(t,(function(){let e=Rt(t,1),r=Rt(t,2),a=Lt(n,e,[r]);if(void 0===a)return 0;Array.isArray(a)||ut(t,l("bad iterator result (Array or undefined expected)")),rt(t,a.length,null);for(let n=0;n<a.length;n++)Ut(t,a[n]);return a.length})),Ut(t,r),Ut(t,a),3},__len:function(t){let e,n,r=kt(t,1);return n="function"!=typeof Symbol||void 0===(e=r[Symbol.for("__len")])?r.length:Lt(e,r,[]),Ut(t,n),1}};t.exports.FENGARI_INTEROP_VERSION="0.1",t.exports.FENGARI_INTEROP_VERSION_NUM=1,t.exports.FENGARI_INTEROP_RELEASE="0.1.2",t.exports.checkjs=kt,t.exports.testjs=Ot,t.exports.pushjs=vt,t.exports.push=Ut,t.exports.tojs=Rt,t.exports.luaopen_js=function(t){return mt.set(Et(t),new WeakMap),b(t,Nt),st(t,Bt),P(t,"0.1"),H(t,-2,l("_VERSION")),I(t,1),H(t,-2,l("_VERSION_NUM")),P(t,"0.1.2"),H(t,-2,l("_RELEASE")),ot(t,bt),ct(t,Kt,0),y(t,1),vt(t,null),G(t,-1),j(t,i,null),H(t,-2,l("null")),Ut(t,dt),H(t,-2,l("global")),1}},function(t,e,n){"use strict";const{luastring_of:r}=n(1),a=r(0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,22,22,22,22,22,22,22,22,22,22,4,4,4,4,4,4,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,5,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);t.exports.lisdigit=function(t){return 0!=(2&a[t+1])},t.exports.lislalnum=function(t){return 0!=(3&a[t+1])},t.exports.lislalpha=function(t){return 0!=(1&a[t+1])},t.exports.lisprint=function(t){return 0!=(4&a[t+1])},t.exports.lisspace=function(t){return 0!=(8&a[t+1])},t.exports.lisxdigit=function(t){return 0!=(16&a[t+1])}},function(t,e,n){"use strict";const{LUA_MULTRET:r,to_luastring:a}=n(1),{BinOpr:{OPR_ADD:u,OPR_AND:l,OPR_BAND:s,OPR_BOR:o,OPR_BXOR:i,OPR_CONCAT:c,OPR_DIV:f,OPR_EQ:_,OPR_GE:p,OPR_GT:h,OPR_IDIV:d,OPR_LE:L,OPR_LT:g,OPR_MOD:A,OPR_MUL:x,OPR_NE:T,OPR_NOBINOPR:b,OPR_OR:O,OPR_POW:k,OPR_SHL:v,OPR_SHR:E,OPR_SUB:m},UnOpr:{OPR_BNOT:U,OPR_LEN:N,OPR_MINUS:R,OPR_NOT:y,OPR_NOUNOPR:S},NO_JUMP:w,getinstruction:I,luaK_checkstack:M,luaK_codeABC:P,luaK_codeABx:C,luaK_codeAsBx:D,luaK_codek:V,luaK_concat:G,luaK_dischargevars:B,luaK_exp2RK:K,luaK_exp2anyreg:j,luaK_exp2anyregup:F,luaK_exp2nextreg:H,luaK_exp2val:X,luaK_fixline:z,luaK_getlabel:J,luaK_goiffalse:Y,luaK_goiftrue:Z,luaK_indexed:q,luaK_infix:W,luaK_intK:$,luaK_jump:Q,luaK_jumpto:tt,luaK_nil:et,luaK_patchclose:nt,luaK_patchlist:rt,luaK_patchtohere:at,luaK_posfix:ut,luaK_prefix:lt,luaK_reserveregs:st,luaK_ret:ot,luaK_self:it,luaK_setlist:ct,luaK_setmultret:ft,luaK_setoneret:_t,luaK_setreturns:pt,luaK_storevar:ht,luaK_stringK:dt}=n(35),Lt=n(8),gt=n(13),At=n(20),{LUAI_MAXCCALLS:xt,MAX_INT:Tt,lua_assert:bt}=n(4),Ot=n(6),{OpCodesI:{OP_CALL:kt,OP_CLOSURE:vt,OP_FORLOOP:Et,OP_FORPREP:mt,OP_GETUPVAL:Ut,OP_MOVE:Nt,OP_NEWTABLE:Rt,OP_SETTABLE:yt,OP_TAILCALL:St,OP_TFORCALL:wt,OP_TFORLOOP:It,OP_VARARG:Mt},LFIELDS_PER_FLUSH:Pt,SETARG_B:Ct,SETARG_C:Dt,SET_OPCODE:Vt}=n(16),{luaS_eqlngstr:Gt,luaS_new:Bt,luaS_newliteral:Kt}=n(10),jt=n(9),Ft=gt.Proto,Ht=At.RESERVED,Xt=function(t){return t===Yt.VCALL||t===Yt.VVARARG},zt=function(t,e){return Gt(t,e)};class Jt{constructor(){this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN}}const Yt={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14};class Zt{constructor(){this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}to(t){this.k=t.k,this.u=t.u,this.t=t.t,this.f=t.f}}class qt{constructor(){this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN}}class Wt{constructor(){this.arr=[],this.n=NaN,this.size=NaN}}const $t=function(t,e){t.t.token=0,At.luaX_syntaxerror(t,e)},Qt=function(t,e){At.luaX_syntaxerror(t,Ot.luaO_pushfstring(t.L,a("%s expected",!0),At.luaX_token2str(t,e)))},te=function(t,e,n,r){e>n&&function(t,e,n){let r=t.ls.L,u=t.f.linedefined,l=0===u?a("main function",!0):Ot.luaO_pushfstring(r,a("function at line %d",!0),u),s=Ot.luaO_pushfstring(r,a("too many %s (limit is %d) in %s",!0),n,e,l);At.luaX_syntaxerror(t.ls,s)}(t,n,r)},ee=function(t,e){return t.t.token===e&&(At.luaX_next(t),!0)},ne=function(t,e){t.t.token!==e&&Qt(t,e)},re=function(t,e){ne(t,e),At.luaX_next(t)},ae=function(t,e,n){e||At.luaX_syntaxerror(t,n)},ue=function(t,e,n,r){ee(t,e)||(r===t.linenumber?Qt(t,e):At.luaX_syntaxerror(t,Ot.luaO_pushfstring(t.L,a("%s expected (to close %s at line %d)"),At.luaX_token2str(t,e),At.luaX_token2str(t,n),r)))},le=function(t){ne(t,Ht.TK_NAME);let e=t.t.seminfo.ts;return At.luaX_next(t),e},se=function(t,e,n){t.f=t.t=w,t.k=e,t.u.info=n},oe=function(t,e,n){se(e,Yt.VK,dt(t.fs,n))},ie=function(t,e){oe(t,e,le(t))},ce=function(t,e){let n=t.fs,r=t.dyd,u=function(t,e){let n=t.fs,r=n.f;return r.locvars[n.nlocvars]=new Ot.LocVar,r.locvars[n.nlocvars].varname=e,n.nlocvars++}(t,e);te(n,r.actvar.n+1-n.firstlocal,200,a("local variables",!0)),r.actvar.arr[r.actvar.n]=new class{constructor(){this.idx=NaN}},r.actvar.arr[r.actvar.n].idx=u,r.actvar.n++},fe=function(t,e){ce(t,At.luaX_newstring(t,a(e,!0)))},_e=function(t,e){let n=t.ls.dyd.actvar.arr[t.firstlocal+e].idx;return bt(n<t.nlocvars),t.f.locvars[n]},pe=function(t,e){let n=t.fs;for(n.nactvar=n.nactvar+e;e;e--)_e(n,n.nactvar-e).startpc=n.pc},he=function(t,e,n){let r=t.f;return te(t,t.nups+1,gt.MAXUPVAL,a("upvalues",!0)),r.upvalues[t.nups]={instack:n.k===Yt.VLOCAL,idx:n.u.info,name:e},t.nups++},de=function(t,e,n,r){if(null===t)se(n,Yt.VVOID,0);else{let a=function(t,e){for(let n=t.nactvar-1;n>=0;n--)if(zt(e,_e(t,n).varname))return n;return-1}(t,e);if(a>=0)se(n,Yt.VLOCAL,a),r||function(t,e){let n=t.bl;for(;n.nactvar>e;)n=n.previous;n.upval=1}(t,a);else{let r=function(t,e){let n=t.f.upvalues;for(let r=0;r<t.nups;r++)if(zt(n[r].name,e))return r;return-1}(t,e);if(r<0){if(de(t.prev,e,n,0),n.k===Yt.VVOID)return;r=he(t,e,n)}se(n,Yt.VUPVAL,r)}}},Le=function(t,e){let n=le(t),r=t.fs;if(de(r,n,e,1),e.k===Yt.VVOID){let a=new Zt;de(r,t.envn,e,1),bt(e.k!==Yt.VVOID),oe(t,a,n),q(r,e,a)}},ge=function(t,e,n,r){let a=t.fs,u=e-n;if(Xt(r.k))++u<0&&(u=0),pt(a,r,u),u>1&&st(a,u-1);else if(r.k!==Yt.VVOID&&H(a,r),u>0){let t=a.freereg;st(a,u),et(a,t,u)}n>e&&(t.fs.freereg-=n-e)},Ae=function(t){let e=t.L;++e.nCcalls,te(t.fs,e.nCcalls,xt,a("JS levels",!0))},xe=function(t){return t.L.nCcalls--},Te=function(t,e,n){let r=t.fs,u=t.dyd.gt,l=u.arr[e];if(bt(zt(l.name,n.name)),l.nactvar<n.nactvar){let e=_e(r,l.nactvar).varname,n=Ot.luaO_pushfstring(t.L,a("<goto %s> at line %d jumps into the scope of local '%s'"),l.name.getstr(),l.line,e.getstr());$t(t,n)}rt(r,l.pc,n.pc);for(let a=e;a<u.n-1;a++)u.arr[a]=u.arr[a+1];u.n--},be=function(t,e){let n=t.fs.bl,r=t.dyd,a=r.gt.arr[e];for(let u=n.firstlabel;u<r.label.n;u++){let l=r.label.arr[u];if(zt(l.name,a.name))return a.nactvar>l.nactvar&&(n.upval||r.label.n>n.firstlabel)&&nt(t.fs,a.pc,l.nactvar),Te(t,e,l),!0}return!1},Oe=function(t,e,n,r,a){let u=e.n;return e.arr[u]=new class{constructor(){this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN}},e.arr[u].name=n,e.arr[u].line=r,e.arr[u].nactvar=t.fs.nactvar,e.arr[u].pc=a,e.n=u+1,u},ke=function(t,e){let n=t.dyd.gt,r=t.fs.bl.firstgoto;for(;r<n.n;)zt(n.arr[r].name,e.name)?Te(t,r,e):r++},ve=function(t,e,n){e.isloop=n,e.nactvar=t.nactvar,e.firstlabel=t.ls.dyd.label.n,e.firstgoto=t.ls.dyd.gt.n,e.upval=0,e.previous=t.bl,t.bl=e,bt(t.freereg===t.nactvar)},Ee=function(t,e,n){e.prev=t.fs,e.ls=t,t.fs=e,e.pc=0,e.lasttarget=0,e.jpc=w,e.freereg=0,e.nk=0,e.np=0,e.nups=0,e.nlocvars=0,e.nactvar=0,e.firstlocal=t.dyd.actvar.n,e.bl=null;let r=e.f;r.source=t.source,r.maxstacksize=2,ve(e,n,!1)},me=function(t){let e=t.bl,n=t.ls;if(e.previous&&e.upval){let n=Q(t);nt(t,n,e.nactvar),at(t,n)}e.isloop&&function(t){let e=Kt(t.L,"break"),n=Oe(t,t.dyd.label,e,0,t.fs.pc);ke(t,t.dyd.label.arr[n])}(n),t.bl=e.previous,function(t,e){for(t.ls.dyd.actvar.n-=t.nactvar-e;t.nactvar>e;)_e(t,--t.nactvar).endpc=t.pc}(t,e.nactvar),bt(e.nactvar===t.nactvar),t.freereg=t.nactvar,n.dyd.label.n=e.firstlabel,e.previous?function(t,e){let n=e.firstgoto,r=t.ls.dyd.gt;for(;n<r.n;){let a=r.arr[n];a.nactvar>e.nactvar&&(e.upval&&nt(t,a.pc,e.nactvar),a.nactvar=e.nactvar),be(t.ls,n)||n++}}(t,e):e.firstgoto<n.dyd.gt.n&&function(t,e){let n=At.isreserved(e.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d";n=Ot.luaO_pushfstring(t.L,a(n),e.name.getstr(),e.line),$t(t,n)}(n,n.dyd.gt.arr[e.firstgoto])},Ue=function(t){let e=t.fs;ot(e,0,0),me(e),bt(null===e.bl),t.fs=e.prev},Ne=function(t,e){switch(t.t.token){case Ht.TK_ELSE:case Ht.TK_ELSEIF:case Ht.TK_END:case Ht.TK_EOS:return!0;case Ht.TK_UNTIL:return e;default:return!1}},Re=function(t){for(;!Ne(t,1);){if(t.t.token===Ht.TK_RETURN)return void $e(t);$e(t)}},ye=function(t,e){let n=t.fs,r=new Zt;F(n,e),At.luaX_next(t),ie(t,r),q(n,e,r)},Se=function(t,e){At.luaX_next(t),Fe(t,e),X(t.fs,e),re(t,93)},we=function(t,e){let n=t.fs,r=t.fs.freereg,u=new Zt,l=new Zt;t.t.token===Ht.TK_NAME?(te(n,e.nh,Tt,a("items in a constructor",!0)),ie(t,u)):Se(t,u),e.nh++,re(t,61);let s=K(n,u);Fe(t,l),P(n,yt,e.t.u.info,s,K(n,l)),n.freereg=r},Ie=function(t,e){e.v.k!==Yt.VVOID&&(H(t,e.v),e.v.k=Yt.VVOID,e.tostore===Pt&&(ct(t,e.t.u.info,e.na,e.tostore),e.tostore=0))},Me=function(t,e){Fe(t,e.v),te(t.fs,e.na,Tt,a("items in a constructor",!0)),e.na++,e.tostore++},Pe=function(t,e){switch(t.t.token){case Ht.TK_NAME:61!==At.luaX_lookahead(t)?Me(t,e):we(t,e);break;case 91:we(t,e);break;default:Me(t,e)}},Ce=function(t,e){let n=t.fs,a=t.linenumber,u=P(n,Rt,0,0,0),l=new class{constructor(){this.v=new Zt,this.t=new Zt,this.nh=NaN,this.na=NaN,this.tostore=NaN}};l.na=l.nh=l.tostore=0,l.t=e,se(e,Yt.VRELOCABLE,u),se(l.v,Yt.VVOID,0),H(t.fs,e),re(t,123);do{if(bt(l.v.k===Yt.VVOID||l.tostore>0),125===t.t.token)break;Ie(n,l),Pe(t,l)}while(ee(t,44)||ee(t,59));ue(t,125,123,a),function(t,e){0!==e.tostore&&(Xt(e.v.k)?(ft(t,e.v),ct(t,e.t.u.info,e.na,r),e.na--):(e.v.k!==Yt.VVOID&&H(t,e.v),ct(t,e.t.u.info,e.na,e.tostore)))}(n,l),Ct(n.f.code[u],Ot.luaO_int2fb(l.na)),Dt(n.f.code[u],Ot.luaO_int2fb(l.nh))},De=function(t,e,n,r){let u=new qt,l=new Jt;u.f=function(t){let e=t.L,n=new Ft(e),r=t.fs;return r.f.p[r.np++]=n,n}(t),u.f.linedefined=r,Ee(t,u,l),re(t,40),n&&(fe(t,"self"),pe(t,1)),function(t){let e=t.fs,n=e.f,r=0;if(n.is_vararg=!1,41!==t.t.token)do{switch(t.t.token){case Ht.TK_NAME:ce(t,le(t)),r++;break;case Ht.TK_DOTS:At.luaX_next(t),n.is_vararg=!0;break;default:At.luaX_syntaxerror(t,a("<name> or '...' expected",!0))}}while(!n.is_vararg&&ee(t,44));pe(t,r),n.numparams=e.nactvar,st(e,e.nactvar)}(t),re(t,41),Re(t),u.f.lastlinedefined=t.linenumber,ue(t,Ht.TK_END,Ht.TK_FUNCTION,r),function(t,e){let n=t.fs.prev;se(e,Yt.VRELOCABLE,C(n,vt,0,n.np-1)),H(n,e)}(t,e),Ue(t)},Ve=function(t,e){let n=1;for(Fe(t,e);ee(t,44);)H(t.fs,e),Fe(t,e),n++;return n},Ge=function(t,e,n){let u,l=t.fs,s=new Zt;switch(t.t.token){case 40:At.luaX_next(t),41===t.t.token?s.k=Yt.VVOID:(Ve(t,s),ft(l,s)),ue(t,41,40,n);break;case 123:Ce(t,s);break;case Ht.TK_STRING:oe(t,s,t.t.seminfo.ts),At.luaX_next(t);break;default:At.luaX_syntaxerror(t,a("function arguments expected",!0))}bt(e.k===Yt.VNONRELOC);let o=e.u.info;Xt(s.k)?u=r:(s.k!==Yt.VVOID&&H(l,s),u=l.freereg-(o+1)),se(e,Yt.VCALL,P(l,kt,o,u+1,2)),z(l,n),l.freereg=o+1},Be=function(t,e){let n=t.fs,r=t.linenumber;for(function(t,e){switch(t.t.token){case 40:{let n=t.linenumber;return At.luaX_next(t),Fe(t,e),ue(t,41,40,n),void B(t.fs,e)}case Ht.TK_NAME:return void Le(t,e);default:At.luaX_syntaxerror(t,a("unexpected symbol",!0))}}(t,e);;)switch(t.t.token){case 46:ye(t,e);break;case 91:{let r=new Zt;F(n,e),Se(t,r),q(n,e,r);break}case 58:{let a=new Zt;At.luaX_next(t),ie(t,a),it(n,e,a),Ge(t,e,r);break}case 40:case Ht.TK_STRING:case 123:H(n,e),Ge(t,e,r);break;default:return}},Ke=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],je=function(t,e,n){Ae(t);let r=function(t){switch(t){case Ht.TK_NOT:return y;case 45:return R;case 126:return U;case 35:return N;default:return S}}(t.t.token);if(r!==S){let n=t.linenumber;At.luaX_next(t),je(t,e,12),lt(t.fs,r,e,n)}else!function(t,e){switch(t.t.token){case Ht.TK_FLT:se(e,Yt.VKFLT,0),e.u.nval=t.t.seminfo.r;break;case Ht.TK_INT:se(e,Yt.VKINT,0),e.u.ival=t.t.seminfo.i;break;case Ht.TK_STRING:oe(t,e,t.t.seminfo.ts);break;case Ht.TK_NIL:se(e,Yt.VNIL,0);break;case Ht.TK_TRUE:se(e,Yt.VTRUE,0);break;case Ht.TK_FALSE:se(e,Yt.VFALSE,0);break;case Ht.TK_DOTS:{let n=t.fs;ae(t,n.f.is_vararg,a("cannot use '...' outside a vararg function",!0)),se(e,Yt.VVARARG,P(n,Mt,0,1,0));break}case 123:return void Ce(t,e);case Ht.TK_FUNCTION:return At.luaX_next(t),void De(t,e,0,t.linenumber);default:return void Be(t,e)}At.luaX_next(t)}(t,e);let w=function(t){switch(t){case 43:return u;case 45:return m;case 42:return x;case 37:return A;case 94:return k;case 47:return f;case Ht.TK_IDIV:return d;case 38:return s;case 124:return o;case 126:return i;case Ht.TK_SHL:return v;case Ht.TK_SHR:return E;case Ht.TK_CONCAT:return c;case Ht.TK_NE:return T;case Ht.TK_EQ:return _;case 60:return g;case Ht.TK_LE:return L;case 62:return h;case Ht.TK_GE:return p;case Ht.TK_AND:return l;case Ht.TK_OR:return O;default:return b}}(t.t.token);for(;w!==b&&Ke[w].left>n;){let n=new Zt,r=t.linenumber;At.luaX_next(t),W(t.fs,w,e);let a=je(t,n,Ke[w].right);ut(t.fs,w,e,n,r),w=a}return xe(t),w},Fe=function(t,e){je(t,e,0)},He=function(t){let e=t.fs,n=new Jt;ve(e,n,0),Re(t),me(e)};class Xe{constructor(){this.prev=null,this.v=new Zt}}const ze=function(t,e,n){let r=new Zt;if(ae(t,function(t){return Yt.VLOCAL<=t&&t<=Yt.VINDEXED}(e.v.k),a("syntax error",!0)),ee(t,44)){let r=new Xe;r.prev=e,Be(t,r.v),r.v.k!==Yt.VINDEXED&&function(t,e,n){let r=t.fs,a=r.freereg,u=!1;for(;e;e=e.prev)e.v.k===Yt.VINDEXED&&(e.v.u.ind.vt===n.k&&e.v.u.ind.t===n.u.info&&(u=!0,e.v.u.ind.vt=Yt.VLOCAL,e.v.u.ind.t=a),n.k===Yt.VLOCAL&&e.v.u.ind.idx===n.u.info&&(u=!0,e.v.u.ind.idx=a));if(u){let t=n.k===Yt.VLOCAL?Nt:Ut;P(r,t,a,n.u.info,0),st(r,1)}}(t,e,r.v),te(t.fs,n+t.L.nCcalls,xt,a("JS levels",!0)),ze(t,r,n+1)}else{re(t,61);let a=Ve(t,r);if(a===n)return _t(t.fs,r),void ht(t.fs,e.v,r);ge(t,n,a,r)}se(r,Yt.VNONRELOC,t.fs.freereg-1),ht(t.fs,e.v,r)},Je=function(t){let e=new Zt;return Fe(t,e),e.k===Yt.VNIL&&(e.k=Yt.VFALSE),Z(t.fs,e),e.f},Ye=function(t,e){let n,r=t.linenumber;ee(t,Ht.TK_GOTO)?n=le(t):(At.luaX_next(t),n=Kt(t.L,"break"));let a=Oe(t,t.dyd.gt,n,r,e);be(t,a)},Ze=function(t){let e=new Zt;return Fe(t,e),H(t.fs,e),bt(e.k===Yt.VNONRELOC),e.u.info},qe=function(t,e,n,r,a){let u,l=new Jt,s=t.fs;pe(t,3),re(t,Ht.TK_DO);let o=a?D(s,mt,e,w):Q(s);ve(s,l,0),pe(t,r),st(s,r),He(t),me(s),at(s,o),a?u=D(s,Et,e,w):(P(s,wt,e,0,r),z(s,n),u=D(s,It,e+2,w)),rt(s,u,o+1),z(s,n)},We=function(t,e){let n,r=new Jt,a=t.fs,u=new Zt;if(At.luaX_next(t),Fe(t,u),re(t,Ht.TK_THEN),t.t.token===Ht.TK_GOTO||t.t.token===Ht.TK_BREAK){for(Y(t.fs,u),ve(a,r,!1),Ye(t,u.t);ee(t,59););if(Ne(t,0))return me(a),e;n=Q(a)}else Z(t.fs,u),ve(a,r,!1),n=u.f;return Re(t),me(a),t.t.token!==Ht.TK_ELSE&&t.t.token!==Ht.TK_ELSEIF||(e=G(a,e,Q(a))),at(a,n),e},$e=function(t){let e=t.linenumber;switch(Ae(t),t.t.token){case 59:At.luaX_next(t);break;case Ht.TK_IF:!function(t,e){let n=t.fs,r=w;for(r=We(t,r);t.t.token===Ht.TK_ELSEIF;)r=We(t,r);ee(t,Ht.TK_ELSE)&&He(t),ue(t,Ht.TK_END,Ht.TK_IF,e),at(n,r)}(t,e);break;case Ht.TK_WHILE:!function(t,e){let n=t.fs,r=new Jt;At.luaX_next(t);let a=J(n),u=Je(t);ve(n,r,1),re(t,Ht.TK_DO),He(t),tt(n,a),ue(t,Ht.TK_END,Ht.TK_WHILE,e),me(n),at(n,u)}(t,e);break;case Ht.TK_DO:At.luaX_next(t),He(t),ue(t,Ht.TK_END,Ht.TK_DO,e);break;case Ht.TK_FOR:!function(t,e){let n=t.fs,r=new Jt;ve(n,r,1),At.luaX_next(t);let u=le(t);switch(t.t.token){case 61:!function(t,e,n){let r=t.fs,a=r.freereg;fe(t,"(for index)"),fe(t,"(for limit)"),fe(t,"(for step)"),ce(t,e),re(t,61),Ze(t),re(t,44),Ze(t),ee(t,44)?Ze(t):(V(r,r.freereg,$(r,1)),st(r,1)),qe(t,a,n,1,1)}(t,u,e);break;case 44:case Ht.TK_IN:!function(t,e){let n=t.fs,r=new Zt,a=4,u=n.freereg;for(fe(t,"(for generator)"),fe(t,"(for state)"),fe(t,"(for control)"),ce(t,e);ee(t,44);)ce(t,le(t)),a++;re(t,Ht.TK_IN);let l=t.linenumber;ge(t,3,Ve(t,r),r),M(n,3),qe(t,u,l,a-3,0)}(t,u);break;default:At.luaX_syntaxerror(t,a("'=' or 'in' expected",!0))}ue(t,Ht.TK_END,Ht.TK_FOR,e),me(n)}(t,e);break;case Ht.TK_REPEAT:!function(t,e){let n=t.fs,r=J(n),a=new Jt,u=new Jt;ve(n,a,1),ve(n,u,0),At.luaX_next(t),Re(t),ue(t,Ht.TK_UNTIL,Ht.TK_REPEAT,e);let l=Je(t);u.upval&&nt(n,l,u.nactvar),me(n),rt(n,l,r),me(n)}(t,e);break;case Ht.TK_FUNCTION:!function(t,e){let n=new Zt,r=new Zt;At.luaX_next(t);let a=function(t,e){let n=0;for(Le(t,e);46===t.t.token;)ye(t,e);return 58===t.t.token&&(n=1,ye(t,e)),n}(t,n);De(t,r,a,e),ht(t.fs,n,r),z(t.fs,e)}(t,e);break;case Ht.TK_LOCAL:At.luaX_next(t),ee(t,Ht.TK_FUNCTION)?function(t){let e=new Zt,n=t.fs;ce(t,le(t)),pe(t,1),De(t,e,0,t.linenumber),_e(n,e.u.info).startpc=n.pc}(t):function(t){let e,n=0,r=new Zt;do{ce(t,le(t)),n++}while(ee(t,44));ee(t,61)?e=Ve(t,r):(r.k=Yt.VVOID,e=0),ge(t,n,e,r),pe(t,n)}(t);break;case Ht.TK_DBCOLON:At.luaX_next(t),function(t,e,n){let r,u=t.fs,l=t.dyd.label;!function(t,e,n){for(let r=t.bl.firstlabel;r<e.n;r++)if(zt(n,e.arr[r].name)){let u=Ot.luaO_pushfstring(t.ls.L,a("label '%s' already defined on line %d",!0),n.getstr(),e.arr[r].line);$t(t.ls,u)}}(u,l,e),re(t,Ht.TK_DBCOLON),r=Oe(t,l,e,n,J(u)),function(t){for(;59===t.t.token||t.t.token===Ht.TK_DBCOLON;)$e(t)}(t),Ne(t,0)&&(l.arr[r].nactvar=u.bl.nactvar),ke(t,l.arr[r])}(t,le(t),e);break;case Ht.TK_RETURN:At.luaX_next(t),function(t){let e,n,a=t.fs,u=new Zt;Ne(t,1)||59===t.t.token?e=n=0:(n=Ve(t,u),Xt(u.k)?(ft(a,u),u.k===Yt.VCALL&&1===n&&(Vt(I(a,u),St),bt(I(a,u).A===a.nactvar)),e=a.nactvar,n=r):1===n?e=j(a,u):(H(a,u),e=a.nactvar,bt(n===a.freereg-e))),ot(a,e,n),ee(t,59)}(t);break;case Ht.TK_BREAK:case Ht.TK_GOTO:Ye(t,Q(t.fs));break;default:!function(t){let e=t.fs,n=new Xe;Be(t,n.v),61===t.t.token||44===t.t.token?(n.prev=null,ze(t,n,1)):(ae(t,n.v.k===Yt.VCALL,a("syntax error",!0)),Dt(I(e,n.v),1))}(t)}bt(t.fs.f.maxstacksize>=t.fs.freereg&&t.fs.freereg>=t.fs.nactvar),t.fs.freereg=t.fs.nactvar,xe(t)};t.exports.Dyndata=class{constructor(){this.actvar={arr:[],n:NaN,size:NaN},this.gt=new Wt,this.label=new Wt}},t.exports.expkind=Yt,t.exports.expdesc=Zt,t.exports.luaY_parser=function(t,e,n,r,a,u){let l=new At.LexState,s=new qt,o=gt.luaF_newLclosure(t,1);return Lt.luaD_inctop(t),t.stack[t.top-1].setclLvalue(o),l.h=jt.luaH_new(t),Lt.luaD_inctop(t),t.stack[t.top-1].sethvalue(l.h),s.f=o.p=new Ft(t),s.f.source=Bt(t,a),l.buff=n,l.dyd=r,r.actvar.n=r.gt.n=r.label.n=0,At.luaX_setinput(t,l,e,s.f.source,u),function(t,e){let n=new Jt,r=new Zt;Ee(t,e,n),e.f.is_vararg=!0,se(r,Yt.VLOCAL,0),he(e,t.envn,r),At.luaX_next(t),Re(t),ne(t,Ht.TK_EOS),Ue(t)}(l,s),bt(!s.prev&&1===s.nups&&!l.fs),bt(0===r.actvar.n&&0===r.gt.n&&0===r.label.n),delete t.stack[--t.top],o},t.exports.vkisinreg=function(t){return t===Yt.VNONRELOC||t===Yt.VLOCAL}},function(t,e,n){"use strict";const{LUA_MULTRET:r,LUA_OK:a,LUA_TFUNCTION:u,LUA_TNIL:l,LUA_TNONE:s,LUA_TNUMBER:o,LUA_TSTRING:i,LUA_TTABLE:c,LUA_VERSION:f,LUA_YIELD:_,lua_call:p,lua_callk:h,lua_concat:d,lua_error:L,lua_getglobal:g,lua_geti:A,lua_getmetatable:x,lua_gettop:T,lua_insert:b,lua_isnil:O,lua_isnone:k,lua_isstring:v,lua_load:E,lua_next:m,lua_pcallk:U,lua_pop:N,lua_pushboolean:R,lua_pushcfunction:y,lua_pushglobaltable:S,lua_pushinteger:w,lua_pushliteral:I,lua_pushnil:M,lua_pushstring:P,lua_pushvalue:C,lua_rawequal:D,lua_rawget:V,lua_rawlen:G,lua_rawset:B,lua_remove:K,lua_replace:j,lua_rotate:F,lua_setfield:H,lua_setmetatable:X,lua_settop:z,lua_setupvalue:J,lua_stringtonumber:Y,lua_toboolean:Z,lua_tolstring:q,lua_tostring:W,lua_type:$,lua_typename:Q}=n(2),{luaL_argcheck:tt,luaL_checkany:et,luaL_checkinteger:nt,luaL_checkoption:rt,luaL_checkstack:at,luaL_checktype:ut,luaL_error:lt,luaL_getmetafield:st,luaL_loadbufferx:ot,luaL_loadfile:it,luaL_loadfilex:ct,luaL_optinteger:ft,luaL_optstring:_t,luaL_setfuncs:pt,luaL_tolstring:ht,luaL_where:dt}=n(7),{to_jsstring:Lt,to_luastring:gt}=n(5);let At,xt;if("function"==typeof TextDecoder){let t="",e=new TextDecoder("utf-8");At=function(n){t+=e.decode(n,{stream:!0})};let n=new Uint8Array(0);xt=function(){t+=e.decode(n),console.log(t),t=""}}else{let t=[];At=function(e){try{e=Lt(e)}catch(t){let r=new Uint8Array(e.length);r.set(e),e=r}t.push(e)},xt=function(){console.log.apply(console.log,t),t=[]}}const Tt=["stop","restart","collect","count","step","setpause","setstepmul","isrunning"].map(t=>gt(t)),bt=function(t){return ut(t,1,c),z(t,2),m(t,1)?2:(M(t),1)},Ot=function(t){let e=nt(t,2)+1;return w(t,e),A(t,1,e)===l?1:2},kt=function(t){let e=ft(t,2,1);return z(t,1),$(t,1)===i&&e>0&&(dt(t,e),C(t,1),d(t,2)),L(t)},vt=function(t,e,n){return e!==a&&e!==_?(R(t,0),C(t,-2),2):T(t)-n},Et=function(t,e,n){return e===a?(0!==n&&(C(t,n),J(t,-2,1)||N(t,1)),1):(M(t),b(t,-2),2)},mt=function(t,e){return at(t,2,"too many nested functions"),C(t,1),p(t,0,1),O(t,-1)?(N(t,1),null):(v(t,-1)||lt(t,gt("reader function must return a string")),j(t,5),W(t,5))},Ut=function(t,e,n){return T(t)-1},Nt={assert:function(t){return Z(t,1)?T(t):(et(t,1),K(t,1),I(t,"assertion failed!"),z(t,1),kt(t))},collectgarbage:function(t){rt(t,1,"collect",Tt),ft(t,2,0),lt(t,gt("lua_gc not implemented"))},dofile:function(t){let e=_t(t,1,null);return z(t,1),it(t,e)!==a?L(t):(h(t,0,r,0,Ut),Ut(t))},error:kt,getmetatable:function(t){return et(t,1),x(t,1)?(st(t,1,gt("__metatable",!0)),1):(M(t),1)},ipairs:function(t){return et(t,1),y(t,Ot),C(t,1),w(t,0),3},load:function(t){let e,n=W(t,1),r=_t(t,3,"bt"),a=k(t,4)?0:4;if(null!==n){let a=_t(t,2,n);e=ot(t,n,n.length,a,r)}else{let n=_t(t,2,"=(load)");ut(t,1,u),z(t,5),e=E(t,mt,null,n,r)}return Et(t,e,a)},loadfile:function(t){let e=_t(t,1,null),n=_t(t,2,null),r=k(t,3)?0:3,a=ct(t,e,n);return Et(t,a,r)},next:bt,pairs:function(t){return function(t,e,n,r){return et(t,1),st(t,1,e)===l?(y(t,r),C(t,1),M(t)):(C(t,1),p(t,1,3)),3}(t,gt("__pairs",!0),0,bt)},pcall:function(t){et(t,1),R(t,1),b(t,1);let e=U(t,T(t)-2,r,0,0,vt);return vt(t,e,0)},print:function(t){let e=T(t);g(t,gt("tostring",!0));for(let n=1;n<=e;n++){C(t,-1),C(t,n),p(t,1,1);let e=q(t,-1);if(null===e)return lt(t,gt("'tostring' must return a string to 'print'"));n>1&&At(gt("\t")),At(e),N(t,1)}return xt(),0},rawequal:function(t){return et(t,1),et(t,2),R(t,D(t,1,2)),1},rawget:function(t){return ut(t,1,c),et(t,2),z(t,2),V(t,1),1},rawlen:function(t){let e=$(t,1);return tt(t,e===c||e===i,1,"table or string expected"),w(t,G(t,1)),1},rawset:function(t){return ut(t,1,c),et(t,2),et(t,3),z(t,3),B(t,1),1},select:function(t){let e=T(t);if($(t,1)===i&&35===W(t,1)[0])return w(t,e-1),1;{let n=nt(t,1);return n<0?n=e+n:n>e&&(n=e),tt(t,1<=n,1,"index out of range"),e-n}},setmetatable:function(t){let e=$(t,2);return ut(t,1,c),tt(t,e===l||e===c,2,"nil or table expected"),st(t,1,gt("__metatable",!0))!==l?lt(t,gt("cannot change a protected metatable")):(z(t,2),X(t,1),1)},tonumber:function(t){if($(t,2)<=0){if(et(t,1),$(t,1)===o)return z(t,1),1;{let e=W(t,1);if(null!==e&&Y(t,e)===e.length+1)return 1}}else{let e=nt(t,2);ut(t,1,i);let n=W(t,1);tt(t,2<=e&&e<=36,2,"base out of range");let r=function(t,e){try{t=Lt(t)}catch(t){return null}let n=/^[\t\v\f \n\r]*([+-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(t);if(!n)return null;let r=parseInt(n[1]+n[2],e);return isNaN(r)?null:0|r}(n,e);if(null!==r)return w(t,r),1}return M(t),1},tostring:function(t){return et(t,1),ht(t,1),1},type:function(t){let e=$(t,1);return tt(t,e!==s,1,"value expected"),P(t,Q(t,e)),1},xpcall:function(t){let e=T(t);ut(t,2,u),R(t,1),C(t,1),F(t,3,2);let n=U(t,e-2,r,2,2,vt);return vt(t,n,2)}};t.exports.luaopen_base=function(t){return S(t),pt(t,Nt,0),C(t,-1),H(t,-2,gt("_G")),I(t,f),H(t,-2,gt("_VERSION")),1}},function(t,e,n){"use strict";const{LUA_OK:r,LUA_TFUNCTION:a,LUA_TSTRING:u,LUA_YIELD:l,lua_Debug:s,lua_checkstack:o,lua_concat:i,lua_error:c,lua_getstack:f,lua_gettop:_,lua_insert:p,lua_isyieldable:h,lua_newthread:d,lua_pop:L,lua_pushboolean:g,lua_pushcclosure:A,lua_pushliteral:x,lua_pushthread:T,lua_pushvalue:b,lua_resume:O,lua_status:k,lua_tothread:v,lua_type:E,lua_upvalueindex:m,lua_xmove:U,lua_yield:N}=n(2),{luaL_argcheck:R,luaL_checktype:y,luaL_newlib:S,luaL_where:w}=n(7),I=function(t){let e=v(t,1);return R(t,e,1,"thread expected"),e},M=function(t,e,n){if(!o(e,n))return x(t,"too many arguments to resume"),-1;if(k(e)===r&&0===_(e))return x(t,"cannot resume dead coroutine"),-1;U(t,e,n);let a=O(e,t,n);if(a===r||a===l){let n=_(e);return o(t,n+1)?(U(e,t,n),n):(L(e,n),x(t,"too many results to resume"),-1)}return U(e,t,1),-1},P=function(t){let e=v(t,m(1)),n=M(t,e,_(t));return n<0?(E(t,-1)===u&&(w(t,1),p(t,-2),i(t,2)),c(t)):n},C=function(t){y(t,1,a);let e=d(t);return b(t,1),U(t,e,1),1},D={create:C,isyieldable:function(t){return g(t,h(t)),1},resume:function(t){let e=I(t),n=M(t,e,_(t)-1);return n<0?(g(t,0),p(t,-2),2):(g(t,1),p(t,-(n+1)),n+1)},running:function(t){return g(t,T(t)),2},status:function(t){let e=I(t);if(t===e)x(t,"running");else switch(k(e)){case l:x(t,"suspended");break;case r:{let n=new s;f(e,0,n)>0?x(t,"normal"):0===_(e)?x(t,"dead"):x(t,"suspended");break}default:x(t,"dead")}return 1},wrap:function(t){return C(t),A(t,P,1),1},yield:function(t){return N(t,_(t))}};t.exports.luaopen_coroutine=function(t){return S(t,D),1}},function(t,e,n){"use strict";const{LUA_MAXINTEGER:r}=n(3),{LUA_OPEQ:a,LUA_OPLT:u,LUA_TFUNCTION:l,LUA_TNIL:s,LUA_TTABLE:o,lua_call:i,lua_checkstack:c,lua_compare:f,lua_createtable:_,lua_geti:p,lua_getmetatable:h,lua_gettop:d,lua_insert:L,lua_isnil:g,lua_isnoneornil:A,lua_isstring:x,lua_pop:T,lua_pushinteger:b,lua_pushnil:O,lua_pushstring:k,lua_pushvalue:v,lua_rawget:E,lua_setfield:m,lua_seti:U,lua_settop:N,lua_toboolean:R,lua_type:y}=n(2),{luaL_Buffer:S,luaL_addlstring:w,luaL_addvalue:I,luaL_argcheck:M,luaL_buffinit:P,luaL_checkinteger:C,luaL_checktype:D,luaL_error:V,luaL_len:G,luaL_newlib:B,luaL_opt:K,luaL_optinteger:j,luaL_optlstring:F,luaL_pushresult:H,luaL_typename:X}=n(7),z=n(17),{to_luastring:J}=n(5),Y=function(t,e,n){return k(t,e),E(t,-n)!==s},Z=function(t,e,n){if(y(t,e)!==o){let r=1;!h(t,e)||1&n&&!Y(t,J("__index",!0),++r)||2&n&&!Y(t,J("__newindex",!0),++r)||4&n&&!Y(t,J("__len",!0),++r)?D(t,e,o):T(t,r)}},q=function(t,e,n){return Z(t,e,4|n),G(t,e)},W=function(t,e,n){p(t,1,n),x(t,-1)||V(t,J("invalid value (%s) at index %d in table for 'concat'"),X(t,-1),n),I(e)},$=function(t,e,n){U(t,1,e),U(t,1,n)},Q=function(t,e,n){if(g(t,2))return f(t,e,n,u);{v(t,2),v(t,e-1),v(t,n-2),i(t,2,1);let r=R(t,-1);return T(t,1),r}},tt=function(t,e,n){let r=e,a=n-1;for(;;){for(;p(t,1,++r),Q(t,-1,-2);)r==n-1&&V(t,J("invalid order function for sorting")),T(t,1);for(;p(t,1,--a),Q(t,-3,-1);)a<r&&V(t,J("invalid order function for sorting")),T(t,1);if(a<r)return T(t,1),$(t,n-1,r),r;$(t,r,a)}},et=function(t,e,n){let r=Math.floor((e-t)/4),a=n%(2*r)+(t+r);return z.lua_assert(t+r<=a&&a<=e-r),a},nt=function(t,e,n,r){for(;e<n;){if(p(t,1,e),p(t,1,n),Q(t,-1,-2)?$(t,e,n):T(t,2),n-e==1)return;let a,u;if(a=n-e<100||0===r?Math.floor((e+n)/2):et(e,n,r),p(t,1,a),p(t,1,e),Q(t,-2,-1)?$(t,a,e):(T(t,1),p(t,1,n),Q(t,-1,-2)?$(t,a,n):T(t,2)),n-e==2)return;p(t,1,a),v(t,-1),p(t,1,n-1),$(t,a,n-1),(a=tt(t,e,n))-e<n-a?(nt(t,e,a-1,r),u=a-e,e=a+1):(nt(t,a+1,n,r),u=n-a,n=a-1),(n-e)/128>u&&(r=Math.floor(4294967296*Math.random()))}},rt={concat:function(t){let e=q(t,1,1),n=F(t,2,""),r=n.length,a=j(t,3,1);e=j(t,4,e);let u=new S;for(P(t,u);a<e;a++)W(t,u,a),w(u,n,r);return a===e&&W(t,u,a),H(u),1},insert:function(t){let e,n=q(t,1,3)+1;switch(d(t)){case 2:e=n;break;case 3:e=C(t,2),M(t,1<=e&&e<=n,2,"position out of bounds");for(let r=n;r>e;r--)p(t,1,r-1),U(t,1,r);break;default:return V(t,"wrong number of arguments to 'insert'")}return U(t,1,e),0},move:function(t){let e=C(t,2),n=C(t,3),u=C(t,4),l=A(t,5)?1:5;if(Z(t,1,1),Z(t,l,2),n>=e){M(t,e>0||n<r+e,3,"too many elements to move");let s=n-e+1;if(M(t,u<=r-s+1,4,"destination wrap around"),u>n||u<=e||1!==l&&1!==f(t,1,l,a))for(let n=0;n<s;n++)p(t,1,e+n),U(t,l,u+n);else for(let n=s-1;n>=0;n--)p(t,1,e+n),U(t,l,u+n)}return v(t,l),1},pack:function(t){let e=d(t);_(t,e,1),L(t,1);for(let n=e;n>=1;n--)U(t,1,n);return b(t,e),m(t,1,J("n")),1},remove:function(t){let e=q(t,1,3),n=j(t,2,e);for(n!==e&&M(t,1<=n&&n<=e+1,1,"position out of bounds"),p(t,1,n);n<e;n++)p(t,1,n+1),U(t,1,n);return O(t),U(t,1,n),1},sort:function(t){let e=q(t,1,3);return e>1&&(M(t,e<r,1,"array too big"),A(t,2)||D(t,2,l),N(t,2),nt(t,1,e,0)),0},unpack:function(t){let e=j(t,2,1),n=K(t,C,3,G(t,1));if(e>n)return 0;let r=n-e;if(r>=Number.MAX_SAFE_INTEGER||!c(t,++r))return V(t,J("too many results to unpack"));for(;e<n;e++)p(t,1,e);return p(t,1,n),r}};t.exports.luaopen_table=function(t){return B(t,rt),1}},function(t,e,n){"use strict";const{LUA_TNIL:r,LUA_TTABLE:a,lua_close:u,lua_createtable:l,lua_getfield:s,lua_isboolean:o,lua_isnoneornil:i,lua_pop:c,lua_pushboolean:f,lua_pushfstring:_,lua_pushinteger:p,lua_pushliteral:h,lua_pushnil:d,lua_pushnumber:L,lua_pushstring:g,lua_setfield:A,lua_settop:x,lua_toboolean:T,lua_tointegerx:b}=n(2),{luaL_Buffer:O,luaL_addchar:k,luaL_addstring:v,luaL_argerror:E,luaL_buffinit:m,luaL_checkinteger:U,luaL_checkstring:N,luaL_checktype:R,luaL_error:y,luaL_execresult:S,luaL_fileresult:w,luaL_newlib:I,luaL_optinteger:M,luaL_optlstring:P,luaL_optstring:C,luaL_pushresult:D}=n(7),{luastring_eq:V,to_jsstring:G,to_luastring:B}=n(5),K=B("aAbBcCdDeFhHIjklmMnpPrRStTuUwWxXyYzZ%"),j=function(t,e,n){p(t,n),A(t,-2,B(e,!0))},F=function(t,e,n){j(t,"sec",n?e.getUTCSeconds():e.getSeconds()),j(t,"min",n?e.getUTCMinutes():e.getMinutes()),j(t,"hour",n?e.getUTCHours():e.getHours()),j(t,"day",n?e.getUTCDate():e.getDate()),j(t,"month",(n?e.getUTCMonth():e.getMonth())+1),j(t,"year",n?e.getUTCFullYear():e.getFullYear()),j(t,"wday",(n?e.getUTCDay():e.getDay())+1),j(t,"yday",Math.floor((e-new Date(e.getFullYear(),0,0))/864e5))},H=Number.MAX_SAFE_INTEGER/2,X=function(t,e,n,a){let u=s(t,-1,B(e,!0)),l=b(t,-1);if(!1===l){if(u!==r)return y(t,B("field '%s' is not an integer"),e);if(n<0)return y(t,B("field '%s' missing in date table"),e);l=n}else{if(!(-H<=l&&l<=H))return y(t,B("field '%s' is out-of-bound"),e);l-=a}return c(t,1),l},z={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(t=>B(t)),shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(t=>B(t)),months:["January","February","March","April","May","June","July","August","September","October","November","December"].map(t=>B(t)),shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(t=>B(t)),AM:B("AM"),PM:B("PM"),am:B("am"),pm:B("pm"),formats:{c:B("%a %b %e %H:%M:%S %Y"),D:B("%m/%d/%y"),F:B("%Y-%m-%d"),R:B("%H:%M"),r:B("%I:%M:%S %p"),T:B("%H:%M:%S"),X:B("%T"),x:B("%D")}},J=function(t,e){let n=t.getDay();"monday"===e&&(0===n?n=6:n--);let r=(t-new Date(t.getFullYear(),0,1))/864e5;return Math.floor((r+7-n)/7)},Y=function(t,e,n){e<10&&k(t,n),v(t,B(String(e)))},Z=function(t,e,n,r){let a=0;for(;a<n.length;)if(37!==n[a])k(e,n[a++]);else{let u=q(t,n,++a);switch(n[a]){case 37:k(e,37);break;case 65:v(e,z.days[r.getDay()]);break;case 66:v(e,z.months[r.getMonth()]);break;case 67:Y(e,Math.floor(r.getFullYear()/100),48);break;case 68:Z(t,e,z.formats.D,r);break;case 70:Z(t,e,z.formats.F,r);break;case 72:Y(e,r.getHours(),48);break;case 73:Y(e,(r.getHours()+11)%12+1,48);break;case 77:Y(e,r.getMinutes(),48);break;case 80:v(e,r.getHours()<12?z.am:z.pm);break;case 82:Z(t,e,z.formats.R,r);break;case 83:Y(e,r.getSeconds(),48);break;case 84:Z(t,e,z.formats.T,r);break;case 85:Y(e,J(r,"sunday"),48);break;case 87:Y(e,J(r,"monday"),48);break;case 88:Z(t,e,z.formats.X,r);break;case 89:v(e,B(String(r.getFullYear())));break;case 90:{let t=r.toString().match(/\(([\w\s]+)\)/);t&&v(e,B(t[1]));break}case 97:v(e,z.shortDays[r.getDay()]);break;case 98:case 104:v(e,z.shortMonths[r.getMonth()]);break;case 99:Z(t,e,z.formats.c,r);break;case 100:Y(e,r.getDate(),48);break;case 101:Y(e,r.getDate(),32);break;case 106:{let t=Math.floor((r-new Date(r.getFullYear(),0,1))/864e5);t<100&&(t<10&&k(e,48),k(e,48)),v(e,B(String(t)));break}case 107:Y(e,r.getHours(),32);break;case 108:Y(e,(r.getHours()+11)%12+1,32);break;case 109:Y(e,r.getMonth()+1,48);break;case 110:k(e,10);break;case 112:v(e,r.getHours()<12?z.AM:z.PM);break;case 114:Z(t,e,z.formats.r,r);break;case 115:v(e,B(String(Math.floor(r/1e3))));break;case 116:k(e,8);break;case 117:{let t=r.getDay();v(e,B(String(0===t?7:t)));break}case 119:v(e,B(String(r.getDay())));break;case 120:Z(t,e,z.formats.x,r);break;case 121:Y(e,r.getFullYear()%100,48);break;case 122:{let t=r.getTimezoneOffset();t>0?k(e,45):(t=-t,k(e,43)),Y(e,Math.floor(t/60),48),Y(e,t%60,48);break}}a+=u}},q=function(t,e,n){let r=K,a=0,u=1;for(;a<r.length&&u<=e.length-n;a+=u)if(r[a]==="|".charCodeAt(0))u++;else if(V(e.subarray(n,n+u),r.subarray(a,a+u)))return u;E(t,1,_(t,B("invalid conversion specifier '%%%s'"),e))},W=function(t,e){return U(t,e)},$={date:function(t){let e=P(t,1,"%c"),n=i(t,2)?new Date:new Date(1e3*W(t,2)),r=!1,a=0;if(e[a]==="!".charCodeAt(0)&&(r=!0,a++),e[a]==="*".charCodeAt(0)&&e[a+1]==="t".charCodeAt(0))l(t,0,9),F(t,n,r);else{new Uint8Array(4)[0]="%".charCodeAt(0);let r=new O;m(t,r),Z(t,r,e,n),D(r)}return 1},difftime:function(t){let e=W(t,1),n=W(t,2);return L(t,e-n),1},time:function(t){let e;return i(t,1)?e=new Date:(R(t,1,a),x(t,1),e=new Date(X(t,"year",-1,0),X(t,"month",-1,1),X(t,"day",-1,0),X(t,"hour",12,0),X(t,"min",0,0),X(t,"sec",0,0)),F(t,e)),p(t,Math.floor(e/1e3)),1},clock:function(t){return L(t,performance.now()/1e3),1}};t.exports.luaopen_os=function(t){return I(t,$),1}},function(t,e,n){"use strict";const{sprintf:r}=n(38),{LUA_INTEGER_FMT:a,LUA_INTEGER_FRMLEN:u,LUA_MININTEGER:l,LUA_NUMBER_FMT:s,LUA_NUMBER_FRMLEN:o,frexp:i,lua_getlocaledecpoint:c}=n(3),{LUA_TBOOLEAN:f,LUA_TFUNCTION:_,LUA_TNIL:p,LUA_TNUMBER:h,LUA_TSTRING:d,LUA_TTABLE:L,lua_call:g,lua_createtable:A,lua_dump:x,lua_gettable:T,lua_gettop:b,lua_isinteger:O,lua_isstring:k,lua_pop:v,lua_pushcclosure:E,lua_pushinteger:m,lua_pushlightuserdata:U,lua_pushliteral:N,lua_pushlstring:R,lua_pushnil:y,lua_pushnumber:S,lua_pushstring:w,lua_pushvalue:I,lua_remove:M,lua_setfield:P,lua_setmetatable:C,lua_settop:D,lua_toboolean:V,lua_tointeger:G,lua_tonumber:B,lua_tostring:K,lua_touserdata:j,lua_type:F,lua_upvalueindex:H}=n(2),{luaL_Buffer:X,luaL_addchar:z,luaL_addlstring:J,luaL_addsize:Y,luaL_addstring:Z,luaL_addvalue:q,luaL_argcheck:W,luaL_argerror:$,luaL_buffinit:Q,luaL_buffinitsize:tt,luaL_checkinteger:et,luaL_checknumber:nt,luaL_checkstack:rt,luaL_checkstring:at,luaL_checktype:ut,luaL_error:lt,luaL_newlib:st,luaL_optinteger:ot,luaL_optstring:it,luaL_prepbuffsize:ct,luaL_pushresult:ft,luaL_pushresultsize:_t,luaL_tolstring:pt,luaL_typename:ht}=n(7),dt=n(17),{luastring_eq:Lt,luastring_indexOf:gt,to_jsstring:At,to_luastring:xt}=n(5),Tt="%".charCodeAt(0),bt=function(t){let e=gt(t,0);return e>-1?e:t.length},Ot=function(t,e){return t>=0?t:0-t>e?0:e+t+1},kt=function(t,e,n,r){return J(r,e,n),0},vt=o.length+1,Et=function(t,e,n){let a=function(t){if(Object.is(t,1/0))return xt("inf");if(Object.is(t,-1/0))return xt("-inf");if(Number.isNaN(t))return xt("nan");if(0===t){let e=r(s+"x0p+0",t);return Object.is(t,-0)&&(e="-"+e),xt(e)}{let e="",n=i(t),a=n[0],u=n[1];return a<0&&(e+="-",a=-a),e+="0x",e+=(2*a).toString(16),e+=r("p%+d",u-=1),xt(e)}}(n);if(65===e[vt])for(let r=0;r<a.length;r++){let t=a[r];t>=97&&(a[r]=223&t)}else 97!==e[vt]&&lt(t,xt("modifiers for format '%%a'/'%%A' not implemented"));return a},mt=xt("-+ #0"),Ut=t=>97<=t&&t<=122||65<=t&&t<=90,Nt=t=>48<=t&&t<=57,Rt=t=>0<=t&&t<=31||127===t,yt=t=>33<=t&&t<=126,St=t=>97<=t&&t<=122,wt=t=>65<=t&&t<=90,It=t=>97<=t&&t<=122||65<=t&&t<=90||48<=t&&t<=57,Mt=t=>yt(t)&&!It(t),Pt=t=>32===t||t>=9&&t<=13,Ct=t=>48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102,Dt=function(t,e,n){switch(F(t,n)){case d:{let r=K(t,n);!function(t,e,n){z(t,34);let r=0;for(;n--;){if(34===e[r]||92===e[r]||10===e[r])z(t,92),z(t,e[r]);else if(Rt(e[r])){let n=""+e[r];Nt(e[r+1])&&(n="0".repeat(3-n.length)+n),Z(t,xt("\\"+n))}else z(t,e[r]);r++}z(t,34)}(e,r,r.length);break}case h:{let s;if(O(t,n)){let e=G(t,n);s=xt(r(e===l?"0x%"+u+"x":a,e))}else{let e=B(t,n);!function(t){if(gt(t,46)<0){let e=c(),n=gt(t,e);n&&(t[n]=46)}}(s=Et(t,xt(`%${u}a`),e))}Z(e,s);break}case p:case f:pt(t,n),q(e);break;default:$(t,n,xt("value has no literal form"))}},Vt=function(t,e,n,r){let a=n;for(;0!==e[a]&&gt(mt,e[a])>=0;)a++;a-n>=mt.length&&lt(t,xt("invalid format (repeated flags)")),Nt(e[a])&&a++,Nt(e[a])&&a++,46===e[a]&&(Nt(e[++a])&&a++,Nt(e[a])&&a++),Nt(e[a])&&lt(t,xt("invalid format (width or precision too long)")),r[0]=37;for(let u=0;u<a-n+1;u++)r[u+1]=e[n+u];return a},Gt=function(t,e){let n=t.length,r=e.length,a=t[n-1];for(let u=0;u<r;u++)t[u+n-1]=e[u];t[n+r-1]=a};class Bt{constructor(t){this.L=t,this.islittle=!0,this.maxalign=1}}const Kt=Nt,jt=function(t,e){if(t.off>=t.s.length||!Kt(t.s[t.off]))return e;{let e=0;do{e=10*e+(t.s[t.off++]-48)}while(t.off<t.s.length&&Kt(t.s[t.off])&&e<=214748363.8);return e}},Ft=function(t,e,n){let r=jt(e,n);return(r>16||r<=0)&&lt(t.L,xt("integral size (%d) out of limits [1,%d]"),r,16),r},Ht=function(t,e){let n={opt:e.s[e.off++],size:0};switch(n.opt){case 98:return n.size=1,n.opt=0,n;case 66:return n.size=1,n.opt=1,n;case 104:return n.size=2,n.opt=0,n;case 72:return n.size=2,n.opt=1,n;case 108:return n.size=4,n.opt=0,n;case 76:return n.size=4,n.opt=1,n;case 106:return n.size=4,n.opt=0,n;case 74:case 84:return n.size=4,n.opt=1,n;case 102:return n.size=4,n.opt=2,n;case 100:case 110:return n.size=8,n.opt=2,n;case 105:return n.size=Ft(t,e,4),n.opt=0,n;case 73:return n.size=Ft(t,e,4),n.opt=1,n;case 115:return n.size=Ft(t,e,4),n.opt=4,n;case 99:return n.size=jt(e,-1),-1===n.size&&lt(t.L,xt("missing size for format option 'c'")),n.opt=3,n;case 122:return n.opt=5,n;case 120:return n.size=1,n.opt=6,n;case 88:return n.opt=7,n;case 32:break;case 60:t.islittle=!0;break;case 62:t.islittle=!1;break;case 61:t.islittle=!0;break;case 33:t.maxalign=Ft(t,e,8);break;default:lt(t.L,xt("invalid format option '%c'"),n.opt)}return n.opt=8,n},Xt=function(t,e,n){let r={opt:NaN,size:NaN,ntoalign:NaN},a=Ht(t,n);r.size=a.size,r.opt=a.opt;let u=r.size;if(7===r.opt)if(n.off>=n.s.length||0===n.s[n.off])$(t.L,1,xt("invalid next option for option 'X'"));else{let e=Ht(t,n);u=e.size,3!==(e=e.opt)&&0!==u||$(t.L,1,xt("invalid next option for option 'X'"))}return u<=1||3===r.opt?r.ntoalign=0:(u>t.maxalign&&(u=t.maxalign),0!=(u&u-1)&&$(t.L,1,xt("format asks for alignment not power of 2")),r.ntoalign=u-(e&u-1)&u-1),r},zt=function(t,e,n,r,a){let u=ct(t,r);u[n?0:r-1]=255&e;for(let l=1;l<r;l++)e>>=8,u[n?l:r-1-l]=255&e;if(a&&r>4)for(let l=4;l<r;l++)u[n?l:r-1-l]=255;Y(t,r)},Jt=function(t,e,n,r,a){let u=0,l=r<=4?r:4;for(let s=l-1;s>=0;s--)u<<=8,u|=e[n?s:r-1-s];if(r<4){if(a){let t=1<<8*r-1;u=(u^t)-t}}else if(r>4){let s=!a||u>=0?0:255;for(let a=l;a<r;a++)e[n?a:r-1-a]!==s&&lt(t,xt("%d-byte integer does not fit into Lua Integer"),r)}return u},Yt=function(t,e,n,r){dt.lua_assert(e.length>=r);let a=new DataView(new ArrayBuffer(r));for(let u=0;u<r;u++)a.setUint8(u,e[u],n);return 4==r?a.getFloat32(0,n):a.getFloat64(0,n)},Zt=xt("^$*+?.([%-");class qt{constructor(t){this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=t,this.matchdepth=NaN,this.level=NaN,this.capture=[]}}const Wt=function(t,e){switch(t.p[e++]){case Tt:return e===t.p_end&&lt(t.L,xt("malformed pattern (ends with '%%')")),e+1;case 91:94===t.p[e]&&e++;do{e===t.p_end&&lt(t.L,xt("malformed pattern (missing ']')")),t.p[e++]===Tt&&e<t.p_end&&e++}while(93!==t.p[e]);return e+1;default:return e}},$t=function(t,e){switch(e){case 97:return Ut(t);case 65:return!Ut(t);case 99:return Rt(t);case 67:return!Rt(t);case 100:return Nt(t);case 68:return!Nt(t);case 103:return yt(t);case 71:return!yt(t);case 108:return St(t);case 76:return!St(t);case 112:return Mt(t);case 80:return!Mt(t);case 115:return Pt(t);case 83:return!Pt(t);case 117:return wt(t);case 85:return!wt(t);case 119:return It(t);case 87:return!It(t);case 120:return Ct(t);case 88:return!Ct(t);case 122:return 0===t;case 90:return 0!==t;default:return e===t}},Qt=function(t,e,n,r){let a=!0;for(94===t.p[n+1]&&(a=!1,n++);++n<r;)if(t.p[n]===Tt){if(n++,$t(e,t.p[n]))return a}else if(45===t.p[n+1]&&n+2<r){if(n+=2,t.p[n-2]<=e&&e<=t.p[n])return a}else if(t.p[n]===e)return a;return!a},te=function(t,e,n,r){if(e>=t.src_end)return!1;{let a=t.src[e];switch(t.p[n]){case 46:return!0;case Tt:return $t(a,t.p[n+1]);case 91:return Qt(t,a,n,r-1);default:return t.p[n]===a}}},ee=function(t,e,n){if(n>=t.p_end-1&&lt(t.L,xt("malformed pattern (missing arguments to '%%b'")),t.src[e]!==t.p[n])return null;{let r=t.p[n],a=t.p[n+1],u=1;for(;++e<t.src_end;)if(t.src[e]===a){if(0==--u)return e+1}else t.src[e]===r&&u++}return null},ne=function(t,e,n,r){let a=0;for(;te(t,e+a,n,r);)a++;for(;a>=0;){let n=se(t,e+a,r+1);if(n)return n;a--}return null},re=function(t,e,n,r){for(;;){let a=se(t,e,r+1);if(null!==a)return a;if(!te(t,e,n,r))return null;e++}},ae=function(t,e,n,r){let a,u=t.level;return u>=32&&lt(t.L,xt("too many captures")),t.capture[u]=t.capture[u]?t.capture[u]:{},t.capture[u].init=e,t.capture[u].len=r,t.level=u+1,null===(a=se(t,e,n))&&t.level--,a},ue=function(t,e,n){let r,a=function(t){let e=t.level;for(e--;e>=0;e--)if(-1===t.capture[e].len)return e;return lt(t.L,xt("invalid pattern capture"))}(t);return t.capture[a].len=e-t.capture[a].init,null===(r=se(t,e,n))&&(t.capture[a].len=-1),r},le=function(t,e,n){n=function(t,e){return(e-=49)<0||e>=t.level||-1===t.capture[e].len?lt(t.L,xt("invalid capture index %%%d"),e+1):e}(t,n);let r=t.capture[n].len;return t.src_end-e>=r&&function(t,e,n,r,a){return Lt(t.subarray(e,e+a),n.subarray(r,r+a))}(t.src,t.capture[n].init,t.src,e,r)?e+r:null},se=function(t,e,n){let r=!1,a=!0;for(0==t.matchdepth--&&lt(t.L,xt("pattern too complex"));a||r;)if(a=!1,n!==t.p_end)switch(r?void 0:t.p[n]){case 40:e=41===t.p[n+1]?ae(t,e,n+2,-2):ae(t,e,n+1,-1);break;case 41:e=ue(t,e,n+1);break;case 36:if(n+1!==t.p_end){r=!0;break}e=t.src.length-e==0?e:null;break;case Tt:switch(t.p[n+1]){case 98:null!==(e=ee(t,e,n+2))&&(n+=4,a=!0);break;case 102:{n+=2,91!==t.p[n]&&lt(t.L,xt("missing '[' after '%%f' in pattern"));let r=Wt(t,n),u=e===t.src_init?0:t.src[e-1];if(!Qt(t,u,n,r-1)&&Qt(t,e===t.src_end?0:t.src[e],n,r-1)){n=r,a=!0;break}e=null;break}case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:null!==(e=le(t,e,t.p[n+1]))&&(n+=2,a=!0);break;default:r=!0}break;default:{r=!1;let u=Wt(t,n);if(te(t,e,n,u))switch(t.p[u]){case 63:{let r;null!==(r=se(t,e+1,u+1))?e=r:(n=u+1,a=!0);break}case 43:e++;case 42:e=ne(t,e,n,u);break;case 45:e=re(t,e,n,u);break;default:e++,n=u,a=!0}else{if(42===t.p[u]||63===t.p[u]||45===t.p[u]){n=u+1,a=!0;break}e=null}break}}return t.matchdepth++,e},oe=function(t,e,n,r){if(e>=t.level)0===e?R(t.L,t.src.subarray(n,r),r-n):lt(t.L,xt("invalid capture index %%%d"),e+1);else{let n=t.capture[e].len;-1===n&&lt(t.L,xt("unfinished capture")),-2===n?m(t.L,t.capture[e].init-t.src_init+1):R(t.L,t.src.subarray(t.capture[e].init),n)}},ie=function(t,e,n){let r=0===t.level&&t.src.subarray(e)?1:t.level;rt(t.L,r,"too many captures");for(let a=0;a<r;a++)oe(t,a,e,n);return r},ce=function(t,e,n,r,a,u){t.L=e,t.matchdepth=200,t.src=n,t.src_init=0,t.src_end=r,t.p=a,t.p_end=u},fe=function(t){t.level=0,dt.lua_assert(200===t.matchdepth)},_e=function(t,e){let n=at(t,1),r=at(t,2),a=n.length,u=r.length,l=Ot(ot(t,3,1),a);if(l<1)l=1;else if(l>a+1)return y(t),1;if(e&&(V(t,4)||function(t,e){for(let n=0;n<e;n++)if(-1!==gt(Zt,t[n]))return!1;return!0}(r,u))){let e=function(t,e,n){var r=0,a=e.length;if(0===a)return r;for(;-1!==(r=t.indexOf(e[0],r));r++)if(Lt(t.subarray(r,r+a),e))return r;return-1}(n.subarray(l-1),r);if(e>-1)return m(t,l+e),m(t,l+e+u-1),2}else{let s=new qt(t),o=l-1,i=94===r[0];i&&(r=r.subarray(1),u--),ce(s,t,n,a,r,u);do{let n;if(fe(s),null!==(n=se(s,o,0)))return e?(m(t,o+1),m(t,n),ie(s,null,0)+2):ie(s,o,n)}while(o++<s.src_end&&!i)}return y(t),1},pe=function(t){let e=j(t,H(3));e.ms.L=t;for(let n=e.src;n<=e.ms.src_end;n++){let t;if(fe(e.ms),null!==(t=se(e.ms,n,e.p))&&t!==e.lastmatch)return e.src=e.lastmatch=t,ie(e.ms,n,t)}return 0},he=function(t,e,n,r,a){let u=t.L;switch(a){case _:{I(u,3);let e=ie(t,n,r);g(u,e,1);break}case L:oe(t,0,n,r),T(u,3);break;default:return void function(t,e,n,r){let a=t.L,u=K(a,3),l=u.length;for(let s=0;s<l;s++)u[s]!==Tt?z(e,u[s]):Nt(u[++s])?48===u[s]?J(e,t.src.subarray(n,r),r-n):(oe(t,u[s]-49,n,r),pt(a,-1),M(a,-2),q(e)):(u[s]!==Tt&&lt(a,xt("invalid use of '%c' in replacement string"),Tt),z(e,u[s]))}(t,e,n,r)}V(u,-1)?k(u,-1)||lt(u,xt("invalid replacement value (a %s)"),ht(u,-1)):(v(u,1),R(u,t.src.subarray(n,r),r-n)),q(e)},de={byte:function(t){let e=at(t,1),n=e.length,r=Ot(ot(t,2,1),n),a=Ot(ot(t,3,r),n);if(r<1&&(r=1),a>n&&(a=n),r>a)return 0;if(a-r>=Number.MAX_SAFE_INTEGER)return lt(t,"string slice too long");let u=a-r+1;rt(t,u,"string slice too long");for(let l=0;l<u;l++)m(t,e[r+l-1]);return u},char:function(t){let e=b(t),n=new X,r=tt(t,n,e);for(let a=1;a<=e;a++){let e=et(t,a);W(t,e>=0&&e<=255,"value out of range"),r[a-1]=e}return _t(n,e),1},dump:function(t){let e=new X,n=V(t,2);return ut(t,1,_),D(t,1),Q(t,e),0!==x(t,kt,e,n)?lt(t,xt("unable to dump given function")):(ft(e),1)},find:function(t){return _e(t,1)},format:function(t){let e=b(t),n=1,a=at(t,n),l=0,s=new X;for(Q(t,s);l<a.length;)if(a[l]!==Tt)z(s,a[l++]);else if(a[++l]===Tt)z(s,a[l++]);else{let o=[];switch(++n>e&&$(t,n,xt("no value")),l=Vt(t,a,l,o),String.fromCharCode(a[l++])){case"c":z(s,et(t,n));break;case"d":case"i":case"o":case"u":case"x":case"X":{let e=et(t,n);Gt(o,xt(u,!0)),Z(s,xt(r(String.fromCharCode(...o),e)));break}case"a":case"A":Gt(o,xt(u,!0)),Z(s,Et(t,o,nt(t,n)));break;case"e":case"E":case"f":case"g":case"G":{let e=nt(t,n);Gt(o,xt(u,!0)),Z(s,xt(r(String.fromCharCode(...o),e)));break}case"q":Dt(t,s,n);break;case"s":{let e=pt(t,n);o.length<=2||0===o[2]?q(s):(W(t,e.length===bt(e),n,"string contains zeros"),gt(o,46)<0&&e.length>=100?q(s):(Z(s,xt(r(String.fromCharCode(...o),At(e)))),v(t,1)));break}default:return lt(t,xt("invalid option '%%%c' to 'format'"),a[l-1])}}return ft(s),1},gmatch:function(t){let e=at(t,1),n=at(t,2),r=e.length,a=n.length;D(t,2);let u=new class{constructor(){this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new qt}};return U(t,u),ce(u.ms,t,e,r,n,a),u.src=0,u.p=0,u.lastmatch=null,E(t,pe,3),1},gsub:function(t){let e=at(t,1),n=e.length,r=at(t,2),a=r.length,u=null,l=F(t,3),s=ot(t,4,n+1),o=94===r[0],i=0,c=new qt(t),f=new X;for(W(t,l===h||l===d||l===_||l===L,3,"string/function/table expected"),Q(t,f),o&&(r=r.subarray(1),a--),ce(c,t,e,n,r,a),e=0,r=0;i<s;){let t;if(fe(c),null!==(t=se(c,e,r))&&t!==u)i++,he(c,f,e,t,l),e=u=t;else{if(!(e<c.src_end))break;z(f,c.src[e++])}if(o)break}return J(f,c.src.subarray(e,c.src_end),c.src_end-e),ft(f),m(t,i),2},len:function(t){return m(t,at(t,1).length),1},lower:function(t){let e=at(t,1),n=e.length,r=new Uint8Array(n);for(let a=0;a<n;a++){let t=e[a];wt(t)&&(t|=32),r[a]=t}return w(t,r),1},match:function(t){return _e(t,0)},pack:function(t){let e=new X,n=new Bt(t),r={s:at(t,1),off:0},a=1,u=0;for(y(t),Q(t,e);r.off<r.s.length;){let l=Xt(n,u,r),s=l.opt,o=l.size,i=l.ntoalign;for(u+=i+o;i-- >0;)z(e,0);switch(a++,s){case 0:{let r=et(t,a);if(o<4){let e=1<<8*o-1;W(t,-e<=r&&r<e,a,"integer overflow")}zt(e,r,n.islittle,o,r<0);break}case 1:{let r=et(t,a);o<4&&W(t,r>>>0<1<<8*o,a,"unsigned overflow"),zt(e,r>>>0,n.islittle,o,!1);break}case 2:{let r=ct(e,o),u=nt(t,a),l=new DataView(r.buffer,r.byteOffset,r.byteLength);4===o?l.setFloat32(0,u,n.islittle):l.setFloat64(0,u,n.islittle),Y(e,o);break}case 3:{let n=at(t,a),r=n.length;for(W(t,r<=o,a,"string longer than given size"),J(e,n,r);r++<o;)z(e,0);break}case 4:{let r=at(t,a),l=r.length;W(t,o>=4||l<1<<8*o,a,"string length does not fit in given size"),zt(e,l,n.islittle,o,0),J(e,r,l),u+=l;break}case 5:{let n=at(t,a),r=n.length;W(t,gt(n,0)<0,a,"strings contains zeros"),J(e,n,r),z(e,0),u+=r+1;break}case 6:z(e,0);case 7:case 8:a--}}return ft(e),1},packsize:function(t){let e=new Bt(t),n={s:at(t,1),off:0},r=0;for(;n.off<n.s.length;){let a=Xt(e,r,n),u=a.opt,l=a.size,s=a.ntoalign;switch(W(t,r<=2147483647-(l+=s),1,"format result too large"),r+=l,u){case 4:case 5:$(t,1,"variable-length format")}}return m(t,r),1},rep:function(t){let e=at(t,1),n=e.length,r=et(t,2),a=it(t,3,""),u=a.length;if(r<=0)N(t,"");else{if(n+u<n||n+u>2147483647/r)return lt(t,xt("resulting string too large"));{let l=r*n+(r-1)*u,s=new X,o=tt(t,s,l),i=0;for(;r-- >1;)o.set(e,i),i+=n,u>0&&(o.set(a,i),i+=u);o.set(e,i),_t(s,l)}}return 1},reverse:function(t){let e=at(t,1),n=e.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=e[n-1-a];return w(t,r),1},sub:function(t){let e=at(t,1),n=e.length,r=Ot(et(t,2),n),a=Ot(ot(t,3,-1),n);return r<1&&(r=1),a>n&&(a=n),r<=a?w(t,e.subarray(r-1,r-1+(a-r+1))):N(t,""),1},unpack:function(t){let e=new Bt(t),n={s:at(t,1),off:0},r=at(t,2),a=r.length,u=Ot(ot(t,3,1),a)-1,l=0;for(W(t,u<=a&&u>=0,3,"initial position out of string");n.off<n.s.length;){let s=Xt(e,u,n),o=s.opt,i=s.size,c=s.ntoalign;switch(u+c+i>a&&$(t,2,xt("data string too short")),u+=c,rt(t,2,"too many results"),l++,o){case 0:case 1:{let n=Jt(t,r.subarray(u),e.islittle,i,0===o);m(t,n);break}case 2:{let n=Yt(0,r.subarray(u),e.islittle,i);S(t,n);break}case 3:w(t,r.subarray(u,u+i));break;case 4:{let n=Jt(t,r.subarray(u),e.islittle,i,0);W(t,u+n+i<=a,2,"data string too short"),w(t,r.subarray(u+i,u+i+n)),u+=n;break}case 5:{let e=gt(r,0,u);-1===e&&(e=r.length-u),w(t,r.subarray(u,e)),u=e+1;break}case 7:case 6:case 8:l--}u+=i}return m(t,u+1),l+1},upper:function(t){let e=at(t,1),n=e.length,r=new Uint8Array(n);for(let a=0;a<n;a++){let t=e[a];St(t)&&(t&=223),r[a]=t}return w(t,r),1}};t.exports.luaopen_string=function(t){return st(t,de),function(t){A(t,0,1),N(t,""),I(t,-2),C(t,-2),v(t,1),I(t,-2),P(t,-2,xt("__index",!0)),v(t,1)}(t),1}},function(t,e,n){"use strict";const{lua_gettop:r,lua_pushcfunction:a,lua_pushfstring:u,lua_pushinteger:l,lua_pushnil:s,lua_pushstring:o,lua_pushvalue:i,lua_setfield:c,lua_tointeger:f}=n(2),{luaL_Buffer:_,luaL_addvalue:p,luaL_argcheck:h,luaL_buffinit:d,luaL_checkinteger:L,luaL_checkstack:g,luaL_checkstring:A,luaL_error:x,luaL_newlib:T,luaL_optinteger:b,luaL_pushresult:O}=n(7),{luastring_of:k,to_luastring:v}=n(5),E=function(t){return 128==(192&t)},m=function(t,e){return t>=0?t:0-t>e?0:e+t+1},U=[255,127,2047,65535],N=function(t,e){let n=t[e],r=0;if(n<128)r=n;else{let a=0;for(;64&n;){let u=t[e+ ++a];if(128!=(192&u))return null;r=r<<6|63&u,n<<=1}if(r|=(127&n)<<5*a,a>3||r>1114111||r<=U[a])return null;e+=a}return{code:r,pos:e+1}},R=v("%U"),y=function(t,e){let n=L(t,e);h(t,0<=n&&n<=1114111,e,"value out of range"),u(t,R,n)},S=function(t){let e=A(t,1),n=e.length,r=f(t,2)-1;if(r<0)r=0;else if(r<n)for(r++;E(e[r]);)r++;if(r>=n)return 0;{let n=N(e,r);return null===n||E(e[n.pos])?x(t,v("invalid UTF-8 code")):(l(t,r+1),l(t,n.code),2)}},w={char:function(t){let e=r(t);if(1===e)y(t,1);else{let n=new _;d(t,n);for(let r=1;r<=e;r++)y(t,r),p(n);O(n)}return 1},codepoint:function(t){let e=A(t,1),n=m(b(t,2,1),e.length),r=m(b(t,3,n),e.length);if(h(t,n>=1,2,"out of range"),h(t,r<=e.length,3,"out of range"),n>r)return 0;if(r-n>=Number.MAX_SAFE_INTEGER)return x(t,"string slice too long");let a=r-n+1;for(g(t,a,"string slice too long"),a=0,n-=1;n<r;){let r=N(e,n);if(null===r)return x(t,"invalid UTF-8 code");l(t,r.code),n=r.pos,a++}return a},codes:function(t){return A(t,1),a(t,S),i(t,1),l(t,0),3},len:function(t){let e=0,n=A(t,1),r=n.length,a=m(b(t,2,1),r),u=m(b(t,3,-1),r);for(h(t,1<=a&&--a<=r,2,"initial position out of string"),h(t,--u<r,3,"final position out of string");a<=u;){let r=N(n,a);if(null===r)return s(t),l(t,a+1),2;a=r.pos,e++}return l(t,e),1},offset:function(t){let e=A(t,1),n=L(t,2),r=n>=0?1:e.length+1;if(r=m(b(t,3,r),e.length),h(t,1<=r&&--r<=e.length,3,"position out of range"),0===n)for(;r>0&&E(e[r]);)r--;else if(E(e[r])&&x(t,"initial position is a continuation byte"),n<0)for(;n<0&&r>0;){do{r--}while(r>0&&E(e[r]));n++}else for(n--;n>0&&r<e.length;){do{r++}while(E(e[r]));n--}return 0===n?l(t,r+1):s(t),1}},I=k(91,0,45,127,194,45,244,93,91,128,45,191,93,42);t.exports.luaopen_utf8=function(t){return T(t,w),o(t,I),c(t,-2,v("charpattern",!0)),1}},function(t,e,n){"use strict";const{LUA_OPLT:r,LUA_TNUMBER:a,lua_compare:u,lua_gettop:l,lua_isinteger:s,lua_isnoneornil:o,lua_pushboolean:i,lua_pushinteger:c,lua_pushliteral:f,lua_pushnil:_,lua_pushnumber:p,lua_pushvalue:h,lua_setfield:d,lua_settop:L,lua_tointeger:g,lua_tointegerx:A,lua_type:x}=n(2),{luaL_argcheck:T,luaL_argerror:b,luaL_checkany:O,luaL_checkinteger:k,luaL_checknumber:v,luaL_error:E,luaL_newlib:m,luaL_optnumber:U}=n(7),{LUA_MAXINTEGER:N,LUA_MININTEGER:R,lua_numbertointeger:y}=n(3),{to_luastring:S}=n(5);let w;const I=function(){return w=1103515245*w+12345&2147483647},M=function(t,e){let n=y(e);!1!==n?c(t,n):p(t,e)},P={abs:function(t){if(s(t,1)){let e=g(t,1);e<0&&(e=0|-e),c(t,e)}else p(t,Math.abs(v(t,1)));return 1},acos:function(t){return p(t,Math.acos(v(t,1))),1},asin:function(t){return p(t,Math.asin(v(t,1))),1},atan:function(t){let e=v(t,1),n=U(t,2,1);return p(t,Math.atan2(e,n)),1},ceil:function(t){return s(t,1)?L(t,1):M(t,Math.ceil(v(t,1))),1},cos:function(t){return p(t,Math.cos(v(t,1))),1},deg:function(t){return p(t,v(t,1)*(180/Math.PI)),1},exp:function(t){return p(t,Math.exp(v(t,1))),1},floor:function(t){return s(t,1)?L(t,1):M(t,Math.floor(v(t,1))),1},fmod:function(t){if(s(t,1)&&s(t,2)){let e=g(t,2);0===e?b(t,2,"zero"):c(t,g(t,1)%e|0)}else{let e=v(t,1),n=v(t,2);p(t,e%n)}return 1},log:function(t){let e,n=v(t,1);if(o(t,2))e=Math.log(n);else{let r=v(t,2);e=2===r?Math.log2(n):10===r?Math.log10(n):Math.log(n)/Math.log(r)}return p(t,e),1},max:function(t){let e=l(t),n=1;T(t,e>=1,1,"value expected");for(let a=2;a<=e;a++)u(t,n,a,r)&&(n=a);return h(t,n),1},min:function(t){let e=l(t),n=1;T(t,e>=1,1,"value expected");for(let a=2;a<=e;a++)u(t,a,n,r)&&(n=a);return h(t,n),1},modf:function(t){if(s(t,1))L(t,1),p(t,0);else{let e=v(t,1),n=e<0?Math.ceil(e):Math.floor(e);M(t,n),p(t,e===n?0:e-n)}return 2},rad:function(t){return p(t,v(t,1)*(Math.PI/180)),1},random:function(t){let e,n,r=void 0===w?Math.random():I()/2147483648;switch(l(t)){case 0:return p(t,r),1;case 1:e=1,n=k(t,1);break;case 2:e=k(t,1),n=k(t,2);break;default:return E(t,"wrong number of arguments")}return T(t,e<=n,1,"interval is empty"),T(t,e>=0||n<=N+e,1,"interval too large"),r*=n-e+1,c(t,Math.floor(r)+e),1},randomseed:function(t){return function(t){0==(w=0|t)&&(w=1)}(v(t,1)),I(),0},sin:function(t){return p(t,Math.sin(v(t,1))),1},sqrt:function(t){return p(t,Math.sqrt(v(t,1))),1},tan:function(t){return p(t,Math.tan(v(t,1))),1},tointeger:function(t){let e=A(t,1);return!1!==e?c(t,e):(O(t,1),_(t)),1},type:function(t){return x(t,1)===a?s(t,1)?f(t,"integer"):f(t,"float"):(O(t,1),_(t)),1},ult:function(t){let e=k(t,1),n=k(t,2);return i(t,e>=0?n<0||e<n:n<0&&e<n),1}};t.exports.luaopen_math=function(t){return m(t,P),p(t,Math.PI),d(t,-2,S("pi",!0)),p(t,1/0),d(t,-2,S("huge",!0)),c(t,N),d(t,-2,S("maxinteger",!0)),c(t,R),d(t,-2,S("mininteger",!0)),1}},function(t,e,n){"use strict";const{LUA_MASKCALL:r,LUA_MASKCOUNT:a,LUA_MASKLINE:u,LUA_MASKRET:l,LUA_REGISTRYINDEX:s,LUA_TFUNCTION:o,LUA_TNIL:i,LUA_TTABLE:c,LUA_TUSERDATA:f,lua_Debug:_,lua_call:p,lua_checkstack:h,lua_gethook:d,lua_gethookcount:L,lua_gethookmask:g,lua_getinfo:A,lua_getlocal:x,lua_getmetatable:T,lua_getstack:b,lua_getupvalue:O,lua_getuservalue:k,lua_insert:v,lua_iscfunction:E,lua_isfunction:m,lua_isnoneornil:U,lua_isthread:N,lua_newtable:R,lua_pcall:y,lua_pop:S,lua_pushboolean:w,lua_pushfstring:I,lua_pushinteger:M,lua_pushlightuserdata:P,lua_pushliteral:C,lua_pushnil:D,lua_pushstring:V,lua_pushvalue:G,lua_rawgetp:B,lua_rawsetp:K,lua_rotate:j,lua_setfield:F,lua_sethook:H,lua_setlocal:X,lua_setmetatable:z,lua_settop:J,lua_setupvalue:Y,lua_setuservalue:Z,lua_tojsstring:q,lua_toproxy:W,lua_tostring:$,lua_tothread:Q,lua_touserdata:tt,lua_type:et,lua_upvalueid:nt,lua_upvaluejoin:rt,lua_xmove:at}=n(2),{luaL_argcheck:ut,luaL_argerror:lt,luaL_checkany:st,luaL_checkinteger:ot,luaL_checkstring:it,luaL_checktype:ct,luaL_error:ft,luaL_loadbuffer:_t,luaL_newlib:pt,luaL_optinteger:ht,luaL_optstring:dt,luaL_traceback:Lt,lua_writestringerror:gt}=n(7),At=n(17),{luastring_indexOf:xt,to_luastring:Tt}=n(5),bt=function(t,e,n){t===e||h(e,n)||ft(t,Tt("stack overflow",!0))},Ot=function(t){return N(t,1)?{arg:1,thread:Q(t,1)}:{arg:0,thread:t}},kt=function(t,e,n){V(t,n),F(t,-2,e)},vt=function(t,e,n){M(t,n),F(t,-2,e)},Et=function(t,e,n){w(t,n),F(t,-2,e)},mt=function(t,e,n){t==e?j(t,-2,1):at(e,t,1),F(t,-2,n)},Ut=function(t,e){let n=ot(t,2);ct(t,1,o);let r=e?O(t,1,n):Y(t,1,n);return null===r?0:(V(t,r),v(t,-(e+1)),e+1)},Nt=function(t,e,n){let r=ot(t,n);return ct(t,e,o),ut(t,null!==O(t,e,r),n,"invalid upvalue index"),r},Rt=Tt("__hooks__",!0),yt=["call","return","line","count","tail call"].map(t=>Tt(t)),St=function(t,e){B(t,s,Rt);let n=tt(t,-1).get(t);n&&(n(t),V(t,yt[e.event]),e.currentline>=0?M(t,e.currentline):D(t),At.lua_assert(A(t,Tt("lS"),e)),p(t,2,0))},wt={gethook:function(t){let e=Ot(t).thread,n=new Uint8Array(5),a=g(e),o=d(e);return null===o?D(t):o!==St?C(t,"external hook"):(B(t,s,Rt),tt(t,-1).get(e)(t)),V(t,function(t,e){let n=0;return t&r&&(e[n++]=99),t&l&&(e[n++]=114),t&u&&(e[n++]=108),e.subarray(0,n)}(a,n)),M(t,L(e)),3},getinfo:function(t){let e=new _,n=Ot(t),r=n.arg,a=n.thread,u=dt(t,r+2,"flnStu");if(bt(t,a,3),m(t,r+1))u=I(t,Tt(">%s"),u),G(t,r+1),at(t,a,1);else if(!b(a,ot(t,r+1),e))return D(t),1;return A(a,u,e)||lt(t,r+2,"invalid option"),R(t),xt(u,83)>-1&&(kt(t,Tt("source",!0),e.source),kt(t,Tt("short_src",!0),e.short_src),vt(t,Tt("linedefined",!0),e.linedefined),vt(t,Tt("lastlinedefined",!0),e.lastlinedefined),kt(t,Tt("what",!0),e.what)),xt(u,108)>-1&&vt(t,Tt("currentline",!0),e.currentline),xt(u,117)>-1&&(vt(t,Tt("nups",!0),e.nups),vt(t,Tt("nparams",!0),e.nparams),Et(t,Tt("isvararg",!0),e.isvararg)),xt(u,110)>-1&&(kt(t,Tt("name",!0),e.name),kt(t,Tt("namewhat",!0),e.namewhat)),xt(u,116)>-1&&Et(t,Tt("istailcall",!0),e.istailcall),xt(u,76)>-1&&mt(t,a,Tt("activelines",!0)),xt(u,102)>-1&&mt(t,a,Tt("func",!0)),1},getlocal:function(t){let e=Ot(t),n=e.thread,r=e.arg,a=new _,u=ot(t,r+2);if(m(t,r+1))return G(t,r+1),V(t,x(t,null,u)),1;{let e=ot(t,r+1);if(!b(n,e,a))return lt(t,r+1,"level out of range");bt(t,n,1);let l=x(n,a,u);return l?(at(n,t,1),V(t,l),j(t,-2,1),2):(D(t),1)}},getmetatable:function(t){return st(t,1),T(t,1)||D(t),1},getregistry:function(t){return G(t,s),1},getupvalue:function(t){return Ut(t,1)},getuservalue:function(t){return et(t,1)!==f?D(t):k(t,1),1},sethook:function(t){let e,n,c,f,_=Ot(t),p=_.thread,h=_.arg;if(U(t,h+1))J(t,h+1),c=null,e=0,n=0;else{const s=it(t,h+2);ct(t,h+1,o),n=ht(t,h+3,0),c=St,e=function(t,e){let n=0;return xt(t,99)>-1&&(n|=r),xt(t,114)>-1&&(n|=l),xt(t,108)>-1&&(n|=u),e>0&&(n|=a),n}(s,n)}B(t,s,Rt)===i?(f=new WeakMap,P(t,f),K(t,s,Rt)):f=tt(t,-1);let d=W(t,h+1);return f.set(p,d),H(p,c,e,n),0},setlocal:function(t){let e=Ot(t),n=e.thread,r=e.arg,a=new _,u=ot(t,r+1),l=ot(t,r+2);if(!b(n,u,a))return lt(t,r+1,"level out of range");st(t,r+3),J(t,r+3),bt(t,n,1),at(t,n,1);let s=X(n,a,l);return null===s&&S(n,1),V(t,s),1},setmetatable:function(t){const e=et(t,2);return ut(t,e==i||e==c,2,"nil or table expected"),J(t,2),z(t,1),1},setupvalue:function(t){return st(t,3),Ut(t,0)},setuservalue:function(t){return ct(t,1,f),st(t,2),J(t,2),Z(t,1),1},traceback:function(t){let e=Ot(t),n=e.thread,r=e.arg,a=$(t,r+1);if(null!==a||U(t,r+1)){let e=ht(t,r+2,t===n?1:0);Lt(t,n,a,e)}else G(t,r+1);return 1},upvalueid:function(t){let e=Nt(t,1,2);return P(t,nt(t,1,e)),1},upvaluejoin:function(t){let e=Nt(t,1,2),n=Nt(t,3,4);return ut(t,!E(t,1),1,"Lua function expected"),ut(t,!E(t,3),3,"Lua function expected"),rt(t,1,e,3,n),0}};let It;"undefined"!=typeof window&&(It=function(){let t=prompt("lua_debug>","");return null!==t?t:""}),It&&(wt.debug=function(t){for(;;){let e=It();if("cont"===e)return 0;if(0===e.length)continue;let n=Tt(e);(_t(t,n,n.length,Tt("=(debug command)",!0))||y(t,0,0,0))&&gt(q(t,-1),"\n"),J(t,0)}}),t.exports.luaopen_debug=function(t){return pt(t,wt),1}},function(t,e,n){"use strict";const{LUA_DIRSEP:r,LUA_EXEC_DIR:a,LUA_JSPATH_DEFAULT:u,LUA_PATH_DEFAULT:l,LUA_PATH_MARK:s,LUA_PATH_SEP:o}=n(3),{LUA_OK:i,LUA_REGISTRYINDEX:c,LUA_TNIL:f,LUA_TTABLE:_,lua_callk:p,lua_createtable:h,lua_getfield:d,lua_insert:L,lua_isfunction:g,lua_isnil:A,lua_isstring:x,lua_newtable:T,lua_pop:b,lua_pushboolean:O,lua_pushcclosure:k,lua_pushcfunction:v,lua_pushfstring:E,lua_pushglobaltable:m,lua_pushlightuserdata:U,lua_pushliteral:N,lua_pushlstring:R,lua_pushnil:y,lua_pushstring:S,lua_pushvalue:w,lua_rawgeti:I,lua_rawgetp:M,lua_rawseti:P,lua_rawsetp:C,lua_remove:D,lua_setfield:V,lua_setmetatable:G,lua_settop:B,lua_toboolean:K,lua_tostring:j,lua_touserdata:F,lua_upvalueindex:H}=n(2),{LUA_LOADED_TABLE:X,LUA_PRELOAD_TABLE:z,luaL_Buffer:J,luaL_addvalue:Y,luaL_buffinit:Z,luaL_checkstring:q,luaL_error:W,luaL_getsubtable:$,luaL_gsub:Q,luaL_len:tt,luaL_loadfile:et,luaL_newlib:nt,luaL_optstring:rt,luaL_pushresult:at,luaL_setfuncs:ut}=n(7),lt=n(17),{luastring_indexOf:st,to_jsstring:ot,to_luastring:it,to_uristring:ct}=n(5),ft=n(0),_t="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:(0,eval)("this"),pt=it("__JSLIBS__"),ht=r,dt=r,Lt=it("luaopen_"),gt=it("_"),At=it("\x01");let xt,Tt;xt=function(t,e,n){e=ct(e);let r=new XMLHttpRequest;if(r.open("GET",e,!1),r.send(),r.status<200||r.status>=300)return S(t,it(`${r.status}: ${r.statusText}`)),null;let a,u=r.response;/\/\/[#@] sourceURL=/.test(u)||(u+=" //# sourceURL="+e);try{a=Function("fengari",u)}catch(e){return S(t,it(`${e.name}: ${e.message}`)),null}let l=a(ft);return"function"==typeof l||"object"==typeof l&&null!==l?l:void 0===l?_t:(S(t,it(`library returned unexpected type (${typeof l})`)),null)},Tt=function(t){t=ct(t);let e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(),e.status>=200&&e.status<=299};const bt=function(t,e,n){let r=vt(t,e);if(null===r){if(null===(r=xt(t,e,(n[0],"*".charCodeAt(0)))))return 1;Et(t,e,r)}if(n[0]==="*".charCodeAt(0))return O(t,1),0;{let e=function(t,e,n){let r=e[ot(n)];return r&&"function"==typeof r?r:(E(t,it("undefined symbol: %s"),n),null)}(t,r,n);return null===e?2:(v(t,e),0)}},Ot=_t,kt=function(t,e,n,r){let a=`${n}${lt.LUA_VERSUFFIX}`;S(t,it(a));let u=Ot[a];void 0===u&&(u=Ot[n]),void 0===u||function(t){d(t,c,it("LUA_NOENV"));let e=K(t,-1);return b(t,1),e}(t)?S(t,r):(u=Q(t,it(u),it(o+o,!0),it(o+ot(At)+o,!0)),Q(t,u,At,r),D(t,-2)),V(t,-3,e),b(t,1)},vt=function(t,e){M(t,c,pt),d(t,-1,e);let n=F(t,-1);return b(t,2),n},Et=function(t,e,n){M(t,c,pt),U(t,n),w(t,-1),V(t,-3,e),P(t,-2,tt(t,-2)+1),b(t,1)},mt=function(t,e){for(;e[0]===o.charCodeAt(0);)e=e.subarray(1);if(0===e.length)return null;let n=st(e,o.charCodeAt(0));return n<0&&(n=e.length),R(t,e,n),e.subarray(n)},Ut=function(t,e,n,r,a){let u=new J;for(Z(t,u),0!==r[0]&&(e=Q(t,e,r,a));null!==(n=mt(t,n));){let n=Q(t,j(t,-1),it(s,!0),e);if(D(t,-2),Tt(n))return n;E(t,it("\n\tno file '%s'"),n),D(t,-2),Y(u)}return at(u),null},Nt=function(t,e,n,r){d(t,H(1),n);let a=j(t,-1);return null===a&&W(t,it("'package.%s' must be a string"),n),Ut(t,e,a,it("."),r)},Rt=function(t,e,n){return e?(S(t,n),2):W(t,it("error loading module '%s' from file '%s':\n\t%s"),j(t,1),n,j(t,-1))},yt=function(t){let e=q(t,1),n=Nt(t,e,it("path",!0),it(dt,!0));return null===n?1:Rt(t,et(t,n)===i,n)},St=function(t,e,n){let r;n=Q(t,n,it("."),gt);let a=st(n,"-".charCodeAt(0));if(a>=0){r=R(t,n,a),r=E(t,it("%s%s"),Lt,r);let u=bt(t,e,r);if(2!==u)return u;n=a+1}return r=E(t,it("%s%s"),Lt,n),bt(t,e,r)},wt=function(t){let e=q(t,1),n=Nt(t,e,it("jspath",!0),it(ht,!0));return null===n?1:Rt(t,0===St(t,n,e),n)},It=function(t){let e,n=q(t,1),r=st(n,".".charCodeAt(0));if(r<0)return 0;R(t,n,r);let a=Nt(t,j(t,-1),it("jspath",!0),it(ht,!0));return null===a?1:0!==(e=St(t,a,n))?2!=e?Rt(t,0,a):(S(t,it("\n\tno module '%s' in file '%s'"),n,a),1):(S(t,a),2)},Mt=function(t){let e=q(t,1);return d(t,c,z),d(t,-1,e)===f&&E(t,it("\n\tno field package.preload['%s']"),e),1},Pt=function(t,e,n){for(;e===i?(I(t,3,n.i)===f&&(b(t,1),at(n.msg),W(t,it("module '%s' not found:%s"),n.name,j(t,-1))),S(t,n.name),p(t,1,2,n,Pt)):e=i,!g(t,-2);n.i++)x(t,-2)?(b(t,1),Y(n.msg)):b(t,2);return n.k(t,i,n.ctx)},Ct=function(t,e,n){return S(t,n),L(t,-2),p(t,2,1,n,Dt),Dt(t,i,n)},Dt=function(t,e,n){let r=n;return A(t,-1)||V(t,2,r),d(t,2,r)==f&&(O(t,1),w(t,-1),V(t,2,r)),1},Vt={loadlib:function(t){let e=q(t,1),n=q(t,2),r=bt(t,e,n);return 0===r?1:(y(t),L(t,-2),N(t,1===r?"open":"init"),3)},searchpath:function(t){return null!==Ut(t,q(t,1),q(t,2),rt(t,3,"."),rt(t,4,r))?1:(y(t),L(t,-2),2)}},Gt={require:function(t){let e=q(t,1);return B(t,1),d(t,c,X),d(t,2,e),K(t,-1)?1:(b(t,1),function(t,e,n,r){let a=new J;return Z(t,a),d(t,H(1),it("searchers",!0))!==_&&W(t,it("'package.searchers' must be a table")),Pt(t,i,{name:e,i:1,msg:a,ctx:n,k:r})}(t,e,e,Ct))}};t.exports.luaopen_package=function(t){return function(t){T(t),h(t,0,1),G(t,-2),C(t,c,pt)}(t),nt(t,Vt),function(t){let e=[Mt,yt,wt,It,null];h(t);for(let n=0;e[n];n++)w(t,-2),k(t,e[n],1),P(t,-2,n+1);V(t,-2,it("searchers",!0))}(t),kt(t,it("path",!0),"LUA_PATH",l),kt(t,it("jspath",!0),"LUA_JSPATH",u),N(t,r+"\n"+o+"\n"+s+"\n"+a+"\n-\n"),V(t,-2,it("config",!0)),$(t,c,X),V(t,-2,it("loaded",!0)),$(t,c,z),V(t,-2,it("preload",!0)),m(t),w(t,-2),ut(t,Gt,1),b(t,1),1}},function(t,e,n){const{lua_pushinteger:r,lua_pushliteral:a,lua_setfield:u}=n(2),{luaL_newlib:l}=n(7),{FENGARI_AUTHORS:s,FENGARI_COPYRIGHT:o,FENGARI_RELEASE:i,FENGARI_VERSION:c,FENGARI_VERSION_MAJOR:f,FENGARI_VERSION_MINOR:_,FENGARI_VERSION_NUM:p,FENGARI_VERSION_RELEASE:h,to_luastring:d}=n(5);t.exports.luaopen_fengari=function(t){return l(t,{}),a(t,s),u(t,-2,d("AUTHORS")),a(t,o),u(t,-2,d("COPYRIGHT")),a(t,i),u(t,-2,d("RELEASE")),a(t,c),u(t,-2,d("VERSION")),a(t,f),u(t,-2,d("VERSION_MAJOR")),a(t,_),u(t,-2,d("VERSION_MINOR")),r(t,p),u(t,-2,d("VERSION_NUM")),a(t,h),u(t,-2,d("VERSION_RELEASE")),1}},function(t,e,n){"use strict";n.r(e),n.d(e,"L",(function(){return R})),n.d(e,"load",(function(){return y}));var r=n(0);n.d(e,"FENGARI_AUTHORS",(function(){return r.FENGARI_AUTHORS})),n.d(e,"FENGARI_COPYRIGHT",(function(){return r.FENGARI_COPYRIGHT})),n.d(e,"FENGARI_RELEASE",(function(){return r.FENGARI_RELEASE})),n.d(e,"FENGARI_VERSION",(function(){return r.FENGARI_VERSION})),n.d(e,"FENGARI_VERSION_MAJOR",(function(){return r.FENGARI_VERSION_MAJOR})),n.d(e,"FENGARI_VERSION_MINOR",(function(){return r.FENGARI_VERSION_MINOR})),n.d(e,"FENGARI_VERSION_NUM",(function(){return r.FENGARI_VERSION_NUM})),n.d(e,"FENGARI_VERSION_RELEASE",(function(){return r.FENGARI_VERSION_RELEASE})),n.d(e,"luastring_eq",(function(){return r.luastring_eq})),n.d(e,"luastring_indexOf",(function(){return r.luastring_indexOf})),n.d(e,"luastring_of",(function(){return r.luastring_of})),n.d(e,"to_jsstring",(function(){return r.to_jsstring})),n.d(e,"to_luastring",(function(){return r.to_luastring})),n.d(e,"to_uristring",(function(){return r.to_uristring})),n.d(e,"lua",(function(){return r.lua})),n.d(e,"lauxlib",(function(){return r.lauxlib})),n.d(e,"lualib",(function(){return r.lualib}));var a=n(21);n.d(e,"interop",(function(){return a}));const{LUA_ERRRUN:u,LUA_ERRSYNTAX:l,LUA_OK:s,LUA_VERSION_MAJOR:o,LUA_VERSION_MINOR:i,lua_Debug:c,lua_getinfo:f,lua_getstack:_,lua_gettop:p,lua_insert:h,lua_pcall:d,lua_pop:L,lua_pushcfunction:g,lua_pushstring:A,lua_remove:x,lua_setglobal:T,lua_tojsstring:b}=r.lua,{luaL_loadbuffer:O,luaL_newstate:k,luaL_requiref:v}=r.lauxlib,{checkjs:E,luaopen_js:m,push:U,tojs:N}=a,R=k();function y(t,e){if("string"==typeof t)t=Object(r.to_luastring)(t);else if(!(t instanceof Uint8Array))throw new TypeError("expects an array of bytes or javascript string");e=e?Object(r.to_luastring)(e):null;let n,a=O(R,t,null,e);if(n=a===l?new SyntaxError(b(R,-1)):N(R,-1),L(R,1),a!==s)throw n;return n}if(r.lualib.luaL_openlibs(R),v(R,Object(r.to_luastring)("js"),m,1),L(R,1),A(R,Object(r.to_luastring)(r.FENGARI_COPYRIGHT)),T(R,Object(r.to_luastring)("_COPYRIGHT")),"undefined"!=typeof document&&document instanceof HTMLDocument){const t=function(t){switch(t){case"anonymous":return"omit";case"use-credentials":return"include";default:return"same-origin"}},e=function(t){let e=new c;return _(t,2,e)&&f(t,Object(r.to_luastring)("Sl"),e),U(t,new ErrorEvent("error",{bubbles:!0,cancelable:!0,message:b(t,1),error:N(t,1),filename:e.short_src?Object(r.to_jsstring)(e.short_src):void 0,lineno:e.currentline>0?e.currentline:void 0})),1},n=function(t,n,r){let a,o=O(R,n,null,r);if(o===l){let e=b(R,-1),n=t.src?t.src:document.location,r=void 0,u=new SyntaxError(e,n,r);a=new ErrorEvent("error",{message:e,error:u,filename:n,lineno:r})}else if(o===s){let n=p(R);g(R,e),h(R,n),Object.defineProperty(document,"currentScript",{value:t,configurable:!0}),o=d(R,0,0,n),delete document.currentScript,x(R,n),o===u&&(a=E(R,-1))}o!==s&&(void 0===a&&(a=new ErrorEvent("error",{message:b(R,-1),error:N(R,-1)})),L(R,1),window.dispatchEvent(a)&&console.error("uncaught exception",a.error))},a=function(t,e,a){if(t.status>=200&&t.status<300){let u=t.response;u="string"==typeof u?Object(r.to_luastring)(t.response):new Uint8Array(u),n(e,u,a)}else e.dispatchEvent(new Event("error"))},A=function(e){if(e.src){let u=Object(r.to_luastring)("@"+e.src);if("complete"===document.readyState||e.async)if("function"==typeof fetch)fetch(e.src,{method:"GET",credentials:t(e.crossorigin),redirect:"follow",integrity:e.integrity}).then((function(t){if(t.ok)return t.arrayBuffer();throw new Error("unable to fetch")})).then((function(t){let r=new Uint8Array(t);n(e,r,u)})).catch((function(t){e.dispatchEvent(new Event("error"))}));else{let t=new XMLHttpRequest;t.open("GET",e.src,!0),t.responseType="arraybuffer",t.onreadystatechange=function(){4===t.readyState&&a(t,e,u)},t.send()}else{let t=new XMLHttpRequest;t.open("GET",e.src,!1),t.send(),a(t,e,u)}}else{let t=Object(r.to_luastring)(e.innerHTML),a=e.id?Object(r.to_luastring)("="+e.id):t;n(e,t,a)}},T=/^(.*?\/.*?)([\t ]*;.*)?$/,k=/^(\d+)\.(\d+)$/,v=function(t){if("SCRIPT"!==t.tagName)return;let e=T.exec(t.type);if(!e)return;let n=e[1];if("application/lua"===n||"text/lua"===n){if(t.hasAttribute("lua-version")){let e=k.exec(t.getAttribute("lua-version"));if(!e||e[1]!==o||e[2]!==i)return}A(t)}};"undefined"!=typeof MutationObserver?new MutationObserver((function(t,e){for(let n=0;n<t.length;n++){let e=t[n];for(let t=0;t<e.addedNodes.length;t++)v(e.addedNodes[t])}})).observe(document,{childList:!0,subtree:!0}):console.warn&&console.warn("fengari-web: MutationObserver not found; lua script tags will not be run when inserted");const m='script[type^="application/lua"], script[type^="text/lua"]';Array.prototype.forEach.call(document.querySelectorAll(m),v)}},function(t,e,n){"use strict";const{LUA_MULTRET:r,LUA_OPADD:a,LUA_OPBAND:u,LUA_OPBNOT:l,LUA_OPBOR:s,LUA_OPBXOR:o,LUA_OPDIV:i,LUA_OPIDIV:c,LUA_OPMOD:f,LUA_OPSHL:_,LUA_OPSHR:p,LUA_OPUNM:h,constant_types:{LUA_TBOOLEAN:d,LUA_TLIGHTUSERDATA:L,LUA_TLNGSTR:g,LUA_TNIL:A,LUA_TNUMFLT:x,LUA_TNUMINT:T,LUA_TTABLE:b},to_luastring:O}=n(1),{lua_assert:k}=n(4),v=n(20),E=n(6),m=n(16),U=n(23),N=n(9),R=n(15),y=m.OpCodesI,S=E.TValue,w={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},I={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},M=function(t){return t.t!==t.f},P=function(t,e){let n=U.expkind;if(M(t))return!1;switch(t.k){case n.VKINT:return!e||new S(T,t.u.ival);case n.VKFLT:return!e||new S(x,t.u.nval);default:return!1}},C=function(t,e,n){let r,a=e+n-1;if(t.pc>t.lasttarget&&(r=t.f.code[t.pc-1]).opcode===y.OP_LOADNIL){let t=r.A,n=t+r.B;if(t<=e&&e<=n+1||e<=t&&t<=a+1)return t<e&&(e=t),n>a&&(a=n),m.SETARG_A(r,e),void m.SETARG_B(r,a-e)}$(t,y.OP_LOADNIL,e,n-1,0)},D=function(t,e){return t.f.code[e.u.info]},V=function(t,e){let n=t.f.code[e].sBx;return-1===n?-1:e+1+n},G=function(t,e,n){let r=t.f.code[e],a=n-(e+1);k(-1!==n),Math.abs(a)>m.MAXARG_sBx&&v.luaX_syntaxerror(t.ls,O("control structure too long",!0)),m.SETARG_sBx(r,a)},B=function(t,e,n){if(-1===n)return e;if(-1===e)e=n;else{let r=e,a=V(t,r);for(;-1!==a;)a=V(t,r=a);G(t,r,n)}return e},K=function(t){let e=t.jpc;t.jpc=-1;let n=tt(t,y.OP_JMP,0,-1);return B(t,n,e)},j=function(t,e,n,r,a){return $(t,e,n,r,a),K(t)},F=function(t){return t.lasttarget=t.pc,t.pc},H=function(t,e){return e>=1&&m.testTMode(t.f.code[e-1].opcode)?e-1:e},X=function(t,e){return t.f.code[H(t,e)]},z=function(t,e,n){let r=H(t,e),a=t.f.code[r];return a.opcode===y.OP_TESTSET&&(n!==m.NO_REG&&n!==a.B?m.SETARG_A(a,n):t.f.code[r]=m.CREATE_ABC(y.OP_TEST,a.B,0,a.C),!0)},J=function(t,e){for(;-1!==e;e=V(t,e))z(t,e,m.NO_REG)},Y=function(t,e,n,r,a){for(;-1!==e;){let u=V(t,e);z(t,e,r)?G(t,e,n):G(t,e,a),e=u}},Z=function(t,e){F(t),t.jpc=B(t,t.jpc,e)},q=function(t,e,n){n===t.pc?Z(t,e):(k(n<t.pc),Y(t,e,n,m.NO_REG,n))},W=function(t,e){let n=t.f;return function(t){Y(t,t.jpc,t.pc,m.NO_REG,t.pc),t.jpc=-1}(t),n.code[t.pc]=e,n.lineinfo[t.pc]=t.ls.lastline,t.pc++},$=function(t,e,n,r,a){return k(m.getOpMode(e)===m.iABC),k(m.getBMode(e)!==m.OpArgN||0===r),k(m.getCMode(e)!==m.OpArgN||0===a),k(n<=m.MAXARG_A&&r<=m.MAXARG_B&&a<=m.MAXARG_C),W(t,m.CREATE_ABC(e,n,r,a))},Q=function(t,e,n,r){return k(m.getOpMode(e)===m.iABx||m.getOpMode(e)===m.iAsBx),k(m.getCMode(e)===m.OpArgN),k(n<=m.MAXARG_A&&r<=m.MAXARG_Bx),W(t,m.CREATE_ABx(e,n,r))},tt=function(t,e,n,r){return Q(t,e,n,r+m.MAXARG_sBx)},et=function(t,e){return k(e<=m.MAXARG_Ax),W(t,m.CREATE_Ax(y.OP_EXTRAARG,e))},nt=function(t,e,n){if(n<=m.MAXARG_Bx)return Q(t,y.OP_LOADK,e,n);{let r=Q(t,y.OP_LOADKX,e,0);return et(t,n),r}},rt=function(t,e){let n=t.freereg+e;n>t.f.maxstacksize&&(n>=255&&v.luaX_syntaxerror(t.ls,O("function or expression needs too many registers",!0)),t.f.maxstacksize=n)},at=function(t,e){rt(t,e),t.freereg+=e},ut=function(t,e){!m.ISK(e)&&e>=t.nactvar&&(t.freereg--,k(e===t.freereg))},lt=function(t,e){e.k===U.expkind.VNONRELOC&&ut(t,e.u.info)},st=function(t,e,n){let r=e.k===U.expkind.VNONRELOC?e.u.info:-1,a=n.k===U.expkind.VNONRELOC?n.u.info:-1;r>a?(ut(t,r),ut(t,a)):(ut(t,a),ut(t,r))},ot=function(t,e,n){let r=t.f,a=N.luaH_get(t.L,t.ls.h,e);if(a.ttisinteger()){let e=a.value;if(e<t.nk&&r.k[e].ttype()===n.ttype()&&r.k[e].value===n.value)return e}let u=t.nk;return N.luaH_setfrom(t.L,t.ls.h,e,new E.TValue(T,u)),r.k[u]=n,t.nk++,u},it=function(t,e){let n=new S(L,e),r=new S(T,e);return ot(t,n,r)},ct=function(t,e){let n=new S(x,e);return ot(t,n,n)},ft=function(t,e){let n=new S(d,e);return ot(t,n,n)},_t=function(t,e,n){let a=U.expkind;if(e.k===a.VCALL)m.SETARG_C(D(t,e),n+1);else if(e.k===a.VVARARG){let r=D(t,e);m.SETARG_B(r,n+1),m.SETARG_A(r,t.freereg),at(t,1)}else k(n===r)},pt=function(t,e){let n=U.expkind;e.k===n.VCALL?(k(2===D(t,e).C),e.k=n.VNONRELOC,e.u.info=D(t,e).A):e.k===n.VVARARG&&(m.SETARG_B(D(t,e),2),e.k=n.VRELOCABLE)},ht=function(t,e){let n=U.expkind;switch(e.k){case n.VLOCAL:e.k=n.VNONRELOC;break;case n.VUPVAL:e.u.info=$(t,y.OP_GETUPVAL,0,e.u.info,0),e.k=n.VRELOCABLE;break;case n.VINDEXED:{let r;ut(t,e.u.ind.idx),e.u.ind.vt===n.VLOCAL?(ut(t,e.u.ind.t),r=y.OP_GETTABLE):(k(e.u.ind.vt===n.VUPVAL),r=y.OP_GETTABUP),e.u.info=$(t,r,0,e.u.ind.t,e.u.ind.idx),e.k=n.VRELOCABLE;break}case n.VVARARG:case n.VCALL:pt(t,e)}},dt=function(t,e,n,r){return F(t),$(t,y.OP_LOADBOOL,e,n,r)},Lt=function(t,e,n){let r=U.expkind;switch(ht(t,e),e.k){case r.VNIL:C(t,n,1);break;case r.VFALSE:case r.VTRUE:$(t,y.OP_LOADBOOL,n,e.k===r.VTRUE,0);break;case r.VK:nt(t,n,e.u.info);break;case r.VKFLT:nt(t,n,ct(t,e.u.nval));break;case r.VKINT:nt(t,n,it(t,e.u.ival));break;case r.VRELOCABLE:{let r=D(t,e);m.SETARG_A(r,n);break}case r.VNONRELOC:n!==e.u.info&&$(t,y.OP_MOVE,n,e.u.info,0);break;default:return void k(e.k===r.VJMP)}e.u.info=n,e.k=r.VNONRELOC},gt=function(t,e){e.k!==U.expkind.VNONRELOC&&(at(t,1),Lt(t,e,t.freereg-1))},At=function(t,e){for(;-1!==e;e=V(t,e))if(X(t,e).opcode!==y.OP_TESTSET)return!0;return!1},xt=function(t,e,n){let r=U.expkind;if(Lt(t,e,n),e.k===r.VJMP&&(e.t=B(t,e.t,e.u.info)),M(e)){let a,u=-1,l=-1;if(At(t,e.t)||At(t,e.f)){let a=e.k===r.VJMP?-1:K(t);u=dt(t,n,0,1),l=dt(t,n,1,0),Z(t,a)}a=F(t),Y(t,e.f,a,n,u),Y(t,e.t,a,n,l)}e.f=e.t=-1,e.u.info=n,e.k=r.VNONRELOC},Tt=function(t,e){ht(t,e),lt(t,e),at(t,1),xt(t,e,t.freereg-1)},bt=function(t,e){if(ht(t,e),e.k===U.expkind.VNONRELOC){if(!M(e))return e.u.info;if(e.u.info>=t.nactvar)return xt(t,e,e.u.info),e.u.info}return Tt(t,e),e.u.info},Ot=function(t,e){M(e)?bt(t,e):ht(t,e)},kt=function(t,e){let n=U.expkind,r=!1;switch(Ot(t,e),e.k){case n.VTRUE:e.u.info=ft(t,!0),r=!0;break;case n.VFALSE:e.u.info=ft(t,!1),r=!0;break;case n.VNIL:e.u.info=function(t){let e=new S(A,null),n=new S(b,t.ls.h);return ot(t,n,e)}(t),r=!0;break;case n.VKINT:e.u.info=it(t,e.u.ival),r=!0;break;case n.VKFLT:e.u.info=ct(t,e.u.nval),r=!0;break;case n.VK:r=!0}return r&&(e.k=n.VK,e.u.info<=m.MAXINDEXRK)?m.RKASK(e.u.info):bt(t,e)},vt=function(t,e){let n=X(t,e.u.info);k(m.testTMode(n.opcode)&&n.opcode!==y.OP_TESTSET&&n.opcode!==y.OP_TEST),m.SETARG_A(n,!n.A)},Et=function(t,e,n){if(e.k===U.expkind.VRELOCABLE){let r=D(t,e);if(r.opcode===y.OP_NOT)return t.pc--,j(t,y.OP_TEST,r.B,0,!n)}return gt(t,e),lt(t,e),j(t,y.OP_TESTSET,m.NO_REG,e.u.info,n)},mt=function(t,e){let n,r=U.expkind;switch(ht(t,e),e.k){case r.VJMP:vt(t,e),n=e.u.info;break;case r.VK:case r.VKFLT:case r.VKINT:case r.VTRUE:n=-1;break;default:n=Et(t,e,0)}e.f=B(t,e.f,n),Z(t,e.t),e.t=-1},Ut=function(t,e){let n,r=U.expkind;switch(ht(t,e),e.k){case r.VJMP:n=e.u.info;break;case r.VNIL:case r.VFALSE:n=-1;break;default:n=Et(t,e,1)}e.t=B(t,e.t,n),Z(t,e.f),e.f=-1},Nt=function(t,e,n){let r,a,h=U.expkind;if(!(r=P(e,!0))||!(a=P(n,!0))||!function(t,e,n){switch(t){case u:case s:case o:case _:case p:case l:return!1!==R.tointeger(e)&&!1!==R.tointeger(n);case i:case c:case f:return 0!==n.value;default:return 1}}(t,r,a))return 0;let d=new S;if(E.luaO_arith(null,t,r,a,d),d.ttisinteger())e.k=h.VKINT,e.u.ival=d.value;else{let t=d.value;if(isNaN(t)||0===t)return!1;e.k=h.VKFLT,e.u.nval=t}return!0},Rt=function(t,e,n,r,a){let u=kt(t,r),l=kt(t,n);st(t,n,r),n.u.info=$(t,e,0,l,u),n.k=U.expkind.VRELOCABLE,yt(t,a)},yt=function(t,e){t.f.lineinfo[t.pc-1]=e};t.exports.BinOpr=w,t.exports.NO_JUMP=-1,t.exports.UnOpr=I,t.exports.getinstruction=D,t.exports.luaK_checkstack=rt,t.exports.luaK_code=W,t.exports.luaK_codeABC=$,t.exports.luaK_codeABx=Q,t.exports.luaK_codeAsBx=tt,t.exports.luaK_codek=nt,t.exports.luaK_concat=B,t.exports.luaK_dischargevars=ht,t.exports.luaK_exp2RK=kt,t.exports.luaK_exp2anyreg=bt,t.exports.luaK_exp2anyregup=function(t,e){(e.k!==U.expkind.VUPVAL||M(e))&&bt(t,e)},t.exports.luaK_exp2nextreg=Tt,t.exports.luaK_exp2val=Ot,t.exports.luaK_fixline=yt,t.exports.luaK_getlabel=F,t.exports.luaK_goiffalse=Ut,t.exports.luaK_goiftrue=mt,t.exports.luaK_indexed=function(t,e,n){let r=U.expkind;k(!M(e)&&(U.vkisinreg(e.k)||e.k===r.VUPVAL)),e.u.ind.t=e.u.info,e.u.ind.idx=kt(t,n),e.u.ind.vt=e.k===r.VUPVAL?r.VUPVAL:r.VLOCAL,e.k=r.VINDEXED},t.exports.luaK_infix=function(t,e,n){switch(e){case w.OPR_AND:mt(t,n);break;case w.OPR_OR:Ut(t,n);break;case w.OPR_CONCAT:Tt(t,n);break;case w.OPR_ADD:case w.OPR_SUB:case w.OPR_MUL:case w.OPR_DIV:case w.OPR_IDIV:case w.OPR_MOD:case w.OPR_POW:case w.OPR_BAND:case w.OPR_BOR:case w.OPR_BXOR:case w.OPR_SHL:case w.OPR_SHR:P(n,!1)||kt(t,n);break;default:kt(t,n)}},t.exports.luaK_intK=it,t.exports.luaK_jump=K,t.exports.luaK_jumpto=function(t,e){return q(t,K(t),e)},t.exports.luaK_nil=C,t.exports.luaK_numberK=ct,t.exports.luaK_patchclose=function(t,e,n){for(n++;-1!==e;e=V(t,e)){let r=t.f.code[e];k(r.opcode===y.OP_JMP&&(0===r.A||r.A>=n)),m.SETARG_A(r,n)}},t.exports.luaK_patchlist=q,t.exports.luaK_patchtohere=Z,t.exports.luaK_posfix=function(t,e,n,r,u){let l=U.expkind;switch(e){case w.OPR_AND:k(-1===n.t),ht(t,r),r.f=B(t,r.f,n.f),n.to(r);break;case w.OPR_OR:k(-1===n.f),ht(t,r),r.t=B(t,r.t,n.t),n.to(r);break;case w.OPR_CONCAT:{Ot(t,r);let e=D(t,r);r.k===l.VRELOCABLE&&e.opcode===y.OP_CONCAT?(k(n.u.info===e.B-1),lt(t,n),m.SETARG_B(e,n.u.info),n.k=l.VRELOCABLE,n.u.info=r.u.info):(Tt(t,r),Rt(t,y.OP_CONCAT,n,r,u));break}case w.OPR_ADD:case w.OPR_SUB:case w.OPR_MUL:case w.OPR_DIV:case w.OPR_IDIV:case w.OPR_MOD:case w.OPR_POW:case w.OPR_BAND:case w.OPR_BOR:case w.OPR_BXOR:case w.OPR_SHL:case w.OPR_SHR:Nt(e+a,n,r)||Rt(t,e+y.OP_ADD,n,r,u);break;case w.OPR_EQ:case w.OPR_LT:case w.OPR_LE:case w.OPR_NE:case w.OPR_GT:case w.OPR_GE:!function(t,e,n,r){let a,u=U.expkind;n.k===u.VK?a=m.RKASK(n.u.info):(k(n.k===u.VNONRELOC),a=n.u.info);let l=kt(t,r);switch(st(t,n,r),e){case w.OPR_NE:n.u.info=j(t,y.OP_EQ,0,a,l);break;case w.OPR_GT:case w.OPR_GE:{let r=e-w.OPR_NE+y.OP_EQ;n.u.info=j(t,r,1,l,a);break}default:{let r=e-w.OPR_EQ+y.OP_EQ;n.u.info=j(t,r,1,a,l);break}}n.k=u.VJMP}(t,e,n,r)}return n},t.exports.luaK_prefix=function(t,e,n,r){let a=new U.expdesc;switch(a.k=U.expkind.VKINT,a.u.ival=a.u.nval=a.u.info=0,a.t=-1,a.f=-1,e){case I.OPR_MINUS:case I.OPR_BNOT:if(Nt(e+h,n,a))break;case I.OPR_LEN:!function(t,e,n,r){let a=bt(t,n);lt(t,n),n.u.info=$(t,e,0,a,0),n.k=U.expkind.VRELOCABLE,yt(t,r)}(t,e+y.OP_UNM,n,r);break;case I.OPR_NOT:!function(t,e){let n=U.expkind;switch(ht(t,e),e.k){case n.VNIL:case n.VFALSE:e.k=n.VTRUE;break;case n.VK:case n.VKFLT:case n.VKINT:case n.VTRUE:e.k=n.VFALSE;break;case n.VJMP:vt(t,e);break;case n.VRELOCABLE:case n.VNONRELOC:gt(t,e),lt(t,e),e.u.info=$(t,y.OP_NOT,0,e.u.info,0),e.k=n.VRELOCABLE}{let t=e.f;e.f=e.t,e.t=t}J(t,e.f),J(t,e.t)}(t,n)}},t.exports.luaK_reserveregs=at,t.exports.luaK_ret=function(t,e,n){$(t,y.OP_RETURN,e,n+1,0)},t.exports.luaK_self=function(t,e,n){bt(t,e);let r=e.u.info;lt(t,e),e.u.info=t.freereg,e.k=U.expkind.VNONRELOC,at(t,2),$(t,y.OP_SELF,e.u.info,r,kt(t,n)),lt(t,n)},t.exports.luaK_setlist=function(t,e,n,a){let u=(n-1)/m.LFIELDS_PER_FLUSH+1,l=a===r?0:a;k(0!==a&&a<=m.LFIELDS_PER_FLUSH),u<=m.MAXARG_C?$(t,y.OP_SETLIST,e,l,u):u<=m.MAXARG_Ax?($(t,y.OP_SETLIST,e,l,0),et(t,u)):v.luaX_syntaxerror(t.ls,O("constructor too long",!0)),t.freereg=e+1},t.exports.luaK_setmultret=function(t,e){_t(t,e,r)},t.exports.luaK_setoneret=pt,t.exports.luaK_setreturns=_t,t.exports.luaK_storevar=function(t,e,n){let r=U.expkind;switch(e.k){case r.VLOCAL:return lt(t,n),void xt(t,n,e.u.info);case r.VUPVAL:{let r=bt(t,n);$(t,y.OP_SETUPVAL,r,e.u.info,0);break}case r.VINDEXED:{let a=e.u.ind.vt===r.VLOCAL?y.OP_SETTABLE:y.OP_SETTABUP,u=kt(t,n);$(t,a,e.u.ind.t,e.u.ind.idx,u);break}}lt(t,n)},t.exports.luaK_stringK=function(t,e){let n=new S(g,e);return ot(t,n,n)}},function(t,e,n){"use strict";const{LUA_SIGNATURE:r,constant_types:{LUA_TBOOLEAN:a,LUA_TLNGSTR:u,LUA_TNIL:l,LUA_TNUMFLT:s,LUA_TNUMINT:o,LUA_TSHRSTR:i},thread_status:{LUA_ERRSYNTAX:c},is_luastring:f,luastring_eq:_,to_luastring:p}=n(1),h=n(8),d=n(13),L=n(6),{MAXARG_sBx:g,POS_A:A,POS_Ax:x,POS_B:T,POS_Bx:b,POS_C:O,POS_OP:k,SIZE_A:v,SIZE_Ax:E,SIZE_B:m,SIZE_Bx:U,SIZE_C:N,SIZE_OP:R}=n(16),{lua_assert:y}=n(4),{luaS_bless:S}=n(10),{luaZ_read:w,ZIO:I}=n(19);let M=[25,147,13,10,26,10];class P{constructor(t,e,n){this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,y(e instanceof I,"BytecodeParser only operates on a ZIO"),y(f(n)),64===n[0]||61===n[0]?this.name=n.subarray(1):n[0]==r[0]?this.name=p("binary string",!0):this.name=n,this.L=t,this.Z=e,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}read(t){let e=new Uint8Array(t);return 0!==w(this.Z,e,0,t)&&this.error("truncated"),e}LoadByte(){return 0!==w(this.Z,this.u8,0,1)&&this.error("truncated"),this.u8[0]}LoadInt(){return 0!==w(this.Z,this.u8,0,this.intSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}LoadNumber(){return 0!==w(this.Z,this.u8,0,this.numberSize)&&this.error("truncated"),this.dv.getFloat64(0,!0)}LoadInteger(){return 0!==w(this.Z,this.u8,0,this.integerSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}LoadSize_t(){return this.LoadInteger()}LoadString(){let t=this.LoadByte();return 255===t&&(t=this.LoadSize_t()),0===t?null:S(this.L,this.read(t-1))}static MASK1(t,e){return~(-1<<t)<<e}LoadCode(t){let e=this.LoadInt(),n=P;for(let r=0;r<e;r++){0!==w(this.Z,this.u8,0,this.instructionSize)&&this.error("truncated");let e=this.dv.getUint32(0,!0);t.code[r]={code:e,opcode:e>>k&n.MASK1(R,0),A:e>>A&n.MASK1(v,0),B:e>>T&n.MASK1(m,0),C:e>>O&n.MASK1(N,0),Bx:e>>b&n.MASK1(U,0),Ax:e>>x&n.MASK1(E,0),sBx:(e>>b&n.MASK1(U,0))-g}}}LoadConstants(t){let e=this.LoadInt();for(let n=0;n<e;n++){let e=this.LoadByte();switch(e){case l:t.k.push(new L.TValue(l,null));break;case a:t.k.push(new L.TValue(a,0!==this.LoadByte()));break;case s:t.k.push(new L.TValue(s,this.LoadNumber()));break;case o:t.k.push(new L.TValue(o,this.LoadInteger()));break;case i:case u:t.k.push(new L.TValue(u,this.LoadString()));break;default:this.error(`unrecognized constant '${e}'`)}}}LoadProtos(t){let e=this.LoadInt();for(let n=0;n<e;n++)t.p[n]=new d.Proto(this.L),this.LoadFunction(t.p[n],t.source)}LoadUpvalues(t){let e=this.LoadInt();for(let n=0;n<e;n++)t.upvalues[n]={name:null,instack:this.LoadByte(),idx:this.LoadByte()}}LoadDebug(t){let e=this.LoadInt();for(let n=0;n<e;n++)t.lineinfo[n]=this.LoadInt();e=this.LoadInt();for(let n=0;n<e;n++)t.locvars[n]={varname:this.LoadString(),startpc:this.LoadInt(),endpc:this.LoadInt()};e=this.LoadInt();for(let n=0;n<e;n++)t.upvalues[n].name=this.LoadString()}LoadFunction(t,e){t.source=this.LoadString(),null===t.source&&(t.source=e),t.linedefined=this.LoadInt(),t.lastlinedefined=this.LoadInt(),t.numparams=this.LoadByte(),t.is_vararg=0!==this.LoadByte(),t.maxstacksize=this.LoadByte(),this.LoadCode(t),this.LoadConstants(t),this.LoadUpvalues(t),this.LoadProtos(t),this.LoadDebug(t)}checkliteral(t,e){let n=this.read(t.length);_(n,t)||this.error(e)}checkHeader(){this.checkliteral(r.subarray(1),"not a"),83!==this.LoadByte()&&this.error("version mismatch in"),0!==this.LoadByte()&&this.error("format mismatch in"),this.checkliteral(M,"corrupted"),this.intSize=this.LoadByte(),this.size_tSize=this.LoadByte(),this.instructionSize=this.LoadByte(),this.integerSize=this.LoadByte(),this.numberSize=this.LoadByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),22136!==this.LoadInteger()&&this.error("endianness mismatch in"),370.5!==this.LoadNumber()&&this.error("float format mismatch in")}error(t){L.luaO_pushfstring(this.L,p("%s: %s precompiled chunk"),this.name,p(t)),h.luaD_throw(this.L,c)}checksize(t,e,n){t!==e&&this.error(`${n} size mismatch in`)}}t.exports.luaU_undump=function(t,e,n){let r=new P(t,e,n);r.checkHeader();let a=d.luaF_newLclosure(t,r.LoadByte());return h.luaD_inctop(t),t.stack[t.top-1].setclLvalue(a),a.p=new d.Proto(t),r.LoadFunction(a.p,null),y(a.nupvalues===a.p.upvalues.length),a}},function(t,e,n){"use strict";const{LUA_SIGNATURE:r,LUA_VERSION_MAJOR:a,LUA_VERSION_MINOR:u,constant_types:{LUA_TBOOLEAN:l,LUA_TLNGSTR:s,LUA_TNIL:o,LUA_TNUMFLT:i,LUA_TNUMINT:c,LUA_TSHRSTR:f},luastring_of:_}=n(1),p=_(25,147,13,10,26,10),h=16*Number(a)+Number(u),d=function(t,e,n){0===n.status&&e>0&&(n.status=n.writer(n.L,t,e,n.data))},L=function(t,e){d(_(t),1,e)},g=function(t,e){let n=new ArrayBuffer(4);new DataView(n).setInt32(0,t,!0);let r=new Uint8Array(n);d(r,4,e)},A=function(t,e){let n=new ArrayBuffer(4);new DataView(n).setInt32(0,t,!0);let r=new Uint8Array(n);d(r,4,e)},x=function(t,e){let n=new ArrayBuffer(8);new DataView(n).setFloat64(0,t,!0);let r=new Uint8Array(n);d(r,8,e)},T=function(t,e){if(null===t)L(0,e);else{let n=t.tsslen()+1,r=t.getstr();n<255?L(n,e):(L(255,e),A(n,e)),d(r,n-1,e)}},b=function(t,e,n){n.strip||t.source===e?T(null,n):T(t.source,n),g(t.linedefined,n),g(t.lastlinedefined,n),L(t.numparams,n),L(t.is_vararg?1:0,n),L(t.maxstacksize,n),function(t,e){let n=t.code.map(t=>t.code);g(n.length,e);for(let r=0;r<n.length;r++)g(n[r],e)}(t,n),function(t,e){let n=t.k.length;g(n,e);for(let r=0;r<n;r++){let n=t.k[r];switch(L(n.ttype(),e),n.ttype()){case o:break;case l:L(n.value?1:0,e);break;case i:x(n.value,e);break;case c:A(n.value,e);break;case f:case s:T(n.tsvalue(),e)}}}(t,n),function(t,e){let n=t.upvalues.length;g(n,e);for(let r=0;r<n;r++)L(t.upvalues[r].instack?1:0,e),L(t.upvalues[r].idx,e)}(t,n),function(t,e){let n=t.p.length;g(n,e);for(let r=0;r<n;r++)b(t.p[r],t.source,e)}(t,n),function(t,e){let n=e.strip?0:t.lineinfo.length;g(n,e);for(let r=0;r<n;r++)g(t.lineinfo[r],e);n=e.strip?0:t.locvars.length,g(n,e);for(let r=0;r<n;r++)T(t.locvars[r].varname,e),g(t.locvars[r].startpc,e),g(t.locvars[r].endpc,e);n=e.strip?0:t.upvalues.length,g(n,e);for(let r=0;r<n;r++)T(t.upvalues[r].name,e)}(t,n)};t.exports.luaU_dump=function(t,e,n,a,u){let l=new class{constructor(){this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN}};return l.L=t,l.writer=n,l.data=a,l.strip=u,l.status=0,function(t){d(r,r.length,t),L(h,t),L(0,t),d(p,p.length,t),L(4,t),L(4,t),L(4,t),L(4,t),L(8,t),A(22136,t),x(370.5,t)}(l),L(e.upvalues.length,l),b(e,null,l),l.status}},function(t,e,n){var r;!function(){"use strict";var a={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function u(t){return function(t,e){var n,r,l,s,o,i,c,f,_,p=1,h=t.length,d="";for(r=0;r<h;r++)if("string"==typeof t[r])d+=t[r];else if(Array.isArray(t[r])){if((s=t[r])[2])for(n=e[p],l=0;l<s[2].length;l++){if(!n.hasOwnProperty(s[2][l]))throw new Error(u('[sprintf] property "%s" does not exist',s[2][l]));n=n[s[2][l]]}else n=s[1]?e[s[1]]:e[p++];if(a.not_type.test(s[8])&&a.not_primitive.test(s[8])&&n instanceof Function&&(n=n()),a.numeric_arg.test(s[8])&&"number"!=typeof n&&isNaN(n))throw new TypeError(u("[sprintf] expecting number but found %T",n));switch(a.number.test(s[8])&&(f=n>=0),s[8]){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s[6]?parseInt(s[6]):0);break;case"e":n=s[7]?parseFloat(n).toExponential(s[7]):parseFloat(n).toExponential();break;case"f":n=s[7]?parseFloat(n).toFixed(s[7]):parseFloat(n);break;case"g":n=s[7]?String(Number(n.toPrecision(s[7]))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s[7]?n.substring(0,s[7]):n;break;case"t":n=String(!!n),n=s[7]?n.substring(0,s[7]):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s[7]?n.substring(0,s[7]):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s[7]?n.substring(0,s[7]):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}a.json.test(s[8])?d+=n:(!a.number.test(s[8])||f&&!s[3]?_="":(_=f?"+":"-",n=n.toString().replace(a.sign,"")),i=s[4]?"0"===s[4]?"0":s[4].charAt(1):" ",c=s[6]-(_+n).length,o=s[6]&&c>0?i.repeat(c):"",d+=s[5]?_+n+o:"0"===i?_+o+n:o+_+n)}return d}(function(t){if(s[t])return s[t];for(var e,n=t,r=[],u=0;n;){if(null!==(e=a.text.exec(n)))r.push(e[0]);else if(null!==(e=a.modulo.exec(n)))r.push("%");else{if(null===(e=a.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){u|=1;var l=[],o=e[2],i=[];if(null===(i=a.key.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(l.push(i[1]);""!==(o=o.substring(i[0].length));)if(null!==(i=a.key_access.exec(o)))l.push(i[1]);else{if(null===(i=a.index_access.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");l.push(i[1])}e[2]=l}else u|=2;if(3===u)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push(e)}n=n.substring(e[0].length)}return s[t]=r}(t),arguments)}function l(t,e){return u.apply(null,[t].concat(e||[]))}var s=Object.create(null);e.sprintf=u,e.vsprintf=l,"undefined"!=typeof window&&(window.sprintf=u,window.vsprintf=l,void 0===(r=function(){return{sprintf:u,vsprintf:l}}.call(e,n,e,t))||(t.exports=r))}()},function(t,e,n){"use strict";const{lua_pop:r}=n(2),{luaL_requiref:a}=n(7),{to_luastring:u}=n(5),l={};t.exports.luaL_openlibs=function(t){for(let e in l)a(t,u(e),l[e],1),r(t,1)};const s=n(17),{luaopen_base:o}=n(24),{luaopen_coroutine:i}=n(25),{luaopen_debug:c}=n(31),{luaopen_math:f}=n(30),{luaopen_package:_}=n(32),{luaopen_os:p}=n(27),{luaopen_string:h}=n(28),{luaopen_table:d}=n(26),{luaopen_utf8:L}=n(29);l._G=o,l[s.LUA_LOADLIBNAME]=_,l[s.LUA_COLIBNAME]=i,l[s.LUA_TABLIBNAME]=d,l[s.LUA_OSLIBNAME]=p,l[s.LUA_STRLIBNAME]=h,l[s.LUA_MATHLIBNAME]=f,l[s.LUA_UTF8LIBNAME]=L,l[s.LUA_DBLIBNAME]=c;const{luaopen_fengari:g}=n(33);l[s.LUA_FENGARILIBNAME]=g}])},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(9),a=n(19);t.exports=n(4)?function(t,e,n){return r.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(6)("wks"),a=n(8),u=n(1).Symbol,l="function"==typeof u;(t.exports=function(t){return r[t]||(r[t]=l&&u[t]||(l?u:a)("Symbol."+t))}).store=r},function(t,e,n){t.exports=!n(17)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(7),a=n(1),u=a["__core-js_shared__"]||(a["__core-js_shared__"]={});(t.exports=function(t,e){return u[t]||(u[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(16)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(10),a=n(30),u=n(31),l=Object.defineProperty;e.f=n(4)?Object.defineProperty:function(t,e,n){if(r(t),e=u(e,!0),r(n),a)try{return l(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports={}},function(t,e,n){var r=n(33),a=n(20);t.exports=function(t){return r(a(t))}},function(t,e,n){var r=n(1),a=n(2),u=n(5),l=n(8)("src"),s=n(37),o=(""+s).split("toString");n(7).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var i="function"==typeof n;i&&(u(n,"name")||a(n,"name",e)),t[e]!==n&&(i&&(u(n,l)||a(n,l,t[e]?""+t[e]:o.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:a(t,e,n):(delete t[e],a(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[l]||s.call(this)}))},function(t,e,n){var r=n(6)("keys"),a=n(8);t.exports=function(t){return r[t]||(r[t]=a(t))}},function(t,e){t.exports=!1},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(11),a=n(1).document,u=r(a)&&r(a.createElement);t.exports=function(t){return u?a.createElement(t):{}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(43),a=n(23);t.exports=Object.keys||function(t){return r(t,a)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(9).f,a=n(5),u=n(3)("toStringTag");t.exports=function(t,e,n){t&&!a(t=n?t:t.prototype,u)&&r(t,u,{configurable:!0,value:e})}},function(t,e,n){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},a=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,u=r.length,l=String(t).replace(a,(function(t){if("%%"===t)return"%";if(n>=u)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}})),o=r[n];n<u;o=r[++n])d(o)||!T(o)?l+=" "+o:l+=" "+s(o);return l},e.deprecate=function(n,r){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var a=!1;return function(){if(!a){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),a=!0}return n.apply(this,arguments)}};var u,l={};function s(t,n){var r={seen:[],stylize:i};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&e._extend(r,n),A(r.showHidden)&&(r.showHidden=!1),A(r.depth)&&(r.depth=2),A(r.colors)&&(r.colors=!1),A(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),c(r,t,r.depth)}function o(t,e){var n=s.styles[e];return n?"\x1b["+s.colors[n][0]+"m"+t+"\x1b["+s.colors[n][1]+"m":t}function i(t,e){return t}function c(t,n,r){if(t.customInspect&&n&&k(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var a=n.inspect(r,t);return g(a)||(a=c(t,a,r)),a}var u=function(t,e){if(A(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(L(e))return t.stylize(""+e,"number");if(h(e))return t.stylize(""+e,"boolean");if(d(e))return t.stylize("null","null")}(t,n);if(u)return u;var l=Object.keys(n),s=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(l);if(t.showHidden&&(l=Object.getOwnPropertyNames(n)),O(n)&&(l.indexOf("message")>=0||l.indexOf("description")>=0))return f(n);if(0===l.length){if(k(n)){var o=n.name?": "+n.name:"";return t.stylize("[Function"+o+"]","special")}if(x(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(b(n))return t.stylize(Date.prototype.toString.call(n),"date");if(O(n))return f(n)}var i,T="",v=!1,E=["{","}"];(p(n)&&(v=!0,E=["[","]"]),k(n))&&(T=" [Function"+(n.name?": "+n.name:"")+"]");return x(n)&&(T=" "+RegExp.prototype.toString.call(n)),b(n)&&(T=" "+Date.prototype.toUTCString.call(n)),O(n)&&(T=" "+f(n)),0!==l.length||v&&0!=n.length?r<0?x(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),i=v?function(t,e,n,r,a){for(var u=[],l=0,s=e.length;l<s;++l)N(e,String(l))?u.push(_(t,e,n,r,String(l),!0)):u.push("");return a.forEach((function(a){a.match(/^\d+$/)||u.push(_(t,e,n,r,a,!0))})),u}(t,n,r,s,l):l.map((function(e){return _(t,n,r,s,e,v)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(i,T,E)):E[0]+T+E[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function _(t,e,n,r,a,u){var l,s,o;if((o=Object.getOwnPropertyDescriptor(e,a)||{value:e[a]}).get?s=o.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):o.set&&(s=t.stylize("[Setter]","special")),N(r,a)||(l="["+a+"]"),s||(t.seen.indexOf(o.value)<0?(s=d(n)?c(t,o.value,null):c(t,o.value,n-1)).indexOf("\n")>-1&&(s=u?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),A(l)){if(u&&a.match(/^\d+$/))return s;(l=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(l=l.substr(1,l.length-2),l=t.stylize(l,"name")):(l=l.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),l=t.stylize(l,"string"))}return l+": "+s}function p(t){return Array.isArray(t)}function h(t){return"boolean"==typeof t}function d(t){return null===t}function L(t){return"number"==typeof t}function g(t){return"string"==typeof t}function A(t){return void 0===t}function x(t){return T(t)&&"[object RegExp]"===v(t)}function T(t){return"object"==typeof t&&null!==t}function b(t){return T(t)&&"[object Date]"===v(t)}function O(t){return T(t)&&("[object Error]"===v(t)||t instanceof Error)}function k(t){return"function"==typeof t}function v(t){return Object.prototype.toString.call(t)}function E(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(A(u)&&(u=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!l[n])if(new RegExp("\\b"+n+"\\b","i").test(u)){var r=t.pid;l[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else l[n]=function(){};return l[n]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=h,e.isNull=d,e.isNullOrUndefined=function(t){return null==t},e.isNumber=L,e.isString=g,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=A,e.isRegExp=x,e.isObject=T,e.isDate=b,e.isError=O,e.isFunction=k,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(51);var m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function U(){var t=new Date,e=[E(t.getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":");return[t.getDate(),m[t.getMonth()],e].join(" ")}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",U(),e.format.apply(e,arguments))},e.inherits=n(52),e._extend=function(t,e){if(!e||!T(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var R="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function y(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(R&&t[R]){var e;if("function"!=typeof(e=t[R]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,R,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),a=[],u=0;u<arguments.length;u++)a.push(arguments[u]);a.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,a)}catch(l){n(l)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),R&&Object.defineProperty(e,R,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=R,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var a=n.pop();if("function"!=typeof a)throw new TypeError("The last argument must be of type Function");var u=this,l=function(){return a.apply(u,arguments)};e.apply(this,n).then((function(e){t.nextTick(l,null,e)}),(function(e){t.nextTick(y,e,l)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,r(e)),n}}).call(this,n(50))},function(t,e,n){"use strict";n.r(e);n(27);var r=n(0),a=n(25);const u=globalThis;function l(t){u.printStream=[];const e=r.lauxlib.luaL_newstate();r.lualib.luaL_openlibs(e),r.lauxlib.luaL_requiref(e,Object(r.to_luastring)("js"),r.interop.luaopen_js,1),r.lua.lua_pop(e,1),r.lauxlib.luaL_dostring(e,Object(r.to_luastring)('\n    local js = require("js")\n    print = function(...)\n        local elements = {}\n        for i = 1, select("#", ...) do\n            table.insert(elements, tostring(select(i, ...)))\n        end\n        js.global.printStream:push(table.concat(elements, "\\t"))\n    end\n'));const n=r.lauxlib.luaL_dostring(e,Object(r.to_luastring)(t))===r.lua.LUA_OK?"Module":"Error",l=function(t){const e=new Set;return function t(n){return"function"!=typeof n?n:n.toString().startsWith("function:")?{inspect:()=>"[Function]"}:e.has(n.toString())?{inspect:()=>"[Circular]"}:(e.add(n.toString()),Object.fromEntries([...n].map(([e,n])=>[e,t(n)])))}(t)}(r.interop.tojs(e,-1)),s=u.printStream.map(t=>({type:"print",text:t}));if(void 0!==l||"Error"===n){const t=Object(a.inspect)(l);s.push({type:"print",text:`${n}: ${t}`})}return s}onmessage=t=>{postMessage({messages:l(t.data.code)})}},function(t,e,n){for(var r=n(28),a=n(21),u=n(14),l=n(1),s=n(2),o=n(12),i=n(3),c=i("iterator"),f=i("toStringTag"),_=o.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=a(p),d=0;d<h.length;d++){var L,g=h[d],A=p[g],x=l[g],T=x&&x.prototype;if(T&&(T[c]||s(T,c,_),T[f]||s(T,f,g),o[g]=_,A))for(L in r)T[L]||u(T,L,r[L],!0)}},function(t,e,n){"use strict";var r=n(29),a=n(32),u=n(12),l=n(13);t.exports=n(35)(Array,"Array",(function(t,e){this._t=l(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,a(1)):a(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),u.Arguments=u.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(3)("unscopables"),a=Array.prototype;null==a[r]&&n(2)(a,r,{}),t.exports=function(t){a[r][t]=!0}},function(t,e,n){t.exports=!n(4)&&!n(17)((function(){return 7!=Object.defineProperty(n(18)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(11);t.exports=function(t,e){if(!r(t))return t;var n,a;if(e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!r(a=n.call(t)))return a;if(!e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(34);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";var r=n(16),a=n(36),u=n(14),l=n(2),s=n(12),o=n(40),i=n(24),c=n(48),f=n(3)("iterator"),_=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,h,d,L,g){o(n,e,h);var A,x,T,b=function(t){if(!_&&t in E)return E[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},O=e+" Iterator",k="values"==d,v=!1,E=t.prototype,m=E[f]||E["@@iterator"]||d&&E[d],U=m||b(d),N=d?k?b("entries"):U:void 0,R="Array"==e&&E.entries||m;if(R&&(T=c(R.call(new t)))!==Object.prototype&&T.next&&(i(T,O,!0),r||"function"==typeof T[f]||l(T,f,p)),k&&m&&"values"!==m.name&&(v=!0,U=function(){return m.call(this)}),r&&!g||!_&&!v&&E[f]||l(E,f,U),s[e]=U,s[O]=p,d)if(A={values:k?U:b("values"),keys:L?U:b("keys"),entries:N},g)for(x in A)x in E||u(E,x,A[x]);else a(a.P+a.F*(_||v),e,A);return A}},function(t,e,n){var r=n(1),a=n(7),u=n(2),l=n(14),s=n(38),o=function(t,e,n){var i,c,f,_,p=t&o.F,h=t&o.G,d=t&o.S,L=t&o.P,g=t&o.B,A=h?r:d?r[e]||(r[e]={}):(r[e]||{}).prototype,x=h?a:a[e]||(a[e]={}),T=x.prototype||(x.prototype={});for(i in h&&(n=e),n)f=((c=!p&&A&&void 0!==A[i])?A:n)[i],_=g&&c?s(f,r):L&&"function"==typeof f?s(Function.call,f):f,A&&l(A,i,f,t&o.U),x[i]!=f&&u(x,i,_),L&&T[i]!=f&&(T[i]=f)};r.core=a,o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,t.exports=o},function(t,e,n){t.exports=n(6)("native-function-to-string",Function.toString)},function(t,e,n){var r=n(39);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,a){return t.call(e,n,r,a)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var r=n(41),a=n(19),u=n(24),l={};n(2)(l,n(3)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(l,{next:a(1,n)}),u(t,e+" Iterator")}},function(t,e,n){var r=n(10),a=n(42),u=n(23),l=n(15)("IE_PROTO"),s=function(){},o=function(){var t,e=n(18)("iframe"),r=u.length;for(e.style.display="none",n(47).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),o=t.F;r--;)delete o.prototype[u[r]];return o()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[l]=t):n=o(),void 0===e?n:a(n,e)}},function(t,e,n){var r=n(9),a=n(10),u=n(21);t.exports=n(4)?Object.defineProperties:function(t,e){a(t);for(var n,l=u(e),s=l.length,o=0;s>o;)r.f(t,n=l[o++],e[n]);return t}},function(t,e,n){var r=n(5),a=n(13),u=n(44)(!1),l=n(15)("IE_PROTO");t.exports=function(t,e){var n,s=a(t),o=0,i=[];for(n in s)n!=l&&r(s,n)&&i.push(n);for(;e.length>o;)r(s,n=e[o++])&&(~u(i,n)||i.push(n));return i}},function(t,e,n){var r=n(13),a=n(45),u=n(46);t.exports=function(t){return function(e,n,l){var s,o=r(e),i=a(o.length),c=u(l,i);if(t&&n!=n){for(;i>c;)if((s=o[c++])!=s)return!0}else for(;i>c;c++)if((t||c in o)&&o[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var r=n(22),a=Math.min;t.exports=function(t){return t>0?a(r(t),9007199254740991):0}},function(t,e,n){var r=n(22),a=Math.max,u=Math.min;t.exports=function(t,e){return(t=r(t))<0?a(t+e,0):u(t,e)}},function(t,e,n){var r=n(1).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(5),a=n(49),u=n(15)("IE_PROTO"),l=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),r(t,u)?t[u]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?l:null}},function(t,e,n){var r=n(20);t.exports=function(t){return Object(r(t))}},function(t,e){var n,r,a=t.exports={};function u(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===u||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:u}catch(t){n=u}try{r="function"==typeof clearTimeout?clearTimeout:l}catch(t){r=l}}();var o,i=[],c=!1,f=-1;function _(){c&&o&&(c=!1,o.length?i=o.concat(i):f=-1,i.length&&p())}function p(){if(!c){var t=s(_);c=!0;for(var e=i.length;e;){for(o=i,i=[];++f<e;)o&&o[f].run();f=-1,e=i.length}o=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===l||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function d(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];i.push(new h(t,e)),1!==i.length||c||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=d,a.addListener=d,a.once=d,a.off=d,a.removeListener=d,a.removeAllListeners=d,a.emit=d,a.prependListener=d,a.prependOnceListener=d,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}]);